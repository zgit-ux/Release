{"version":3,"file":"811.js","sources":["webpack://@agent-tars/core/../node_modules/.pnpm/node-domexception@1.0.0/node_modules/node-domexception/index.js","webpack://@agent-tars/core/../node_modules/.pnpm/formdata-node@4.4.1/node_modules/formdata-node/lib/esm/isPlainObject.js","webpack://@agent-tars/core/../node_modules/.pnpm/formdata-node@4.4.1/node_modules/formdata-node/lib/esm/fileFromPath.js"],"sourcesContent":["/*! node-domexception. MIT License. Jimmy WÃ¤rting <https://jimmy.warting.se/opensource> */\n\nif (!globalThis.DOMException) {\n  try {\n    const { MessageChannel } = require('worker_threads'),\n    port = new MessageChannel().port1,\n    ab = new ArrayBuffer()\n    port.postMessage(ab, [ab, ab])\n  } catch (err) {\n    err.constructor.name === 'DOMException' && (\n      globalThis.DOMException = err.constructor\n    )\n  }\n}\n\nmodule.exports = globalThis.DOMException\n","const getType = (value) => (Object.prototype.toString.call(value).slice(8, -1).toLowerCase());\nfunction isPlainObject(value) {\n    if (getType(value) !== \"object\") {\n        return false;\n    }\n    const pp = Object.getPrototypeOf(value);\n    if (pp === null || pp === undefined) {\n        return true;\n    }\n    const Ctor = pp.constructor && pp.constructor.toString();\n    return Ctor === Object.toString();\n}\nexport default isPlainObject;\n","var __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _FileFromPath_path, _FileFromPath_start;\nimport { statSync, createReadStream, promises as fs } from \"fs\";\nimport { basename } from \"path\";\nimport DOMException from \"node-domexception\";\nimport { File } from \"./File.js\";\nimport isPlainObject from \"./isPlainObject.js\";\nexport * from \"./isFile.js\";\nconst MESSAGE = \"The requested file could not be read, \"\n    + \"typically due to permission problems that have occurred after a reference \"\n    + \"to a file was acquired.\";\nclass FileFromPath {\n    constructor(input) {\n        _FileFromPath_path.set(this, void 0);\n        _FileFromPath_start.set(this, void 0);\n        __classPrivateFieldSet(this, _FileFromPath_path, input.path, \"f\");\n        __classPrivateFieldSet(this, _FileFromPath_start, input.start || 0, \"f\");\n        this.name = basename(__classPrivateFieldGet(this, _FileFromPath_path, \"f\"));\n        this.size = input.size;\n        this.lastModified = input.lastModified;\n    }\n    slice(start, end) {\n        return new FileFromPath({\n            path: __classPrivateFieldGet(this, _FileFromPath_path, \"f\"),\n            lastModified: this.lastModified,\n            size: end - start,\n            start\n        });\n    }\n    async *stream() {\n        const { mtimeMs } = await fs.stat(__classPrivateFieldGet(this, _FileFromPath_path, \"f\"));\n        if (mtimeMs > this.lastModified) {\n            throw new DOMException(MESSAGE, \"NotReadableError\");\n        }\n        if (this.size) {\n            yield* createReadStream(__classPrivateFieldGet(this, _FileFromPath_path, \"f\"), {\n                start: __classPrivateFieldGet(this, _FileFromPath_start, \"f\"),\n                end: __classPrivateFieldGet(this, _FileFromPath_start, \"f\") + this.size - 1\n            });\n        }\n    }\n    get [(_FileFromPath_path = new WeakMap(), _FileFromPath_start = new WeakMap(), Symbol.toStringTag)]() {\n        return \"File\";\n    }\n}\nfunction createFileFromPath(path, { mtimeMs, size }, filenameOrOptions, options = {}) {\n    let filename;\n    if (isPlainObject(filenameOrOptions)) {\n        [options, filename] = [filenameOrOptions, undefined];\n    }\n    else {\n        filename = filenameOrOptions;\n    }\n    const file = new FileFromPath({ path, size, lastModified: mtimeMs });\n    if (!filename) {\n        filename = file.name;\n    }\n    return new File([file], filename, {\n        ...options, lastModified: file.lastModified\n    });\n}\nexport function fileFromPathSync(path, filenameOrOptions, options = {}) {\n    const stats = statSync(path);\n    return createFileFromPath(path, stats, filenameOrOptions, options);\n}\nexport async function fileFromPath(path, filenameOrOptions, options) {\n    const stats = await fs.stat(path);\n    return createFileFromPath(path, stats, filenameOrOptions, options);\n}\n"],"names":["globalThis","MessageChannel","port","ab","ArrayBuffer","err","module","getType","value","Object","isPlainObject","pp","Ctor","__classPrivateFieldSet","receiver","state","kind","f","TypeError","__classPrivateFieldGet","_FileFromPath_path","_FileFromPath_start","MESSAGE","FileFromPath","input","start","end","mtimeMs","WeakMap","Symbol","createFileFromPath","path","size","filenameOrOptions","options","filename","file","File","fileFromPath","stats"],"mappings":"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"}