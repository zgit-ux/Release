/**
* Copyright (c) 2025 Bytedance, Inc. and its affiliates.
* SPDX-License-Identifier: Apache-2.0
*/
import external_fs_default from "fs";
import external_path_default from "path";
import external_os_default from "os";
function _define_property(obj, key, value) {
    if (key in obj) Object.defineProperty(obj, key, {
        value: value,
        enumerable: true,
        configurable: true,
        writable: true
    });
    else obj[key] = value;
    return obj;
}
class WorkspacePathManager {
    static resolveWorkspacePath(baseDir, workspacePath, namespace, isolateSessions) {
        let resolvedPath;
        resolvedPath = workspacePath ? workspacePath.startsWith('~') ? workspacePath.replace(/^~/, external_os_default.homedir()) : external_path_default.isAbsolute(workspacePath) ? workspacePath : external_path_default.resolve(baseDir, workspacePath) : external_path_default.join(baseDir, this.DEFAULT_WORKSPACE_DIR);
        if (isolateSessions && namespace) resolvedPath = external_path_default.join(resolvedPath, namespace);
        return resolvedPath;
    }
    static ensureWorkspaceDirectory(workspacePath) {
        try {
            external_fs_default.mkdirSync(workspacePath, {
                recursive: true
            });
            return workspacePath;
        } catch (error) {
            throw new Error(`Failed to create workspace directory ${workspacePath}: ${error instanceof Error ? error.message : String(error)}`);
        }
    }
}
_define_property(WorkspacePathManager, "DEFAULT_WORKSPACE_DIR", 'agent-tars-workspace');
export { WorkspacePathManager };

//# sourceMappingURL=workspace-path.mjs.map