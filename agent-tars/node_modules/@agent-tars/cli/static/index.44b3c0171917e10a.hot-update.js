"use strict";
self["webpackHotUpdate_agent_tars_web_ui"]("index", {
"./src/entry.css": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
// extracted by css-extract-rspack-plugin

    if(true) {
      (function() {
        var localsJsonString = undefined;
        // 1749665531141
        var cssReload = (__webpack_require__("../node_modules/.pnpm/@rspack+core@1.3.9_@swc+helpers@0.5.17/node_modules/@rspack/core/dist/cssExtractHmr.js")/* .cssReload */.cssReload)(module.id, {});
        // only invalidate when locals change
        if (
          module.hot.data &&
          module.hot.data.value &&
          module.hot.data.value !== localsJsonString
        ) {
          module.hot.invalidate();
        } else {
          module.hot.accept();
        }
        module.hot.dispose(function(data) {
          data.value = localsJsonString;
          cssReload();
        });
      })();
    }
  

}),
"./src/common/hooks/useLayout.ts": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  useLayout: () => (useLayout)
});
/* ESM import */var jotai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("../node_modules/.pnpm/jotai@2.12.5_@types+react@18.3.23_react@18.3.1/node_modules/jotai/esm/react.mjs");
/* ESM import */var _state_atoms_ui__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./src/common/state/atoms/ui.ts");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");


/**
 * Hook for layout management
 *
 * Provides:
 * - Sidebar state (collapsed/expanded)
 * - Workspace panel state (collapsed/expanded)
 * - Toggle functions for both
 */ function useLayout() {
    const [isSidebarCollapsed, setSidebarCollapsed] = (0,jotai__WEBPACK_IMPORTED_MODULE_1__.useAtom)(_state_atoms_ui__WEBPACK_IMPORTED_MODULE_0__.sidebarCollapsedAtom);
    const [isWorkspacePanelCollapsed, setWorkspacePanelCollapsed] = (0,jotai__WEBPACK_IMPORTED_MODULE_1__.useAtom)(_state_atoms_ui__WEBPACK_IMPORTED_MODULE_0__.workspacePanelCollapsedAtom);
    const toggleSidebar = ()=>setSidebarCollapsed((prev)=>!prev);
    const toggleWorkspacePanel = ()=>setWorkspacePanelCollapsed((prev)=>!prev);
    return {
        isSidebarCollapsed,
        isWorkspacePanelCollapsed,
        toggleSidebar,
        toggleWorkspacePanel
    };
}

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/common/hooks/usePlan.ts": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  usePlan: () => (usePlan)
});
/* ESM import */var jotai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("../node_modules/.pnpm/jotai@2.12.5_@types+react@18.3.23_react@18.3.1/node_modules/jotai/esm/react.mjs");
/* ESM import */var _state_atoms_plan__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./src/common/state/atoms/plan.ts");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");



/**
 * Hook for plan management functionality
 *
 * Provides:
 * - Access to plan data for the active session
 * - UI state for plan display
 * - Toggle functions for plan visibility
 */ function usePlan(sessionId) {
    const [plans, setPlans] = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.useAtom)(_state_atoms_plan__WEBPACK_IMPORTED_MODULE_0__.plansAtom);
    const [planUIState, setPlanUIState] = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.useAtom)(_state_atoms_plan__WEBPACK_IMPORTED_MODULE_0__.planUIStateAtom);
    // Get plan for current session
    const currentPlan = sessionId ? plans[sessionId] : undefined;
    // Add debug logging to trace plan state
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        if (sessionId) {
            console.log(`[usePlan] Plan state for session ${sessionId}:`, currentPlan);
        }
    }, [
        sessionId,
        currentPlan
    ]);
    // Toggle plan visibility
    const togglePlanVisibility = ()=>{
        setPlanUIState((prev)=>({
                ...prev,
                isVisible: !prev.isVisible
            }));
    };
    // Show plan automatically when first created
    const showPlanAutomatically = ()=>{
        setPlanUIState((prev)=>({
                ...prev,
                isVisible: true
            }));
    };
    return {
        currentPlan,
        isPlanVisible: planUIState.isVisible,
        togglePlanVisibility,
        showPlanAutomatically
    };
}

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/common/hooks/useReplay.ts": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  useReplay: () => (useReplay)
});
/* ESM import */var jotai__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("../node_modules/.pnpm/jotai@2.12.5_@types+react@18.3.23_react@18.3.1/node_modules/jotai/esm/react.mjs");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);
/* ESM import */var _state_atoms_replay__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/common/state/atoms/replay.ts");
/* ESM import */var _useSession__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/common/hooks/useSession.ts");
/* ESM import */var _state_atoms_message__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/common/state/atoms/message.ts");
/* ESM import */var _state_atoms_tool__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/common/state/atoms/tool.ts");
/* ESM import */var _state_actions_eventProcessor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/common/state/actions/eventProcessor.ts");
/* ESM import */var _state_atoms_plan__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/common/state/atoms/plan.ts");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");
// /agent-tars-web-ui/src/v2/hooks/useReplay.ts









/**
 * Custom hook for managing replay functionality
 *
 * Provides:
 * - Control for playback (play, pause, jump, etc.)
 * - Event processing through the standard event processor
 * - Timeline calculations and positioning
 */ function useReplay() {
    const [replayState, setReplayState] = (0,jotai__WEBPACK_IMPORTED_MODULE_7__.useAtom)(_state_atoms_replay__WEBPACK_IMPORTED_MODULE_1__.replayStateAtom);
    const { activeSessionId } = (0,_useSession__WEBPACK_IMPORTED_MODULE_2__.useSession)();
    const [playbackInterval, setPlaybackInterval] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(null);
    const [, setMessages] = (0,jotai__WEBPACK_IMPORTED_MODULE_7__.useAtom)(_state_atoms_message__WEBPACK_IMPORTED_MODULE_3__.messagesAtom);
    const [, setToolResults] = (0,jotai__WEBPACK_IMPORTED_MODULE_7__.useAtom)(_state_atoms_tool__WEBPACK_IMPORTED_MODULE_4__.toolResultsAtom);
    const [, setPlans] = (0,jotai__WEBPACK_IMPORTED_MODULE_7__.useAtom)(_state_atoms_plan__WEBPACK_IMPORTED_MODULE_6__.plansAtom);
    const processEvent = (0,jotai__WEBPACK_IMPORTED_MODULE_7__.useSetAtom)(_state_actions_eventProcessor__WEBPACK_IMPORTED_MODULE_5__.processEventAction);
    /**
   * 重置会话状态并处理事件至指定索引
   */ const processEventsUpToIndex = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((targetIndex)=>{
        if (!activeSessionId || !replayState.events.length || targetIndex < 0) return;
        // 获取需要处理的事件
        const eventsToProcess = replayState.events.slice(0, targetIndex + 1);
        // 清空当前会话状态
        setMessages((prev)=>({
                ...prev,
                [activeSessionId]: []
            }));
        setToolResults((prev)=>({
                ...prev,
                [activeSessionId]: []
            }));
        setPlans((prev)=>({
                ...prev,
                [activeSessionId]: {
                    steps: [],
                    isComplete: false,
                    summary: null,
                    hasGeneratedPlan: false,
                    keyframes: []
                }
            }));
        // 处理环境输入事件优先，确保图片资源先加载
        const envEvents = eventsToProcess.filter((event)=>event.type === 'environment_input');
        const nonEnvEvents = eventsToProcess.filter((event)=>event.type !== 'environment_input');
        // 先处理环境输入事件
        for (const event of envEvents){
            processEvent({
                sessionId: activeSessionId,
                event
            });
        }
        // 然后处理其他事件
        for (const event of nonEnvEvents){
            processEvent({
                sessionId: activeSessionId,
                event
            });
        }
    }, [
        activeSessionId,
        replayState.events,
        setMessages,
        setToolResults,
        setPlans,
        processEvent
    ]);
    /**
   * 开始回放
   */ const startReplay = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{
        // 清除现有的定时器
        if (playbackInterval) {
            clearInterval(playbackInterval);
        }
        setReplayState((prev)=>({
                ...prev,
                isPaused: false
            }));
        // 设置定时器按间隔前进
        const interval = setInterval(()=>{
            setReplayState((prev)=>{
                // 到达末尾时停止
                if (prev.currentEventIndex >= prev.events.length - 1) {
                    clearInterval(interval);
                    return {
                        ...prev,
                        isPaused: true,
                        currentEventIndex: prev.events.length - 1
                    };
                }
                // 前进到下一个事件
                const nextIndex = prev.currentEventIndex + 1;
                // 处理到新位置
                if (activeSessionId) {
                    processEvent({
                        sessionId: activeSessionId,
                        event: prev.events[nextIndex]
                    });
                }
                return {
                    ...prev,
                    currentEventIndex: nextIndex
                };
            });
        }, 500 / replayState.playbackSpeed);
        setPlaybackInterval(interval);
    }, [
        activeSessionId,
        playbackInterval,
        processEvent,
        replayState.playbackSpeed,
        setReplayState
    ]);
    /**
   * 暂停回放
   */ const pauseReplay = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{
        if (playbackInterval) {
            clearInterval(playbackInterval);
            setPlaybackInterval(null);
        }
        setReplayState((prev)=>({
                ...prev,
                isPaused: true
            }));
    }, [
        playbackInterval,
        setReplayState
    ]);
    /**
   * 跳转到时间轴上的指定位置
   */ const jumpToPosition = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((position)=>{
        // 确保位置在有效范围内
        const normalizedPosition = Math.max(0, Math.min(1, position));
        if (replayState.events.length === 0 || !activeSessionId) return;
        // 根据位置计算目标事件索引
        const targetIndex = Math.floor(normalizedPosition * (replayState.events.length - 1));
        // 暂停任何正在进行的回放
        if (playbackInterval) {
            clearInterval(playbackInterval);
            setPlaybackInterval(null);
        }
        // 处理到新位置
        processEventsUpToIndex(targetIndex);
        setReplayState((prev)=>({
                ...prev,
                isPaused: true,
                currentEventIndex: targetIndex
            }));
    }, [
        activeSessionId,
        playbackInterval,
        processEventsUpToIndex,
        replayState.events.length,
        setReplayState
    ]);
    /**
   * 跳转到最终结果
   */ const jumpToResult = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{
        if (replayState.events.length === 0 || !activeSessionId) return;
        const finalIndex = replayState.events.length - 1;
        // 暂停任何正在进行的回放
        if (playbackInterval) {
            clearInterval(playbackInterval);
            setPlaybackInterval(null);
        }
        // 处理到最终位置
        processEventsUpToIndex(finalIndex);
        setReplayState((prev)=>({
                ...prev,
                isPaused: true,
                currentEventIndex: finalIndex
            }));
    }, [
        activeSessionId,
        playbackInterval,
        processEventsUpToIndex,
        replayState.events.length,
        setReplayState
    ]);
    /**
   * 重置回放到初始状态，允许从头开始播放
   */ const resetReplay = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{
        // 暂停任何正在进行的回放
        if (playbackInterval) {
            clearInterval(playbackInterval);
            setPlaybackInterval(null);
        }
        // 处理到初始位置
        processEventsUpToIndex(0);
        setReplayState((prev)=>({
                ...prev,
                isPaused: true,
                currentEventIndex: 0
            }));
    }, [
        playbackInterval,
        processEventsUpToIndex,
        setReplayState
    ]);
    /**
   * 设置播放速度
   */ const setPlaybackSpeed = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((speed)=>{
        setReplayState((prev)=>({
                ...prev,
                playbackSpeed: speed
            }));
        // 如果正在播放，以新速度重启
        if (!replayState.isPaused && playbackInterval) {
            clearInterval(playbackInterval);
            startReplay();
        }
    }, [
        playbackInterval,
        replayState.isPaused,
        setReplayState,
        startReplay
    ]);
    /**
   * 退出回放模式
   */ const exitReplay = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{
        if (playbackInterval) {
            clearInterval(playbackInterval);
        }
        setReplayState((prev)=>({
                ...prev,
                isActive: false,
                isPaused: true,
                currentEventIndex: -1,
                events: [],
                processedEvents: {}
            }));
    }, [
        playbackInterval,
        setReplayState
    ]);
    /**
   * 获取当前事件
   */ const getCurrentEvent = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{
        if (!replayState.isActive || replayState.currentEventIndex < 0 || replayState.currentEventIndex >= replayState.events.length) {
            return null;
        }
        return replayState.events[replayState.currentEventIndex];
    }, [
        replayState.currentEventIndex,
        replayState.events,
        replayState.isActive
    ]);
    /**
   * 获取当前位置百分比 (0-100)
   */ const getCurrentPosition = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{
        if (!replayState.isActive || replayState.events.length <= 1) {
            return 0;
        }
        return replayState.currentEventIndex / (replayState.events.length - 1) * 100;
    }, [
        replayState.currentEventIndex,
        replayState.events.length,
        replayState.isActive
    ]);
    /**
   * 获取当前所有事件
   */ const getCurrentEvents = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{
        if (!replayState.isActive || replayState.currentEventIndex < 0) {
            return [];
        }
        return replayState.events.slice(0, replayState.currentEventIndex + 1);
    }, [
        replayState.currentEventIndex,
        replayState.events,
        replayState.isActive
    ]);
    // 组件卸载时清理定时器
    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{
        return ()=>{
            if (playbackInterval) {
                clearInterval(playbackInterval);
            }
        };
    }, [
        playbackInterval
    ]);
    // 回放模式初始化时：如果索引为-1，需要手动触发第一步，否则会显示为空白
    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{
        if (replayState.isActive && replayState.currentEventIndex === -1 && replayState.events.length > 0) {
            // 如果启动回放后立即跳到第一个事件
            processEventsUpToIndex(0);
            setReplayState((prev)=>({
                    ...prev,
                    currentEventIndex: 0
                }));
        }
    }, [
        replayState.isActive,
        replayState.currentEventIndex,
        replayState.events.length,
        processEventsUpToIndex,
        setReplayState
    ]);
    /**
   * 取消自动播放倒计时
   */ const cancelAutoPlay = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(()=>{
        setReplayState((prev)=>({
                ...prev,
                autoPlayCountdown: null
            }));
    }, [
        setReplayState
    ]);
    // 添加对自动播放事件的监听
    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{
        const handleAutoStart = ()=>{
            console.log('Auto-play event received, starting replay...');
            startReplay();
        };
        // 添加事件监听器
        window.addEventListener('replay-autostart', handleAutoStart);
        // 清理函数
        return ()=>{
            window.removeEventListener('replay-autostart', handleAutoStart);
        };
    }, [
        startReplay
    ]); // 依赖于startReplay函数
    return {
        // 状态
        replayState,
        // 操作方法
        startReplay,
        pauseReplay,
        jumpToPosition,
        jumpToResult,
        setPlaybackSpeed,
        exitReplay,
        cancelAutoPlay,
        resetReplay,
        // 工具方法
        getCurrentEvents,
        getCurrentPosition,
        getCurrentEvent
    };
}

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/common/hooks/useReplayMode.tsx": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ReplayModeProvider: () => (ReplayModeProvider),
  useReplayMode: () => (useReplayMode),
  useReplayModelInfo: () => (useReplayModelInfo)
});
/* ESM import */var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* ESM import */var jotai__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("../node_modules/.pnpm/jotai@2.12.5_@types+react@18.3.23_react@18.3.1/node_modules/jotai/esm/react.mjs");
/* ESM import */var _state_atoms_replay__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/common/state/atoms/replay.ts");
/* ESM import */var _state_atoms_session__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/common/state/atoms/session.ts");
/* ESM import */var _state_atoms_message__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/common/state/atoms/message.ts");
/* ESM import */var _state_atoms_ui__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/common/state/atoms/ui.ts");
/* ESM import */var _state_actions_modelInfoAction__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/common/state/actions/modelInfoAction.ts");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

var _s = $RefreshSig$(), _s1 = $RefreshSig$(), _s2 = $RefreshSig$();







const ReplayModeContext = /*#__PURE__*/ (0,react__WEBPACK_IMPORTED_MODULE_1__.createContext)({
    isReplayMode: false,
    modelInfo: null
});
/**
 * ReplayModeProvider - Provides replay mode state to the application and initializes replay data
 *
 * 1. Detects replay mode from window variables
 * 2. Initializes application state with replay data when in replay mode
 * 3. Prevents server communication in replay mode
 * 4. Provides the replay mode status to all child components
 */ const ReplayModeProvider = (param)=>{
    let { children } = param;
    _s();
    // Access necessary atoms
    const [replayState, setReplayState] = (0,jotai__WEBPACK_IMPORTED_MODULE_7__.useAtom)(_state_atoms_replay__WEBPACK_IMPORTED_MODULE_2__.replayStateAtom);
    const [, setMessages] = (0,jotai__WEBPACK_IMPORTED_MODULE_7__.useAtom)(_state_atoms_message__WEBPACK_IMPORTED_MODULE_4__.messagesAtom);
    const [, setSessions] = (0,jotai__WEBPACK_IMPORTED_MODULE_7__.useAtom)(_state_atoms_session__WEBPACK_IMPORTED_MODULE_3__.sessionsAtom);
    const [, setActiveSessionId] = (0,jotai__WEBPACK_IMPORTED_MODULE_7__.useAtom)(_state_atoms_session__WEBPACK_IMPORTED_MODULE_3__.activeSessionIdAtom);
    const [, setConnectionStatus] = (0,jotai__WEBPACK_IMPORTED_MODULE_7__.useAtom)(_state_atoms_ui__WEBPACK_IMPORTED_MODULE_5__.connectionStatusAtom);
    const modelInfo = (0,jotai__WEBPACK_IMPORTED_MODULE_7__.useAtomValue)(_state_atoms_ui__WEBPACK_IMPORTED_MODULE_5__.modelInfoAtom);
    const setModelInfo = (0,jotai__WEBPACK_IMPORTED_MODULE_7__.useSetAtom)(_state_actions_modelInfoAction__WEBPACK_IMPORTED_MODULE_6__.setModelInfoAction);
    // Initialize replay mode if window variables are present
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        // Check if in replay mode
        if (window.AGENT_TARS_REPLAY_MODE && window.AGENT_TARS_EVENT_STREAM) {
            // Get session data and event stream
            const sessionData = window.AGENT_TARS_SESSION_DATA;
            const events = window.AGENT_TARS_EVENT_STREAM;
            const modelData = window.AGENT_TARS_MODEL_INFO;
            console.log('[ReplayMode] Initializing replay mode with', events.length, 'events');
            if (sessionData && sessionData.id) {
                // Set connection status to "offline" to prevent health checks
                setConnectionStatus({
                    connected: false,
                    lastConnected: null,
                    lastError: null,
                    reconnecting: false
                });
                // Set model info if available using the action
                if (modelData) {
                    setModelInfo(modelData);
                    console.log('[ReplayMode] Model info loaded:', modelData);
                }
                // Set sessions data
                setSessions([
                    sessionData
                ]);
                // When in replay mode, the session ID must be set immediately
                setActiveSessionId(sessionData.id);
                // Add debug logging
                console.log('[ReplayMode] Active session set to:', sessionData.id);
                // Initialize replay state with autoPlayCountdown
                setReplayState({
                    isActive: true,
                    isPaused: true,
                    events: events,
                    currentEventIndex: -1,
                    startTimestamp: events.length > 0 ? events[0].timestamp : null,
                    endTimestamp: events.length > 0 ? events[events.length - 1].timestamp : null,
                    playbackSpeed: 1,
                    autoPlayCountdown: 2,
                    visibleTimeWindow: events.length > 0 ? {
                        start: events[0].timestamp,
                        end: events[events.length - 1].timestamp
                    } : null,
                    processedEvents: {}
                });
                // Initialize empty messages state
                setMessages({
                    [sessionData.id]: []
                });
                console.log('[ReplayMode] Replay mode initialized successfully');
                // 启动倒计时
                const countdownTimer = setInterval(()=>{
                    setReplayState((prev)=>{
                        // 如果倒计时结束或已被取消
                        if (prev.autoPlayCountdown === null || prev.autoPlayCountdown <= 0) {
                            clearInterval(countdownTimer);
                            // 只在倒计时完成时准备开始播放，但不直接改变isPaused状态
                            // 这样将由useReplay中的startReplay函数正确启动播放过程
                            if (prev.autoPlayCountdown === 0) {
                                // 设置一个延迟启动标记，在下一个useEffect中捕获并启动播放
                                setTimeout(()=>{
                                    console.log('[ReplayMode] Auto-play countdown finished, starting replay...');
                                    // 触发一个事件通知播放开始
                                    window.dispatchEvent(new CustomEvent('replay-autostart'));
                                }, 0);
                            }
                            return {
                                ...prev,
                                autoPlayCountdown: null
                            };
                        }
                        // 继续倒计时
                        return {
                            ...prev,
                            autoPlayCountdown: prev.autoPlayCountdown - 1
                        };
                    });
                }, 1000);
            } else {
                console.error('[ReplayMode] Missing session data or session ID');
            }
        }
    }, [
        setMessages,
        setSessions,
        setActiveSessionId,
        setReplayState,
        setConnectionStatus,
        setModelInfo
    ]);
    // Check both the atom and global window variable for replay mode
    const isReplayMode = replayState.isActive || !!window.AGENT_TARS_REPLAY_MODE;
    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(ReplayModeContext.Provider, {
        value: {
            isReplayMode,
            modelInfo: isReplayMode ? modelInfo : null
        },
        children: children
    }, void 0, false, {
        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useReplayMode.tsx",
        lineNumber: 154,
        columnNumber: 5
    }, undefined);
};
_s(ReplayModeProvider, "vDBIVwcSJPjLb1Gm5aAZeHv1ReI=", false, function() {
    return [
        jotai__WEBPACK_IMPORTED_MODULE_7__.useAtom,
        jotai__WEBPACK_IMPORTED_MODULE_7__.useAtom,
        jotai__WEBPACK_IMPORTED_MODULE_7__.useAtom,
        jotai__WEBPACK_IMPORTED_MODULE_7__.useAtom,
        jotai__WEBPACK_IMPORTED_MODULE_7__.useAtom,
        jotai__WEBPACK_IMPORTED_MODULE_7__.useAtomValue,
        jotai__WEBPACK_IMPORTED_MODULE_7__.useSetAtom
    ];
});
_c = ReplayModeProvider;
/**
 * useReplayMode - Hook to access replay mode state
 */ const useReplayMode = ()=>{
    _s1();
    const { isReplayMode } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ReplayModeContext);
    return isReplayMode;
};
_s1(useReplayMode, "aCxgkkyzxeI/iK3PhvujhBgtmdU=");
/**
 * useReplayModelInfo - Hook to access model info in replay mode
 */ const useReplayModelInfo = ()=>{
    _s2();
    const { modelInfo } = (0,react__WEBPACK_IMPORTED_MODULE_1__.useContext)(ReplayModeContext);
    return modelInfo;
};
_s2(useReplayModelInfo, "OEZziHsVOGEYTISw4STDONUUJAE=");
var _c;
$RefreshReg$(_c, "ReplayModeProvider");

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/common/hooks/useSession.ts": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  useSession: () => (useSession)
});
/* ESM import */var jotai__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__("../node_modules/.pnpm/jotai@2.12.5_@types+react@18.3.23_react@18.3.1/node_modules/jotai/esm/react.mjs");
/* ESM import */var react_router_dom__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__("../node_modules/.pnpm/react-router@7.6.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-router/dist/development/chunk-DQRVZFIR.mjs");
/* ESM import */var _state_atoms_session__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./src/common/state/atoms/session.ts");
/* ESM import */var _state_atoms_message__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/common/state/atoms/message.ts");
/* ESM import */var _state_atoms_tool__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/common/state/atoms/tool.ts");
/* ESM import */var _state_atoms_plan__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/common/state/atoms/plan.ts");
/* ESM import */var _state_atoms_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/common/state/atoms/ui.ts");
/* ESM import */var _state_atoms_replay__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/common/state/atoms/replay.ts");
/* ESM import */var _state_actions_sessionActions__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/common/state/actions/sessionActions.ts");
/* ESM import */var _state_actions_connectionActions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./src/common/state/actions/connectionActions.ts");
/* ESM import */var _state_actions_modelInfoAction__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./src/common/state/actions/modelInfoAction.ts");
/* ESM import */var _services_socketService__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./src/common/services/socketService.ts");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_10___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_10__);
/* ESM import */var _hooks_useReplayMode__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__("./src/common/hooks/useReplayMode.tsx");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");














/**
 * Hook for session management functionality
 */ function useSession() {
    // State
    const [sessions, setSessions] = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useAtom)(_state_atoms_session__WEBPACK_IMPORTED_MODULE_0__.sessionsAtom);
    const [activeSessionId, setActiveSessionId] = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useAtom)(_state_atoms_session__WEBPACK_IMPORTED_MODULE_0__.activeSessionIdAtom);
    const messages = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useAtomValue)(_state_atoms_message__WEBPACK_IMPORTED_MODULE_1__.messagesAtom);
    const groupedMessages = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useAtomValue)(_state_atoms_message__WEBPACK_IMPORTED_MODULE_1__.groupedMessagesAtom);
    const toolResults = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useAtomValue)(_state_atoms_tool__WEBPACK_IMPORTED_MODULE_2__.toolResultsAtom);
    const [isProcessing, setIsProcessing] = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useAtom)(_state_atoms_ui__WEBPACK_IMPORTED_MODULE_4__.isProcessingAtom);
    const [activePanelContent, setActivePanelContent] = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useAtom)(_state_atoms_ui__WEBPACK_IMPORTED_MODULE_4__.activePanelContentAtom);
    const [connectionStatus, setConnectionStatus] = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useAtom)(_state_atoms_ui__WEBPACK_IMPORTED_MODULE_4__.connectionStatusAtom);
    const [plans, setPlans] = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useAtom)(_state_atoms_plan__WEBPACK_IMPORTED_MODULE_3__.plansAtom);
    const setPlanUIState = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useSetAtom)(_state_atoms_plan__WEBPACK_IMPORTED_MODULE_3__.planUIStateAtom);
    const [replayState, setReplayState] = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useAtom)(_state_atoms_replay__WEBPACK_IMPORTED_MODULE_5__.replayStateAtom);
    const modelInfo = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useAtomValue)(_state_atoms_ui__WEBPACK_IMPORTED_MODULE_4__.modelInfoAtom);
    // Check if we're in replay mode using the context hook
    const isReplayMode = (0,_hooks_useReplayMode__WEBPACK_IMPORTED_MODULE_11__.useReplayMode)();
    // 获取回放模式下的模型信息
    const replayModelInfo = (0,_hooks_useReplayMode__WEBPACK_IMPORTED_MODULE_11__.useReplayModelInfo)();
    // Actions
    const loadSessions = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useSetAtom)(_state_actions_sessionActions__WEBPACK_IMPORTED_MODULE_6__.loadSessionsAction);
    const createSession = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useSetAtom)(_state_actions_sessionActions__WEBPACK_IMPORTED_MODULE_6__.createSessionAction);
    const setActiveSession = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useSetAtom)(_state_actions_sessionActions__WEBPACK_IMPORTED_MODULE_6__.setActiveSessionAction);
    const updateSessionMetadata = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useSetAtom)(_state_actions_sessionActions__WEBPACK_IMPORTED_MODULE_6__.updateSessionAction);
    const deleteSession = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useSetAtom)(_state_actions_sessionActions__WEBPACK_IMPORTED_MODULE_6__.deleteSessionAction);
    const sendMessage = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useSetAtom)(_state_actions_sessionActions__WEBPACK_IMPORTED_MODULE_6__.sendMessageAction);
    const abortQuery = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useSetAtom)(_state_actions_sessionActions__WEBPACK_IMPORTED_MODULE_6__.abortQueryAction);
    const initConnectionMonitoring = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useSetAtom)(_state_actions_connectionActions__WEBPACK_IMPORTED_MODULE_7__.initConnectionMonitoringAction);
    const checkServerStatus = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useSetAtom)(_state_actions_connectionActions__WEBPACK_IMPORTED_MODULE_7__.checkConnectionStatusAction);
    const checkSessionStatus = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useSetAtom)(_state_actions_sessionActions__WEBPACK_IMPORTED_MODULE_6__.checkSessionStatusAction);
    const fetchModelInfo = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useSetAtom)(_state_actions_modelInfoAction__WEBPACK_IMPORTED_MODULE_8__.fetchModelInfoAction);
    const setModelInfo = (0,jotai__WEBPACK_IMPORTED_MODULE_12__.useSetAtom)(_state_actions_modelInfoAction__WEBPACK_IMPORTED_MODULE_8__.setModelInfoAction);
    // Get current location
    const location = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_13__.useLocation)();
    // 保留这个工具函数，但移除自动同步逻辑
    const getSessionIdFromUrl = (0,react__WEBPACK_IMPORTED_MODULE_10__.useCallback)(()=>{
        const pathParts = location.pathname.split('/').filter(Boolean);
        return pathParts.length > 0 ? pathParts[0] : null;
    }, [
        location
    ]);
    // Periodic status checking for active session - 在回放模式下不检查状态
    (0,react__WEBPACK_IMPORTED_MODULE_10__.useEffect)(()=>{
        if (!activeSessionId || !connectionStatus.connected || isReplayMode) return;
        // Initial status check when session becomes active
        checkSessionStatus(activeSessionId);
    }, [
        activeSessionId,
        connectionStatus.connected,
        checkSessionStatus,
        isReplayMode
    ]);
    // Enhanced socket handler for session status sync - 在回放模式下不更新状态
    const handleSessionStatusUpdate = (0,react__WEBPACK_IMPORTED_MODULE_10__.useCallback)((status)=>{
        if (status && typeof status.isProcessing === 'boolean' && !isReplayMode) {
            setIsProcessing(status.isProcessing);
        }
    }, [
        setIsProcessing,
        isReplayMode
    ]);
    // Set up socket event handlers when active session changes - 在回放模式下不设置socket事件处理
    (0,react__WEBPACK_IMPORTED_MODULE_10__.useEffect)(()=>{
        if (!activeSessionId || !_services_socketService__WEBPACK_IMPORTED_MODULE_9__.socketService.isConnected() || isReplayMode) return;
        // Join session and listen for status updates
        _services_socketService__WEBPACK_IMPORTED_MODULE_9__.socketService.joinSession(activeSessionId, ()=>{
        /* existing event handling */ }, handleSessionStatusUpdate);
        // Register global status handler
        _services_socketService__WEBPACK_IMPORTED_MODULE_9__.socketService.on('agent-status', handleSessionStatusUpdate);
        return ()=>{
            // Clean up handlers
            _services_socketService__WEBPACK_IMPORTED_MODULE_9__.socketService.off('agent-status', handleSessionStatusUpdate);
        };
    }, [
        activeSessionId,
        handleSessionStatusUpdate,
        isReplayMode
    ]);
    // Auto-show plan when it's first created - 在回放模式下不自动显示计划
    (0,react__WEBPACK_IMPORTED_MODULE_10__.useEffect)(()=>{
        var _plans_activeSessionId;
        if (activeSessionId && ((_plans_activeSessionId = plans[activeSessionId]) === null || _plans_activeSessionId === void 0 ? void 0 : _plans_activeSessionId.hasGeneratedPlan) && !isReplayMode) {
            const currentPlan = plans[activeSessionId];
            // If this is a newly generated plan, automatically show it
            if (currentPlan.steps.length > 0 && currentPlan.steps.every((step)=>!step.done)) {
                setPlanUIState((prev)=>({
                        ...prev,
                        isVisible: true
                    }));
            }
        }
    }, [
        activeSessionId,
        plans,
        setPlanUIState,
        isReplayMode
    ]);
    // 添加获取模型信息的效果
    (0,react__WEBPACK_IMPORTED_MODULE_10__.useEffect)(()=>{
        // 在回放模式下使用回放模式的模型信息
        if (isReplayMode && replayModelInfo) {
            setModelInfo(replayModelInfo);
            return;
        }
        // 在回放模式或未连接时不获取模型信息
        if (isReplayMode || !connectionStatus.connected) return;
        // 使用新的 action 获取模型信息
        fetchModelInfo();
    }, [
        connectionStatus.connected,
        isReplayMode,
        replayModelInfo,
        fetchModelInfo,
        setModelInfo
    ]);
    // Memoize the session state object to avoid unnecessary re-renders
    const sessionState = (0,react__WEBPACK_IMPORTED_MODULE_10__.useMemo)(()=>({
            // State
            sessions,
            activeSessionId,
            messages,
            groupedMessages,
            toolResults,
            isProcessing,
            activePanelContent,
            connectionStatus,
            plans,
            replayState,
            modelInfo,
            // Session operations
            loadSessions,
            createSession,
            setActiveSession,
            updateSessionMetadata,
            deleteSession,
            // Message operations
            sendMessage,
            abortQuery,
            // UI operations
            setActivePanelContent,
            // Connection operations
            initConnectionMonitoring,
            checkServerStatus,
            // Status operations
            checkSessionStatus,
            getSessionIdFromUrl
        }), [
        sessions,
        activeSessionId,
        messages,
        groupedMessages,
        toolResults,
        isProcessing,
        activePanelContent,
        connectionStatus,
        plans,
        replayState,
        modelInfo,
        loadSessions,
        createSession,
        setActiveSession,
        updateSessionMetadata,
        deleteSession,
        sendMessage,
        abortQuery,
        setActivePanelContent,
        initConnectionMonitoring,
        checkServerStatus,
        checkSessionStatus,
        getSessionIdFromUrl
    ]);
    return sessionState;
}

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/common/hooks/useTool.tsx": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  useTool: () => (useTool)
});
/* ESM import */var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js");
/* ESM import */var _state_atoms_tool__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/common/state/atoms/tool.ts");
/* ESM import */var _common_constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/common/constants/index.ts");
/* ESM import */var react_icons_fi__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("../node_modules/.pnpm/react-icons@4.12.0_react@18.3.1/node_modules/react-icons/fi/index.esm.js");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");




/**
 * Hook for tool-related functionality
 */ function useTool() {
    /**
   * Get a tool result by its tool call ID
   */ const getToolResultForCall = (toolCallId)=>{
        return _state_atoms_tool__WEBPACK_IMPORTED_MODULE_1__.toolCallResultMap.get(toolCallId);
    };
    /**
   * Get the appropriate icon for a tool type with enhanced styling
   */ const getToolIcon = (type)=>{
        // 特殊处理 final_answer 工具，使用更友好的图标和名称
        if (type === 'final_answer') {
            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                className: "relative",
                children: [
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                        className: "absolute inset-0 bg-gradient-to-br from-accent-400 to-accent-500 rounded-full opacity-20"
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                        lineNumber: 33,
                        columnNumber: 11
                    }, this),
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_3__.FiBookOpen, {
                        className: "relative z-10 text-accent-600 dark:text-accent-400"
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                        lineNumber: 34,
                        columnNumber: 11
                    }, this)
                ]
            }, void 0, true, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                lineNumber: 32,
                columnNumber: 9
            }, this);
        }
        switch(type){
            case _common_constants__WEBPACK_IMPORTED_MODULE_2__.TOOL_TYPES.SEARCH:
                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                    className: "relative",
                    children: [
                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                            className: "absolute inset-0 bg-gradient-to-br from-blue-400 to-indigo-500 rounded-full opacity-20"
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                            lineNumber: 43,
                            columnNumber: 13
                        }, this),
                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_3__.FiSearch, {
                            className: "relative z-10 text-blue-600 dark:text-blue-400"
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                            lineNumber: 44,
                            columnNumber: 13
                        }, this)
                    ]
                }, void 0, true, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                    lineNumber: 42,
                    columnNumber: 11
                }, this);
            case _common_constants__WEBPACK_IMPORTED_MODULE_2__.TOOL_TYPES.BROWSER:
                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                    className: "relative",
                    children: [
                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                            className: "absolute inset-0 bg-gradient-to-br from-purple-400 to-pink-500 rounded-full opacity-20"
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                            lineNumber: 50,
                            columnNumber: 13
                        }, this),
                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_3__.FiMonitor, {
                            className: "relative z-10 text-purple-600 dark:text-purple-400"
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                            lineNumber: 51,
                            columnNumber: 13
                        }, this)
                    ]
                }, void 0, true, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                    lineNumber: 49,
                    columnNumber: 11
                }, this);
            case _common_constants__WEBPACK_IMPORTED_MODULE_2__.TOOL_TYPES.COMMAND:
                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                    className: "relative",
                    children: [
                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                            className: "absolute inset-0 bg-gradient-to-br from-green-400 to-emerald-500 rounded-full opacity-20"
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                            lineNumber: 57,
                            columnNumber: 13
                        }, this),
                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_3__.FiTerminal, {
                            className: "relative z-10 text-green-600 dark:text-green-400"
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                            lineNumber: 58,
                            columnNumber: 13
                        }, this)
                    ]
                }, void 0, true, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                    lineNumber: 56,
                    columnNumber: 11
                }, this);
            case _common_constants__WEBPACK_IMPORTED_MODULE_2__.TOOL_TYPES.FILE:
                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                    className: "relative",
                    children: [
                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                            className: "absolute inset-0 bg-gradient-to-br from-yellow-400 to-amber-500 rounded-full opacity-20"
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                            lineNumber: 64,
                            columnNumber: 13
                        }, this),
                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_3__.FiFile, {
                            className: "relative z-10 text-yellow-600 dark:text-yellow-400"
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                            lineNumber: 65,
                            columnNumber: 13
                        }, this)
                    ]
                }, void 0, true, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                    lineNumber: 63,
                    columnNumber: 11
                }, this);
            case _common_constants__WEBPACK_IMPORTED_MODULE_2__.TOOL_TYPES.IMAGE:
                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                    className: "relative",
                    children: [
                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                            className: "absolute inset-0 bg-gradient-to-br from-red-400 to-rose-500 rounded-full opacity-20"
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                            lineNumber: 71,
                            columnNumber: 13
                        }, this),
                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_3__.FiImage, {
                            className: "relative z-10 text-red-600 dark:text-red-400"
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                            lineNumber: 72,
                            columnNumber: 13
                        }, this)
                    ]
                }, void 0, true, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                    lineNumber: 70,
                    columnNumber: 11
                }, this);
            case _common_constants__WEBPACK_IMPORTED_MODULE_2__.TOOL_TYPES.BROWSER_CONTROL:
                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                    className: "relative",
                    children: [
                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                            className: "absolute inset-0 bg-gradient-to-br from-cyan-400 to-teal-500 rounded-full opacity-20"
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                            lineNumber: 78,
                            columnNumber: 13
                        }, this),
                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_3__.FiCpu, {
                            className: "relative z-10 text-cyan-600 dark:text-cyan-400"
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                            lineNumber: 79,
                            columnNumber: 13
                        }, this)
                    ]
                }, void 0, true, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                    lineNumber: 77,
                    columnNumber: 11
                }, this);
            default:
                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                    className: "relative",
                    children: [
                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                            className: "absolute inset-0 bg-gradient-to-br from-gray-400 to-gray-500 rounded-full opacity-20"
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                            lineNumber: 85,
                            columnNumber: 13
                        }, this),
                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_3__.FiFile, {
                            className: "relative z-10 text-gray-600 dark:text-gray-400"
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                            lineNumber: 86,
                            columnNumber: 13
                        }, this)
                    ]
                }, void 0, true, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/hooks/useTool.tsx",
                    lineNumber: 84,
                    columnNumber: 11
                }, this);
        }
    };
    return {
        getToolResultForCall,
        getToolIcon
    };
}

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/common/services/apiService.ts": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  apiService: () => (apiService)
});
/* ESM import */var _common_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./src/common/constants/index.ts");
/* ESM import */var _socketService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/common/services/socketService.ts");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");


/**
 * API Service - Handles HTTP requests to the Agent TARS Server
 *
 * Provides methods for:
 * - Session management (create, get, update, delete)
 * - Query execution (streaming and non-streaming)
 * - Server health checks
 */ class ApiService {
    /**
   * Check server health status
   */ async checkServerHealth() {
        try {
            // Try ping through socket if connected
            if (_socketService__WEBPACK_IMPORTED_MODULE_1__.socketService.isConnected()) {
                const pingSuccessful = await _socketService__WEBPACK_IMPORTED_MODULE_1__.socketService.ping();
                if (pingSuccessful) return true;
            }
            // Fall back to API health endpoint
            const response = await fetch(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_BASE_URL}${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_ENDPOINTS.HEALTH}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                },
                signal: AbortSignal.timeout(3000)
            });
            return response.ok;
        } catch (error) {
            console.error('Error checking server health:', error);
            return false;
        }
    }
    /**
   * Create a new session
   */ async createSession() {
        try {
            const response = await fetch(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_BASE_URL}${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_ENDPOINTS.CREATE_SESSION}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            if (!response.ok) {
                throw new Error(`Failed to create session: ${response.statusText}`);
            }
            const { sessionId } = await response.json();
            return this.getSessionDetails(sessionId);
        } catch (error) {
            console.error('Error creating session:', error);
            throw error;
        }
    }
    /**
   * Get all sessions
   */ async getSessions() {
        try {
            const response = await fetch(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_BASE_URL}${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_ENDPOINTS.SESSIONS}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            });
            if (!response.ok) {
                throw new Error(`Failed to get sessions: ${response.statusText}`);
            }
            const { sessions } = await response.json();
            return sessions;
        } catch (error) {
            console.error('Error getting sessions:', error);
            throw error;
        }
    }
    /**
   * Get details for a specific session
   */ async getSessionDetails(sessionId) {
        try {
            const response = await fetch(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_BASE_URL}${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_ENDPOINTS.SESSION_DETAILS}?sessionId=${sessionId}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                },
                signal: AbortSignal.timeout(5000)
            });
            if (!response.ok) {
                throw new Error(`Failed to get session details: ${response.statusText}`);
            }
            const { session } = await response.json();
            return session;
        } catch (error) {
            console.error(`Error getting session details (${sessionId}):`, error);
            throw error;
        }
    }
    /**
   * Get events for a specific session
   */ async getSessionEvents(sessionId) {
        try {
            const response = await fetch(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_BASE_URL}${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_ENDPOINTS.SESSION_EVENTS}?sessionId=${sessionId}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                },
                signal: AbortSignal.timeout(5000)
            });
            if (!response.ok) {
                throw new Error(`Failed to get session events: ${response.statusText}`);
            }
            const { events } = await response.json();
            return events;
        } catch (error) {
            console.error(`Error getting session events (${sessionId}):`, error);
            throw error;
        }
    }
    /**
   * Get current status of a session
   */ async getSessionStatus(sessionId) {
        try {
            const response = await fetch(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_BASE_URL}${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_ENDPOINTS.SESSION_STATUS}?sessionId=${sessionId}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                },
                signal: AbortSignal.timeout(3000)
            });
            if (!response.ok) {
                throw new Error(`Failed to get session status: ${response.statusText}`);
            }
            const { status } = await response.json();
            return status;
        } catch (error) {
            console.error(`Error getting session status (${sessionId}):`, error);
            throw error;
        }
    }
    /**
   * Update session metadata
   */ async updateSessionMetadata(sessionId, updates) {
        try {
            const response = await fetch(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_BASE_URL}${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_ENDPOINTS.UPDATE_SESSION}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    sessionId,
                    ...updates
                })
            });
            if (!response.ok) {
                throw new Error(`Failed to update session: ${response.statusText}`);
            }
            const { session } = await response.json();
            return session;
        } catch (error) {
            console.error(`Error updating session (${sessionId}):`, error);
            throw error;
        }
    }
    /**
   * Delete a session
   */ async deleteSession(sessionId) {
        try {
            const response = await fetch(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_BASE_URL}${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_ENDPOINTS.DELETE_SESSION}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    sessionId
                })
            });
            if (!response.ok) {
                throw new Error(`Failed to delete session: ${response.statusText}`);
            }
            const { success } = await response.json();
            return success;
        } catch (error) {
            console.error(`Error deleting session (${sessionId}):`, error);
            throw error;
        }
    }
    /**
   * Send a streaming query
   */ async sendStreamingQuery(sessionId, query, onEvent) {
        try {
            var _response_body;
            const response = await fetch(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_BASE_URL}${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_ENDPOINTS.QUERY_STREAM}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    sessionId,
                    query
                })
            });
            if (!response.ok) {
                throw new Error(`Failed to send query: ${response.statusText}`);
            }
            const reader = (_response_body = response.body) === null || _response_body === void 0 ? void 0 : _response_body.getReader();
            if (!reader) {
                throw new Error('ReadableStream not supported');
            }
            const decoder = new TextDecoder();
            let buffer = '';
            while(true){
                const { done, value } = await reader.read();
                if (done) break;
                // Add the new chunk to the buffer
                buffer += decoder.decode(value, {
                    stream: true
                });
                // Process all complete events in the buffer
                let eventEndIndex;
                while((eventEndIndex = buffer.indexOf('\n\n')) !== -1){
                    const eventString = buffer.slice(0, eventEndIndex);
                    // Move buffer to the next event
                    buffer = buffer.slice(eventEndIndex + 2);
                    if (eventString.startsWith('data: ')) {
                        try {
                            const eventData = JSON.parse(eventString.substring(6));
                            onEvent(eventData);
                        } catch (e) {
                            console.error('Error parsing event data:', e);
                        }
                    }
                }
            }
        } catch (error) {
            console.error('Error in streaming query:', error);
            throw error;
        }
    }
    /**
   * Send a non-streaming query
   */ async sendQuery(sessionId, query) {
        try {
            const response = await fetch(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_BASE_URL}${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_ENDPOINTS.QUERY}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    sessionId,
                    query
                })
            });
            if (!response.ok) {
                throw new Error(`Failed to send query: ${response.statusText}`);
            }
            const data = await response.json();
            return data.result;
        } catch (error) {
            console.error('Error sending query:', error);
            throw error;
        }
    }
    /**
   * Abort a running query
   */ async abortQuery(sessionId) {
        try {
            const response = await fetch(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_BASE_URL}${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_ENDPOINTS.ABORT}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    sessionId
                })
            });
            if (!response.ok) {
                throw new Error(`Failed to abort query: ${response.statusText}`);
            }
            const data = await response.json();
            return data.success;
        } catch (error) {
            console.error('Error aborting query:', error);
            throw error;
        }
    }
    /**
   * Generate a summary for a conversation
   */ async generateSummary(sessionId, messages) {
        try {
            const response = await fetch(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_BASE_URL}${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_ENDPOINTS.GENERATE_SUMMARY}`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    sessionId,
                    messages
                })
            });
            if (!response.ok) {
                throw new Error(`Failed to generate summary: ${response.statusText}`);
            }
            const { summary } = await response.json();
            return summary;
        } catch (error) {
            console.error('Error generating summary:', error);
            return 'Untitled Conversation';
        }
    }
    /**
   * Get browser control information for a session
   */ async getBrowserControlInfo(sessionId) {
        try {
            const response = await fetch(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_BASE_URL}/api/sessions/browser-control?sessionId=${sessionId}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                },
                signal: AbortSignal.timeout(3000)
            });
            if (!response.ok) {
                throw new Error(`Failed to get browser control info: ${response.statusText}`);
            }
            return await response.json();
        } catch (error) {
            console.error(`Error getting browser control info (${sessionId}):`, error);
            // 返回默认值作为回退
            return {
                mode: 'default',
                tools: []
            };
        }
    }
    /**
   * Get model information from the server
   * @returns Model provider and model name information
   */ async getModelInfo() {
        try {
            const response = await fetch(`${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_BASE_URL}${_common_constants__WEBPACK_IMPORTED_MODULE_0__.API_ENDPOINTS.MODEL_INFO}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                },
                signal: AbortSignal.timeout(3000)
            });
            if (!response.ok) {
                throw new Error(`Failed to get model info: ${response.statusText}`);
            }
            return await response.json();
        } catch (error) {
            console.error('Error getting model info:', error);
            // Return default values in case of error
            return {
                provider: 'Unknown Provider',
                model: 'Unknown Model'
            };
        }
    }
}
// Export singleton instance
const apiService = new ApiService();

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/common/services/socketService.ts": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  socketService: () => (socketService)
});
/* ESM import */var _swc_helpers_define_property__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("../node_modules/.pnpm/@swc+helpers@0.5.17/node_modules/@swc/helpers/esm/_define_property.js");
/* ESM import */var socket_io_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/socket.io-client@4.8.1/node_modules/socket.io-client/build/esm/index.js");
/* ESM import */var _common_constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/common/constants/index.ts");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");



/**
 * Socket Service - Manages WebSocket connection with server
 */ class SocketService {
    /**
   * Connect to the WebSocket server
   */ connect() {
        var _this_socket;
        if ((_this_socket = this.socket) === null || _this_socket === void 0 ? void 0 : _this_socket.connected) {
            return this.socket;
        }
        this.socket = (0,socket_io_client__WEBPACK_IMPORTED_MODULE_0__.io)(_common_constants__WEBPACK_IMPORTED_MODULE_1__.API_BASE_URL, {
            reconnection: true,
            reconnectionDelay: _common_constants__WEBPACK_IMPORTED_MODULE_1__.CONNECTION_SETTINGS.RECONNECTION_DELAY,
            reconnectionDelayMax: _common_constants__WEBPACK_IMPORTED_MODULE_1__.CONNECTION_SETTINGS.RECONNECTION_DELAY_MAX,
            reconnectionAttempts: _common_constants__WEBPACK_IMPORTED_MODULE_1__.CONNECTION_SETTINGS.MAX_RECONNECT_ATTEMPTS
        });
        // Set up core event handlers
        this.setupEventHandlers();
        return this.socket;
    }
    /**
   * Disconnect from the WebSocket server
   */ disconnect() {
        this.stopHeartbeat();
        if (this.socket) {
            this.socket.disconnect();
            this.socket = null;
        }
        this.missedHeartbeats = 0;
        this.reconnectAttempts = 0;
    }
    /**
   * Check if currently connected to the server
   */ isConnected() {
        var _this_socket;
        return ((_this_socket = this.socket) === null || _this_socket === void 0 ? void 0 : _this_socket.connected) || false;
    }
    /**
   * Join a specific session to receive its events
   */ joinSession(sessionId, onEvent, onStatusUpdate) {
        if (!this.socket) {
            this.connect();
        }
        if (!this.socket) return;
        console.log(`Joining session: ${sessionId}`);
        this.socket.emit(_common_constants__WEBPACK_IMPORTED_MODULE_1__.SOCKET_EVENTS.JOIN_SESSION, sessionId);
        // 清理现有监听器
        this.socket.off(_common_constants__WEBPACK_IMPORTED_MODULE_1__.SOCKET_EVENTS.AGENT_EVENT);
        this.socket.off(_common_constants__WEBPACK_IMPORTED_MODULE_1__.SOCKET_EVENTS.AGENT_STATUS);
        // 设置事件监听器
        this.socket.on(_common_constants__WEBPACK_IMPORTED_MODULE_1__.SOCKET_EVENTS.AGENT_EVENT, (param)=>{
            let { type, data } = param;
            if (data) {
                onEvent(data);
            }
        });
        // 增强状态更新处理
        this.socket.on(_common_constants__WEBPACK_IMPORTED_MODULE_1__.SOCKET_EVENTS.AGENT_STATUS, (status)=>{
            console.log('Received agent status:', status);
            onStatusUpdate(status);
            // 触发全局事件以同步应用中的所有组件
            this.notifyEventHandlers(_common_constants__WEBPACK_IMPORTED_MODULE_1__.SOCKET_EVENTS.AGENT_STATUS, status);
        });
        // 立即请求当前状态
        this.socket.emit('request-status', {
            sessionId
        });
    }
    /**
   * Send a query to the server
   */ sendQuery(params) {
        var _this_socket;
        if (!((_this_socket = this.socket) === null || _this_socket === void 0 ? void 0 : _this_socket.connected)) {
            throw new Error('Socket not connected');
        }
        this.socket.emit(_common_constants__WEBPACK_IMPORTED_MODULE_1__.SOCKET_EVENTS.SEND_QUERY, params);
    }
    /**
   * Abort the current query
   */ abortQuery(params) {
        var _this_socket;
        if (!((_this_socket = this.socket) === null || _this_socket === void 0 ? void 0 : _this_socket.connected)) {
            throw new Error('Socket not connected');
        }
        this.socket.emit(_common_constants__WEBPACK_IMPORTED_MODULE_1__.SOCKET_EVENTS.ABORT_QUERY, params);
    }
    /**
   * Add an event listener
   */ on(event, callback) {
        if (!this.eventHandlers[event]) {
            this.eventHandlers[event] = [];
        }
        this.eventHandlers[event].push(callback);
        // If we already have a socket, add the listener directly
        if (this.socket) {
            this.socket.on(event, callback);
        }
    }
    /**
   * Remove an event listener
   */ off(event, callback) {
        if (this.eventHandlers[event]) {
            this.eventHandlers[event] = this.eventHandlers[event].filter((cb)=>cb !== callback);
        }
        if (this.socket) {
            this.socket.off(event, callback);
        }
    }
    /**
   * Send a ping to check server connectivity
   */ ping() {
        return new Promise((resolve)=>{
            if (!this.socket || !this.socket.connected) {
                resolve(false);
                return;
            }
            const timeout = setTimeout(()=>{
                resolve(false);
            }, 5000);
            this.socket.emit(_common_constants__WEBPACK_IMPORTED_MODULE_1__.SOCKET_EVENTS.PING, ()=>{
                clearTimeout(timeout);
                resolve(true);
            });
        });
    }
    /**
   * Get the socket instance
   */ getSocket() {
        return this.socket;
    }
    /**
   * Set up event handlers for the socket connection
   */ setupEventHandlers() {
        if (!this.socket) return;
        this.socket.on(_common_constants__WEBPACK_IMPORTED_MODULE_1__.SOCKET_EVENTS.CONNECT, this.handleConnect);
        this.socket.on(_common_constants__WEBPACK_IMPORTED_MODULE_1__.SOCKET_EVENTS.DISCONNECT, this.handleDisconnect);
        this.socket.on(_common_constants__WEBPACK_IMPORTED_MODULE_1__.SOCKET_EVENTS.ERROR, this.handleError);
        this.socket.on(_common_constants__WEBPACK_IMPORTED_MODULE_1__.SOCKET_EVENTS.RECONNECT_ATTEMPT, this.handleReconnectAttempt);
        this.socket.on(_common_constants__WEBPACK_IMPORTED_MODULE_1__.SOCKET_EVENTS.RECONNECT_FAILED, this.handleReconnectFailed);
        // Apply any event handlers that were registered before connecting
        Object.entries(this.eventHandlers).forEach((param)=>{
            let [event, handlers] = param;
            handlers.forEach((handler)=>{
                var _this_socket;
                (_this_socket = this.socket) === null || _this_socket === void 0 ? void 0 : _this_socket.on(event, handler);
            });
        });
    }
    /**
   * Start heartbeat monitoring
   */ startHeartbeat() {
        this.stopHeartbeat();
        this.missedHeartbeats = 0;
        this.heartbeatTimer = setInterval(()=>{
            this.sendHeartbeat();
        }, _common_constants__WEBPACK_IMPORTED_MODULE_1__.CONNECTION_SETTINGS.HEARTBEAT_INTERVAL);
    }
    /**
   * Stop heartbeat monitoring
   */ stopHeartbeat() {
        if (this.heartbeatTimer) {
            clearInterval(this.heartbeatTimer);
            this.heartbeatTimer = null;
        }
    }
    /**
   * Send heartbeat to server and track response
   */ sendHeartbeat() {
        if (!this.socket || !this.socket.connected) {
            this.missedHeartbeats++;
            if (this.missedHeartbeats >= _common_constants__WEBPACK_IMPORTED_MODULE_1__.CONNECTION_SETTINGS.MAX_MISSED_HEARTBEATS) {
                var _this_socket;
                console.warn(`Missed ${this.missedHeartbeats} heartbeats, connection may be down`);
                (_this_socket = this.socket) === null || _this_socket === void 0 ? void 0 : _this_socket.disconnect();
            }
            return;
        }
        this.socket.emit(_common_constants__WEBPACK_IMPORTED_MODULE_1__.SOCKET_EVENTS.PING, ()=>{
            this.missedHeartbeats = 0;
        });
        // Increment counter - will be reset when we get a response
        this.missedHeartbeats++;
        if (this.missedHeartbeats >= _common_constants__WEBPACK_IMPORTED_MODULE_1__.CONNECTION_SETTINGS.MAX_MISSED_HEARTBEATS) {
            console.warn(`Missed ${this.missedHeartbeats} heartbeats, connection may be down`);
            this.socket.disconnect();
        }
    }
    /**
   * Notify all registered event handlers for a specific event
   */ notifyEventHandlers(event) {
        for(var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++){
            args[_key - 1] = arguments[_key];
        }
        if (this.eventHandlers[event]) {
            this.eventHandlers[event].forEach((handler)=>{
                try {
                    handler(...args);
                } catch (error) {
                    console.error(`Error in ${event} event handler:`, error);
                }
            });
        }
    }
    constructor(){
        (0,_swc_helpers_define_property__WEBPACK_IMPORTED_MODULE_2__._)(this, "socket", null);
        (0,_swc_helpers_define_property__WEBPACK_IMPORTED_MODULE_2__._)(this, "heartbeatTimer", null);
        (0,_swc_helpers_define_property__WEBPACK_IMPORTED_MODULE_2__._)(this, "missedHeartbeats", 0);
        (0,_swc_helpers_define_property__WEBPACK_IMPORTED_MODULE_2__._)(this, "reconnectAttempts", 0);
        (0,_swc_helpers_define_property__WEBPACK_IMPORTED_MODULE_2__._)(this, "eventHandlers", {});
        /**
   * Handle successful connection
   */ (0,_swc_helpers_define_property__WEBPACK_IMPORTED_MODULE_2__._)(this, "handleConnect", ()=>{
            console.log('Connected to server');
            this.missedHeartbeats = 0;
            this.reconnectAttempts = 0;
            this.startHeartbeat();
            // Notify event handlers
            this.notifyEventHandlers(_common_constants__WEBPACK_IMPORTED_MODULE_1__.SOCKET_EVENTS.CONNECT);
        });
        /**
   * Handle disconnection
   */ (0,_swc_helpers_define_property__WEBPACK_IMPORTED_MODULE_2__._)(this, "handleDisconnect", (reason)=>{
            console.log('Disconnected from server:', reason);
            this.stopHeartbeat();
            // Notify event handlers
            this.notifyEventHandlers(_common_constants__WEBPACK_IMPORTED_MODULE_1__.SOCKET_EVENTS.DISCONNECT, reason);
        });
        /**
   * Handle connection errors
   */ (0,_swc_helpers_define_property__WEBPACK_IMPORTED_MODULE_2__._)(this, "handleError", (error)=>{
            console.error('Socket error:', error);
            // Notify event handlers
            this.notifyEventHandlers(_common_constants__WEBPACK_IMPORTED_MODULE_1__.SOCKET_EVENTS.ERROR, error);
        });
        /**
   * Handle reconnection attempts
   */ (0,_swc_helpers_define_property__WEBPACK_IMPORTED_MODULE_2__._)(this, "handleReconnectAttempt", ()=>{
            this.reconnectAttempts++;
            console.log(`Reconnection attempt ${this.reconnectAttempts}/${_common_constants__WEBPACK_IMPORTED_MODULE_1__.CONNECTION_SETTINGS.MAX_RECONNECT_ATTEMPTS}`);
            // Notify event handlers
            this.notifyEventHandlers(_common_constants__WEBPACK_IMPORTED_MODULE_1__.SOCKET_EVENTS.RECONNECT_ATTEMPT, this.reconnectAttempts);
        });
        /**
   * Handle failed reconnection
   */ (0,_swc_helpers_define_property__WEBPACK_IMPORTED_MODULE_2__._)(this, "handleReconnectFailed", ()=>{
            console.log('Failed to reconnect after multiple attempts');
            // Notify event handlers
            this.notifyEventHandlers(_common_constants__WEBPACK_IMPORTED_MODULE_1__.SOCKET_EVENTS.RECONNECT_FAILED);
        });
    }
}
// Export singleton instance
const socketService = new SocketService();

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/common/state/actions/connectionActions.ts": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  checkConnectionStatusAction: () => (checkConnectionStatusAction),
  initConnectionMonitoringAction: () => (initConnectionMonitoringAction)
});
/* ESM import */var jotai__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("../node_modules/.pnpm/jotai@2.12.5_@types+react@18.3.23_react@18.3.1/node_modules/jotai/esm/vanilla.mjs");
/* ESM import */var _common_constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./src/common/constants/index.ts");
/* ESM import */var _services_apiService__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/common/services/apiService.ts");
/* ESM import */var _services_socketService__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/common/services/socketService.ts");
/* ESM import */var _atoms_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/common/state/atoms/ui.ts");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");





/**
 * Check server connection status
 */ const checkConnectionStatusAction = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)(null, async (get, set)=>{
    const currentStatus = get(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.connectionStatusAtom);
    try {
        const isConnected = await _services_apiService__WEBPACK_IMPORTED_MODULE_1__.apiService.checkServerHealth();
        set(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.connectionStatusAtom, {
            ...currentStatus,
            connected: isConnected,
            lastConnected: isConnected ? Date.now() : currentStatus.lastConnected,
            lastError: isConnected ? null : currentStatus.lastError
        });
        return isConnected;
    } catch (error) {
        set(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.connectionStatusAtom, {
            ...currentStatus,
            connected: false,
            lastError: error instanceof Error ? error.message : String(error)
        });
        return false;
    }
});
/**
 * Initialize connection monitoring
 */ const initConnectionMonitoringAction = (0,jotai__WEBPACK_IMPORTED_MODULE_4__.atom)(null, (get, set)=>{
    // Perform initial check
    set(checkConnectionStatusAction);
    // Set up socket event listeners
    _services_socketService__WEBPACK_IMPORTED_MODULE_2__.socketService.on(_common_constants__WEBPACK_IMPORTED_MODULE_0__.SOCKET_EVENTS.CONNECT, ()=>{
        set(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.connectionStatusAtom, (prev)=>({
                ...prev,
                connected: true,
                lastConnected: Date.now(),
                lastError: null,
                reconnecting: false
            }));
    });
    _services_socketService__WEBPACK_IMPORTED_MODULE_2__.socketService.on(_common_constants__WEBPACK_IMPORTED_MODULE_0__.SOCKET_EVENTS.DISCONNECT, (reason)=>{
        set(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.connectionStatusAtom, (prev)=>({
                ...prev,
                connected: false,
                lastError: `Disconnected: ${reason}`,
                reconnecting: true
            }));
    });
    _services_socketService__WEBPACK_IMPORTED_MODULE_2__.socketService.on(_common_constants__WEBPACK_IMPORTED_MODULE_0__.SOCKET_EVENTS.RECONNECT_ATTEMPT, ()=>{
        set(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.connectionStatusAtom, (prev)=>({
                ...prev,
                reconnecting: true
            }));
    });
    _services_socketService__WEBPACK_IMPORTED_MODULE_2__.socketService.on(_common_constants__WEBPACK_IMPORTED_MODULE_0__.SOCKET_EVENTS.RECONNECT_FAILED, ()=>{
        set(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.connectionStatusAtom, (prev)=>({
                ...prev,
                connected: false,
                reconnecting: false,
                lastError: 'Failed to reconnect after multiple attempts'
            }));
    });
    // Set up periodic health checks
    const intervalId = setInterval(()=>{
        set(checkConnectionStatusAction);
    }, 30000); // Check every 30 seconds
    // Return cleanup function
    return ()=>{
        clearInterval(intervalId);
        _services_socketService__WEBPACK_IMPORTED_MODULE_2__.socketService.off(_common_constants__WEBPACK_IMPORTED_MODULE_0__.SOCKET_EVENTS.CONNECT, ()=>{});
        _services_socketService__WEBPACK_IMPORTED_MODULE_2__.socketService.off(_common_constants__WEBPACK_IMPORTED_MODULE_0__.SOCKET_EVENTS.DISCONNECT, ()=>{});
        _services_socketService__WEBPACK_IMPORTED_MODULE_2__.socketService.off(_common_constants__WEBPACK_IMPORTED_MODULE_0__.SOCKET_EVENTS.RECONNECT_ATTEMPT, ()=>{});
        _services_socketService__WEBPACK_IMPORTED_MODULE_2__.socketService.off(_common_constants__WEBPACK_IMPORTED_MODULE_0__.SOCKET_EVENTS.RECONNECT_FAILED, ()=>{});
    };
});

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/common/state/actions/eventProcessor.ts": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  processEventAction: () => (processEventAction),
  updateProcessingStatusAction: () => (updateProcessingStatusAction)
});
/* ESM import */var jotai__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("../node_modules/.pnpm/jotai@2.12.5_@types+react@18.3.23_react@18.3.1/node_modules/jotai/esm/vanilla.mjs");
/* ESM import */var uuid__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("../node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/v4.js");
/* ESM import */var _common_utils_formatters__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./src/common/utils/formatters.ts");
/* ESM import */var _atoms_message__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/common/state/atoms/message.ts");
/* ESM import */var _atoms_tool__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/common/state/atoms/tool.ts");
/* ESM import */var _atoms_ui__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/common/state/atoms/ui.ts");
/* ESM import */var _atoms_plan__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/common/state/atoms/plan.ts");
/* ESM import */var _atoms_replay__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/common/state/atoms/replay.ts");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");
/* eslint-disable @typescript-eslint/no-explicit-any */ 







// 存储工具调用参数的映射表 (不是 Atom，是内部缓存)
const toolCallArgumentsMap = new Map();
/**
 * Process a single event and update the appropriate state atoms
 */ const processEventAction = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.atom)(null, (get, set, params)=>{
    const { sessionId, event } = params;
    const replayState = get(_atoms_replay__WEBPACK_IMPORTED_MODULE_5__.replayStateAtom);
    const isReplayMode = replayState.isActive;
    switch(event.type){
        case 'user_message':
            handleUserMessage(set, sessionId, event);
            break;
        case 'assistant_message':
            handleAssistantMessage(get, set, sessionId, event);
            break;
        case 'assistant_streaming_message':
            if (!isReplayMode) {
                handleStreamingMessage(get, set, sessionId, event);
            }
            break;
        case 'assistant_thinking_message':
        case 'assistant_streaming_thinking_message':
            handleThinkingMessage(get, set, sessionId, event);
            break;
        case 'tool_call':
            handleToolCall(set, sessionId, event);
            break;
        case 'tool_result':
            handleToolResult(set, sessionId, event);
            break;
        case 'system':
            handleSystemMessage(set, sessionId, event);
            break;
        case 'environment_input':
            handleEnvironmentInput(get, set, sessionId, event);
            break;
        case 'agent_run_start':
            set(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.isProcessingAtom, true);
            break;
        case 'agent_run_end':
            set(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.isProcessingAtom, false);
            break;
        case 'plan_start':
            handlePlanStart(set, sessionId, event);
            break;
        case 'plan_update':
            handlePlanUpdate(set, sessionId, event);
            break;
        case 'plan_finish':
            handlePlanFinish(set, sessionId, event);
            break;
        case 'final_answer':
            handleFinalAnswer(get, set, sessionId, event);
            break;
        case 'final_answer_streaming':
            if (!isReplayMode) {
                handleFinalAnswerStreaming(get, set, sessionId, event);
            }
            break;
    }
});
const updateProcessingStatusAction = (0,jotai__WEBPACK_IMPORTED_MODULE_6__.atom)(null, (get, set, status)=>{
    // Update processing state
    set(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.isProcessingAtom, !!status.isProcessing);
});
/**
 * Handle user message event
 */ function handleUserMessage(set, sessionId, event) {
    const userMessage = {
        id: event.id,
        role: 'user',
        content: event.content,
        timestamp: event.timestamp
    };
    set(_atoms_message__WEBPACK_IMPORTED_MODULE_1__.messagesAtom, (prev)=>{
        const sessionMessages = prev[sessionId] || [];
        return {
            ...prev,
            [sessionId]: [
                ...sessionMessages,
                userMessage
            ]
        };
    });
    // Check for images in user message and set active panel content if found
    if (Array.isArray(event.content)) {
        const images = event.content.filter((part)=>part.type === 'image_url');
        if (images.length > 0) {
            set(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.activePanelContentAtom, {
                type: 'image',
                source: images[0].image_url.url,
                title: 'User Upload',
                timestamp: Date.now()
            });
        }
    }
}
/**
 * Handle assistant message event (complete message)
 */ function handleAssistantMessage(get, set, sessionId, event) {
    // 获取消息ID
    const messageId = event.messageId;
    set(_atoms_message__WEBPACK_IMPORTED_MODULE_1__.messagesAtom, (prev)=>{
        const sessionMessages = prev[sessionId] || [];
        // 检查是否已存在相同messageId的消息
        if (messageId) {
            const existingMessageIndex = sessionMessages.findIndex((msg)=>msg.messageId === messageId);
            // 如果找到了现有消息，更新它而不是添加新消息
            if (existingMessageIndex !== -1) {
                const updatedMessages = [
                    ...sessionMessages
                ];
                updatedMessages[existingMessageIndex] = {
                    ...updatedMessages[existingMessageIndex],
                    content: event.content,
                    timestamp: event.timestamp,
                    toolCalls: event.toolCalls,
                    finishReason: event.finishReason,
                    isStreaming: false
                };
                return {
                    ...prev,
                    [sessionId]: updatedMessages
                };
            }
        }
        // 没有找到现有消息，添加新消息
        return {
            ...prev,
            [sessionId]: [
                ...sessionMessages,
                {
                    id: event.id,
                    role: 'assistant',
                    content: event.content,
                    timestamp: event.timestamp,
                    toolCalls: event.toolCalls,
                    finishReason: event.finishReason,
                    messageId: messageId
                }
            ]
        };
    });
    if (event.finishReason !== 'tool_calls') {
        // 检查是否需要关联最近的环境输入
        const currentMessages = get(_atoms_message__WEBPACK_IMPORTED_MODULE_1__.messagesAtom)[sessionId] || [];
        // 从后往前查找最近的环境输入
        for(let i = currentMessages.length - 1; i >= 0; i--){
            const msg = currentMessages[i];
            if (msg.role === 'environment' && Array.isArray(msg.content)) {
                const imageContent = msg.content.find((item)=>item.type === 'image_url' && item.image_url && item.image_url.url);
                if (imageContent) {
                    set(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.activePanelContentAtom, {
                        type: 'image',
                        source: msg.content,
                        title: msg.description || 'Final Browser State',
                        timestamp: msg.timestamp,
                        environmentId: msg.id
                    });
                    break;
                }
            }
        }
    }
    set(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.isProcessingAtom, false);
}
/**
 * Handle streaming message event (incremental content)
 */ function handleStreamingMessage(get, set, sessionId, event) {
    set(_atoms_message__WEBPACK_IMPORTED_MODULE_1__.messagesAtom, (prev)=>{
        const sessionMessages = prev[sessionId] || [];
        const messageIdToFind = event.messageId;
        let existingMessageIndex = -1;
        // 优先按messageId查找
        if (messageIdToFind) {
            existingMessageIndex = sessionMessages.findIndex((msg)=>msg.messageId === messageIdToFind);
        } else if (sessionMessages.length > 0) {
            const lastMessageIndex = sessionMessages.length - 1;
            const lastMessage = sessionMessages[lastMessageIndex];
            if (lastMessage && lastMessage.isStreaming) {
                existingMessageIndex = lastMessageIndex;
            }
        }
        // 更新现有消息
        if (existingMessageIndex !== -1) {
            const existingMessage = sessionMessages[existingMessageIndex];
            const updatedMessage = {
                ...existingMessage,
                content: typeof existingMessage.content === 'string' ? existingMessage.content + event.content : event.content,
                isStreaming: !event.isComplete,
                toolCalls: event.toolCalls || existingMessage.toolCalls
            };
            return {
                ...prev,
                [sessionId]: [
                    ...sessionMessages.slice(0, existingMessageIndex),
                    updatedMessage,
                    ...sessionMessages.slice(existingMessageIndex + 1)
                ]
            };
        }
        // 创建新消息
        const newMessage = {
            id: event.id || (0,uuid__WEBPACK_IMPORTED_MODULE_7__["default"])(),
            role: 'assistant',
            content: event.content,
            timestamp: event.timestamp,
            isStreaming: !event.isComplete,
            toolCalls: event.toolCalls,
            messageId: event.messageId
        };
        return {
            ...prev,
            [sessionId]: [
                ...sessionMessages,
                newMessage
            ]
        };
    });
    if (event.isComplete) {
        set(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.isProcessingAtom, false);
    }
}
/**
 * Handle thinking message event
 */ function handleThinkingMessage(get, set, sessionId, event) {
    set(_atoms_message__WEBPACK_IMPORTED_MODULE_1__.messagesAtom, (prev)=>{
        const sessionMessages = prev[sessionId] || [];
        const lastAssistantIndex = [
            ...sessionMessages
        ].reverse().findIndex((m)=>m.role === 'assistant');
        if (lastAssistantIndex !== -1) {
            const actualIndex = sessionMessages.length - 1 - lastAssistantIndex;
            const message = sessionMessages[actualIndex];
            return {
                ...prev,
                [sessionId]: [
                    ...sessionMessages.slice(0, actualIndex),
                    {
                        ...message,
                        thinking: event.content
                    },
                    ...sessionMessages.slice(actualIndex + 1)
                ]
            };
        }
        return prev;
    });
}
/**
 * Handle tool call event - store arguments for later use
 */ function handleToolCall(set, sessionId, event) {
    // 保存工具调用的参数信息以便后续使用
    if (event.toolCallId && event.arguments) {
        toolCallArgumentsMap.set(event.toolCallId, event.arguments);
    }
}
function handleToolResult(set, sessionId, event) {
    // 获取之前存储的参数信息
    const args = toolCallArgumentsMap.get(event.toolCallId);
    const result = {
        id: (0,uuid__WEBPACK_IMPORTED_MODULE_7__["default"])(),
        toolCallId: event.toolCallId,
        name: event.name,
        content: event.content,
        timestamp: event.timestamp,
        error: event.error,
        type: (0,_common_utils_formatters__WEBPACK_IMPORTED_MODULE_0__.determineToolType)(event.name, event.content),
        arguments: args
    };
    // 1. 先更新消息atom和工具结果 - 确保chat UI能立即响应
    set(_atoms_message__WEBPACK_IMPORTED_MODULE_1__.messagesAtom, (prev)=>{
        const sessionMessages = prev[sessionId] || [];
        // 找到对应的消息并添加toolResults
        const messageIndex = [
            ...sessionMessages
        ].reverse().findIndex((m)=>{
            var _m_toolCalls;
            return (_m_toolCalls = m.toolCalls) === null || _m_toolCalls === void 0 ? void 0 : _m_toolCalls.some((tc)=>tc.id === result.toolCallId);
        });
        if (messageIndex !== -1) {
            const actualIndex = sessionMessages.length - 1 - messageIndex;
            const message = sessionMessages[actualIndex];
            const toolResults = message.toolResults || [];
            const updatedMessage = {
                ...message,
                toolResults: [
                    ...toolResults,
                    result
                ]
            };
            return {
                ...prev,
                [sessionId]: [
                    ...sessionMessages.slice(0, actualIndex),
                    updatedMessage,
                    ...sessionMessages.slice(actualIndex + 1)
                ]
            };
        }
        return prev;
    });
    // 2. 同时更新工具结果atom
    set(_atoms_tool__WEBPACK_IMPORTED_MODULE_2__.toolResultsAtom, (prev)=>{
        const sessionResults = prev[sessionId] || [];
        return {
            ...prev,
            [sessionId]: [
                ...sessionResults,
                result
            ]
        };
    });
    // 3. 最后更新workspace面板内容 - 保持时序一致
    if (result.type === 'browser_vision_control') {
        set(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.activePanelContentAtom, (prev)=>{
            if (prev && prev.type === 'image' && prev.environmentId) {
                // 在这里添加环境ID到已处理列表，避免重复渲染
                const environmentId = prev.environmentId;
                return {
                    ...prev,
                    type: 'browser_vision_control',
                    source: event.content,
                    title: prev.title,
                    timestamp: event.timestamp,
                    toolCallId: event.toolCallId,
                    error: event.error,
                    arguments: args,
                    originalContent: prev.source,
                    environmentId: environmentId,
                    processedEnvironmentIds: [
                        environmentId
                    ]
                };
            } else {
                return {
                    type: result.type,
                    source: result.content,
                    title: result.name,
                    timestamp: result.timestamp,
                    toolCallId: result.toolCallId,
                    error: result.error,
                    arguments: args
                };
            }
        });
    } else {
        set(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.activePanelContentAtom, {
            type: result.type,
            source: result.content,
            title: result.name,
            timestamp: result.timestamp,
            toolCallId: result.toolCallId,
            error: result.error,
            arguments: args
        });
    }
    // Store in the map for future reference
    _atoms_tool__WEBPACK_IMPORTED_MODULE_2__.toolCallResultMap.set(result.toolCallId, result);
}
/**
 * Handle system message event
 */ function handleSystemMessage(set, sessionId, event) {
    const systemMessage = {
        id: (0,uuid__WEBPACK_IMPORTED_MODULE_7__["default"])(),
        role: 'system',
        content: event.message,
        timestamp: event.timestamp || Date.now()
    };
    set(_atoms_message__WEBPACK_IMPORTED_MODULE_1__.messagesAtom, (prev)=>{
        const sessionMessages = prev[sessionId] || [];
        return {
            ...prev,
            [sessionId]: [
                ...sessionMessages,
                systemMessage
            ]
        };
    });
}
/**
 * Handle environment input event
 * Adds it to messages but doesn't set it as active panel content
 */ function handleEnvironmentInput(get, set, sessionId, event) {
    const environmentMessage = {
        id: event.id,
        role: 'environment',
        content: event.content,
        timestamp: event.timestamp,
        description: event.description || 'Environment Input'
    };
    set(_atoms_message__WEBPACK_IMPORTED_MODULE_1__.messagesAtom, (prev)=>{
        const sessionMessages = prev[sessionId] || [];
        return {
            ...prev,
            [sessionId]: [
                ...sessionMessages,
                environmentMessage
            ]
        };
    });
    // 检查是否包含图片内容并直接设置为活动面板内容
    if (Array.isArray(event.content)) {
        const imageContent = event.content.find((item)=>item.type === 'image_url' && item.image_url && item.image_url.url);
        if (imageContent && imageContent.image_url) {
            // 获取当前面板状态
            const currentPanel = get(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.activePanelContentAtom);
            // 只有当前面板是 browser_vision_control 类型时才更新
            if (currentPanel && currentPanel.type === 'browser_vision_control') {
                set(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.activePanelContentAtom, {
                    ...currentPanel,
                    type: 'browser_vision_control',
                    title: `${currentPanel.title} \xb7 Screenshot Update`,
                    timestamp: event.timestamp,
                    originalContent: event.content,
                    environmentId: event.id
                });
            }
        // 不是 browser_vision_control 类型时完全跳过 set 操作
        // 这样避免了 Browser Screenshot 被重复渲染
        }
    }
}
/**
 * Handle plan start event
 */ function handlePlanStart(set, sessionId, event) {
    set(_atoms_plan__WEBPACK_IMPORTED_MODULE_4__.plansAtom, (prev)=>({
            ...prev,
            [sessionId]: {
                steps: [],
                isComplete: false,
                summary: null,
                hasGeneratedPlan: true,
                keyframes: []
            }
        }));
}
/**
 * Handle plan update event
 */ function handlePlanUpdate(set, sessionId, event) {
    console.log('Plan update event:', event);
    set(_atoms_plan__WEBPACK_IMPORTED_MODULE_4__.plansAtom, (prev)=>{
        const currentPlan = prev[sessionId] || {
            steps: [],
            isComplete: false,
            summary: null,
            hasGeneratedPlan: true,
            keyframes: []
        };
        // Create a new keyframe for this update
        const newKeyframe = {
            timestamp: event.timestamp || Date.now(),
            steps: event.steps,
            isComplete: false,
            summary: null
        };
        // Add the keyframe to the history
        const keyframes = [
            ...currentPlan.keyframes || [],
            newKeyframe
        ];
        return {
            ...prev,
            [sessionId]: {
                ...currentPlan,
                steps: event.steps,
                hasGeneratedPlan: true,
                keyframes
            }
        };
    });
}
/**
 * Handle plan finish event
 */ function handlePlanFinish(set, sessionId, event) {
    console.log('Plan finish event:', event);
    set(_atoms_plan__WEBPACK_IMPORTED_MODULE_4__.plansAtom, (prev)=>{
        const currentPlan = prev[sessionId] || {
            steps: [],
            isComplete: false,
            summary: null,
            hasGeneratedPlan: true,
            keyframes: []
        };
        // Create a final keyframe for the completed plan
        const finalKeyframe = {
            timestamp: event.timestamp || Date.now(),
            steps: currentPlan.steps,
            isComplete: true,
            summary: event.summary
        };
        // Add the final keyframe to the history
        const keyframes = [
            ...currentPlan.keyframes || [],
            finalKeyframe
        ];
        return {
            ...prev,
            [sessionId]: {
                ...currentPlan,
                isComplete: true,
                summary: event.summary,
                keyframes
            }
        };
    });
}
/**
 * Handle final answer event (complete answer/report)
 */ function handleFinalAnswer(get, set, sessionId, event) {
    const messageId = event.messageId || `final-answer-${(0,uuid__WEBPACK_IMPORTED_MODULE_7__["default"])()}`;
    // 始终将内容当作研究报告处理，移除JSON_DATA状态
    // 设置活动面板内容为研究报告
    set(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.activePanelContentAtom, {
        type: 'research_report',
        source: event.content,
        title: event.title || 'Research Report',
        timestamp: event.timestamp,
        isDeepResearch: true,
        messageId
    });
    // 添加消息到聊天引用报告
    const finalAnswerMessage = {
        id: event.id || (0,uuid__WEBPACK_IMPORTED_MODULE_7__["default"])(),
        role: 'final_answer',
        content: event.content,
        timestamp: event.timestamp,
        messageId,
        isDeepResearch: true,
        title: event.title || 'Research Report'
    };
    set(_atoms_message__WEBPACK_IMPORTED_MODULE_1__.messagesAtom, (prev)=>{
        const sessionMessages = prev[sessionId] || [];
        return {
            ...prev,
            [sessionId]: [
                ...sessionMessages,
                finalAnswerMessage
            ]
        };
    });
    // 标记处理完成
    set(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.isProcessingAtom, false);
}
function handleFinalAnswerStreaming(get, set, sessionId, event) {
    const messageId = event.messageId || `final-answer-${(0,uuid__WEBPACK_IMPORTED_MODULE_7__["default"])()}`;
    // 从当前消息列表中查找已有的相同 messageId 的消息
    const messages = get(_atoms_message__WEBPACK_IMPORTED_MODULE_1__.messagesAtom)[sessionId] || [];
    const existingMessageIndex = messages.findIndex((msg)=>msg.messageId === messageId);
    // 当处理一系列流式事件时，将内容追加到现有消息，或创建新消息
    set(_atoms_message__WEBPACK_IMPORTED_MODULE_1__.messagesAtom, (prev)=>{
        const sessionMessages = prev[sessionId] || [];
        // 如果找到现有消息，则更新它
        if (existingMessageIndex >= 0) {
            const existingMessage = sessionMessages[existingMessageIndex];
            const updatedMessage = {
                ...existingMessage,
                content: typeof existingMessage.content === 'string' ? existingMessage.content + event.content : event.content,
                isStreaming: !event.isComplete,
                timestamp: event.timestamp
            };
            return {
                ...prev,
                [sessionId]: [
                    ...sessionMessages.slice(0, existingMessageIndex),
                    updatedMessage,
                    ...sessionMessages.slice(existingMessageIndex + 1)
                ]
            };
        }
        // 否则创建新消息
        const newMessage = {
            id: event.id || (0,uuid__WEBPACK_IMPORTED_MODULE_7__["default"])(),
            role: 'final_answer',
            content: event.content,
            timestamp: event.timestamp,
            messageId,
            isDeepResearch: true,
            isStreaming: !event.isComplete,
            title: event.title || 'Research Report'
        };
        return {
            ...prev,
            [sessionId]: [
                ...sessionMessages,
                newMessage
            ]
        };
    });
    // 更新活动面板内容 - 同步面板与消息状态
    set(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.activePanelContentAtom, (prev)=>{
        // 如果是新流或不同的messageId，重新开始
        if (!prev || prev.type !== 'research_report' || prev.messageId !== messageId) {
            return {
                role: 'assistant',
                type: 'research_report',
                source: event.content,
                title: event.title || 'Research Report (Generating...)',
                timestamp: event.timestamp,
                isDeepResearch: true,
                messageId,
                isStreaming: !event.isComplete
            };
        }
        // 否则追加到现有内容
        return {
            ...prev,
            source: prev.source + event.content,
            isStreaming: !event.isComplete,
            timestamp: event.timestamp,
            title: event.title || prev.title
        };
    });
    // 如果这是第一个数据块，也添加一条消息到聊天
    const prevActivePanelContent = get(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.activePanelContentAtom);
    if (!prevActivePanelContent || prevActivePanelContent.messageId !== messageId) {
        const initialMessage = {
            id: event.id || (0,uuid__WEBPACK_IMPORTED_MODULE_7__["default"])(),
            role: 'final_answer',
            content: event.content,
            timestamp: event.timestamp,
            messageId,
            isDeepResearch: true,
            isStreaming: !event.isComplete,
            title: event.title || 'Research Report'
        };
        set(_atoms_message__WEBPACK_IMPORTED_MODULE_1__.messagesAtom, (prev)=>{
            const sessionMessages = prev[sessionId] || [];
            return {
                ...prev,
                [sessionId]: [
                    ...sessionMessages,
                    initialMessage
                ]
            };
        });
    } else if (event.isComplete) {
        // 当流式生成完成时，更新消息的完整内容
        const fullContent = get(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.activePanelContentAtom).source;
        set(_atoms_message__WEBPACK_IMPORTED_MODULE_1__.messagesAtom, (prev)=>{
            const sessionMessages = prev[sessionId] || [];
            const messageIndex = sessionMessages.findIndex((msg)=>msg.messageId === messageId);
            if (messageIndex >= 0) {
                const updatedMessages = [
                    ...sessionMessages
                ];
                updatedMessages[messageIndex] = {
                    ...updatedMessages[messageIndex],
                    content: fullContent,
                    isStreaming: false,
                    title: event.title || updatedMessages[messageIndex].title || 'Research Report'
                };
                return {
                    ...prev,
                    [sessionId]: updatedMessages
                };
            }
            return prev;
        });
    }
    // 如果这是最后一个数据块，标记处理完成
    if (event.isComplete) {
        set(_atoms_ui__WEBPACK_IMPORTED_MODULE_3__.isProcessingAtom, false);
    }
}

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/common/state/actions/modelInfoAction.ts": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  fetchModelInfoAction: () => (fetchModelInfoAction),
  setModelInfoAction: () => (setModelInfoAction)
});
/* ESM import */var jotai__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("../node_modules/.pnpm/jotai@2.12.5_@types+react@18.3.23_react@18.3.1/node_modules/jotai/esm/vanilla.mjs");
/* ESM import */var _services_apiService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./src/common/services/apiService.ts");
/* ESM import */var _atoms_ui__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/common/state/atoms/ui.ts");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");



/**
 * Action to fetch and update model information
 */ const fetchModelInfoAction = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)(null, async (get, set)=>{
    try {
        const info = await _services_apiService__WEBPACK_IMPORTED_MODULE_0__.apiService.getModelInfo();
        set(_atoms_ui__WEBPACK_IMPORTED_MODULE_1__.modelInfoAtom, info);
        return info;
    } catch (error) {
        console.error('Failed to fetch model info:', error);
        return {
            provider: 'Unknown',
            model: 'Unknown'
        };
    }
});
/**
 * Action to directly set model information (used in replay mode)
 */ const setModelInfoAction = (0,jotai__WEBPACK_IMPORTED_MODULE_2__.atom)(null, (get, set, modelInfo)=>{
    set(_atoms_ui__WEBPACK_IMPORTED_MODULE_1__.modelInfoAtom, modelInfo);
});

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/common/state/actions/sessionActions.ts": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  abortQueryAction: () => (abortQueryAction),
  checkSessionStatusAction: () => (checkSessionStatusAction),
  createSessionAction: () => (createSessionAction),
  deleteSessionAction: () => (deleteSessionAction),
  loadSessionsAction: () => (loadSessionsAction),
  sendMessageAction: () => (sendMessageAction),
  setActiveSessionAction: () => (setActiveSessionAction),
  updateSessionAction: () => (updateSessionAction)
});
/* ESM import */var jotai__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("../node_modules/.pnpm/jotai@2.12.5_@types+react@18.3.23_react@18.3.1/node_modules/jotai/esm/vanilla.mjs");
/* ESM import */var uuid__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("../node_modules/.pnpm/uuid@9.0.1/node_modules/uuid/dist/esm-browser/v4.js");
/* ESM import */var _services_apiService__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("./src/common/services/apiService.ts");
/* ESM import */var _atoms_session__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("./src/common/state/atoms/session.ts");
/* ESM import */var _atoms_message__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/common/state/atoms/message.ts");
/* ESM import */var _atoms_tool__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/common/state/atoms/tool.ts");
/* ESM import */var _atoms_ui__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/common/state/atoms/ui.ts");
/* ESM import */var _eventProcessor__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/common/state/actions/eventProcessor.ts");
/* ESM import */var _atoms_replay__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/common/state/atoms/replay.ts");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");










/**
 * Load all available sessions
 */ const loadSessionsAction = (0,jotai__WEBPACK_IMPORTED_MODULE_7__.atom)(null, async (get, set)=>{
    try {
        const loadedSessions = await _services_apiService__WEBPACK_IMPORTED_MODULE_0__.apiService.getSessions();
        set(_atoms_session__WEBPACK_IMPORTED_MODULE_1__.sessionsAtom, loadedSessions);
    } catch (error) {
        console.error('Failed to load sessions:', error);
        throw error;
    }
});
/**
 * Create a new session
 */ const createSessionAction = (0,jotai__WEBPACK_IMPORTED_MODULE_7__.atom)(null, async (get, set)=>{
    try {
        const newSession = await _services_apiService__WEBPACK_IMPORTED_MODULE_0__.apiService.createSession();
        // Add to sessions list
        set(_atoms_session__WEBPACK_IMPORTED_MODULE_1__.sessionsAtom, (prev)=>[
                newSession,
                ...prev
            ]);
        // Initialize session data
        set(_atoms_message__WEBPACK_IMPORTED_MODULE_2__.messagesAtom, (prev)=>({
                ...prev,
                [newSession.id]: []
            }));
        set(_atoms_tool__WEBPACK_IMPORTED_MODULE_3__.toolResultsAtom, (prev)=>({
                ...prev,
                [newSession.id]: []
            }));
        // Clear workspace panel content to show empty state
        set(_atoms_ui__WEBPACK_IMPORTED_MODULE_4__.activePanelContentAtom, null);
        // Set as active session
        set(_atoms_session__WEBPACK_IMPORTED_MODULE_1__.activeSessionIdAtom, newSession.id);
        return newSession.id;
    } catch (error) {
        console.error('Failed to create session:', error);
        throw error;
    }
});
/**
 * Set the active session
 * 简化加载逻辑，移除恢复会话的复杂性
 */ const setActiveSessionAction = (0,jotai__WEBPACK_IMPORTED_MODULE_7__.atom)(null, async (get, set, sessionId)=>{
    try {
        // 检查是否已经是活动会话
        const currentActiveSessionId = get(_atoms_session__WEBPACK_IMPORTED_MODULE_1__.activeSessionIdAtom);
        if (currentActiveSessionId === sessionId) {
            console.log(`Session ${sessionId} is already active, skipping load`);
            return;
        }
        // 检查回放状态并退出回放模式（除非是同一会话）
        const replayState = get(_atoms_replay__WEBPACK_IMPORTED_MODULE_6__.replayStateAtom);
        if (replayState.isActive) {
            console.log('Exiting replay mode due to session change');
            set(_atoms_replay__WEBPACK_IMPORTED_MODULE_6__.replayStateAtom, {
                isActive: false,
                isPaused: true,
                events: [],
                currentEventIndex: -1,
                startTimestamp: null,
                endTimestamp: null,
                playbackSpeed: 1,
                visibleTimeWindow: null,
                processedEvents: {}
            });
        }
        // 直接获取会话详情，不需要检查 active 状态
        const sessionDetails = await _services_apiService__WEBPACK_IMPORTED_MODULE_0__.apiService.getSessionDetails(sessionId);
        // 获取当前会话状态以更新 isProcessing 状态
        try {
            const status = await _services_apiService__WEBPACK_IMPORTED_MODULE_0__.apiService.getSessionStatus(sessionId);
            set(_atoms_ui__WEBPACK_IMPORTED_MODULE_4__.isProcessingAtom, status.isProcessing);
        } catch (error) {
            console.warn('Failed to get session status:', error);
            set(_atoms_ui__WEBPACK_IMPORTED_MODULE_4__.isProcessingAtom, false);
        }
        // 清理工具调用映射缓存
        _atoms_tool__WEBPACK_IMPORTED_MODULE_3__.toolCallResultMap.clear();
        // 只有在消息不存在时才加载会话事件
        const messages = get(_atoms_message__WEBPACK_IMPORTED_MODULE_2__.messagesAtom);
        if (!messages[sessionId] || messages[sessionId].length === 0) {
            console.log(`Loading events for session ${sessionId}`);
            const events = await _services_apiService__WEBPACK_IMPORTED_MODULE_0__.apiService.getSessionEvents(sessionId);
            // 对流式事件进行预处理，确保正确的连续性
            const processedEvents = preprocessStreamingEvents(events);
            // 处理每个事件以构建消息和工具结果
            for (const event of processedEvents){
                set(_eventProcessor__WEBPACK_IMPORTED_MODULE_5__.processEventAction, {
                    sessionId,
                    event
                });
            }
        } else {
            console.log(`Session ${sessionId} already has messages, skipping event loading`);
        }
        // 设置为活动会话
        set(_atoms_session__WEBPACK_IMPORTED_MODULE_1__.activeSessionIdAtom, sessionId);
    } catch (error) {
        console.error('Failed to set active session:', error);
        set(_atoms_ui__WEBPACK_IMPORTED_MODULE_4__.connectionStatusAtom, (prev)=>({
                ...prev,
                connected: false,
                lastError: error instanceof Error ? error.message : String(error)
            }));
        throw error;
    }
});
/**
 * Update session metadata
 */ const updateSessionAction = (0,jotai__WEBPACK_IMPORTED_MODULE_7__.atom)(null, async (get, set, params)=>{
    const { sessionId, updates } = params;
    try {
        const updatedSession = await _services_apiService__WEBPACK_IMPORTED_MODULE_0__.apiService.updateSessionMetadata(sessionId, updates);
        // Update session in the list
        set(_atoms_session__WEBPACK_IMPORTED_MODULE_1__.sessionsAtom, (prev)=>prev.map((session)=>session.id === sessionId ? {
                    ...session,
                    ...updatedSession
                } : session));
        return updatedSession;
    } catch (error) {
        console.error('Failed to update session:', error);
        throw error;
    }
});
/**
 * 预处理事件，确保流式事件按正确顺序处理
 */ function preprocessStreamingEvents(events) {
    // 对流式消息进行整理
    const messageStreams = {};
    // 收集所有流式事件，按messageId分组
    events.forEach((event)=>{
        if (event.type === 'final_answer_streaming' && 'messageId' in event) {
            const messageId = event.messageId;
            if (!messageStreams[messageId]) {
                messageStreams[messageId] = [];
            }
            messageStreams[messageId].push(event);
        }
    });
    // 返回预处理后的事件，确保流式事件以正确顺序处理
    return events;
}
/**
 * Delete a session
 */ const deleteSessionAction = (0,jotai__WEBPACK_IMPORTED_MODULE_7__.atom)(null, async (get, set, sessionId)=>{
    try {
        const success = await _services_apiService__WEBPACK_IMPORTED_MODULE_0__.apiService.deleteSession(sessionId);
        const activeSessionId = get(_atoms_session__WEBPACK_IMPORTED_MODULE_1__.activeSessionIdAtom);
        if (success) {
            // Remove from sessions list
            set(_atoms_session__WEBPACK_IMPORTED_MODULE_1__.sessionsAtom, (prev)=>prev.filter((session)=>session.id !== sessionId));
            // Clear active session if it was deleted
            if (activeSessionId === sessionId) {
                set(_atoms_session__WEBPACK_IMPORTED_MODULE_1__.activeSessionIdAtom, null);
            }
            // Clear session data
            set(_atoms_message__WEBPACK_IMPORTED_MODULE_2__.messagesAtom, (prev)=>{
                const newMessages = {
                    ...prev
                };
                delete newMessages[sessionId];
                return newMessages;
            });
            set(_atoms_tool__WEBPACK_IMPORTED_MODULE_3__.toolResultsAtom, (prev)=>{
                const newResults = {
                    ...prev
                };
                delete newResults[sessionId];
                return newResults;
            });
        }
        return success;
    } catch (error) {
        console.error('Failed to delete session:', error);
        throw error;
    }
});
/**
 * Send a message in the current session
 */ const sendMessageAction = (0,jotai__WEBPACK_IMPORTED_MODULE_7__.atom)(null, async (get, set, content)=>{
    const activeSessionId = get(_atoms_session__WEBPACK_IMPORTED_MODULE_1__.activeSessionIdAtom);
    if (!activeSessionId) {
        throw new Error('No active session');
    }
    // 明确设置处理状态
    set(_atoms_ui__WEBPACK_IMPORTED_MODULE_4__.isProcessingAtom, true);
    // 添加用户消息到状态
    const userMessage = {
        id: (0,uuid__WEBPACK_IMPORTED_MODULE_8__["default"])(),
        role: 'user',
        content,
        timestamp: Date.now()
    };
    set(_atoms_message__WEBPACK_IMPORTED_MODULE_2__.messagesAtom, (prev)=>{
        const sessionMessages = prev[activeSessionId] || [];
        return {
            ...prev,
            [activeSessionId]: [
                ...sessionMessages,
                userMessage
            ]
        };
    });
    // 立即更新会话名称，使用用户查询作为 Summary
    // 这样即使后续更新失败也至少有一个基本的名称
    try {
        // 检查是否是第一条消息，如果是则直接用查询内容作为会话名称
        const messages = get(_atoms_message__WEBPACK_IMPORTED_MODULE_2__.messagesAtom)[activeSessionId] || [];
        if (messages.length <= 2) {
            // 算上刚刚添加的用户消息
            let summary = '';
            if (typeof content === 'string') {
                summary = content.length > 50 ? content.substring(0, 47) + '...' : content;
            } else {
                // 从多模态内容中提取文本部分
                const textPart = content.find((part)=>part.type === 'text');
                if (textPart && 'text' in textPart) {
                    summary = textPart.text.length > 50 ? textPart.text.substring(0, 47) + '...' : textPart.text;
                } else {
                    summary = 'Image message';
                }
            }
            await _services_apiService__WEBPACK_IMPORTED_MODULE_0__.apiService.updateSessionMetadata(activeSessionId, {
                name: summary
            });
            // 更新 sessions atom
            set(_atoms_session__WEBPACK_IMPORTED_MODULE_1__.sessionsAtom, (prev)=>prev.map((session)=>session.id === activeSessionId ? {
                        ...session,
                        name: summary
                    } : session));
        }
    } catch (error) {
        console.log('Failed to update initial summary, continuing anyway:', error);
    // 错误不中断主流程
    }
    try {
        // 使用流式查询
        await _services_apiService__WEBPACK_IMPORTED_MODULE_0__.apiService.sendStreamingQuery(activeSessionId, content, (event)=>{
            // 处理每个事件
            set(_eventProcessor__WEBPACK_IMPORTED_MODULE_5__.processEventAction, {
                sessionId: activeSessionId,
                event
            });
            // 确保状态保持为处理中，直到明确收到结束事件
            if (event.type !== 'agent_run_end' && event.type !== 'assistant_message') {
                set(_atoms_ui__WEBPACK_IMPORTED_MODULE_4__.isProcessingAtom, true);
            }
        });
    } catch (error) {
        console.error('Error sending message:', error);
        // 错误时重置处理状态
        set(_atoms_ui__WEBPACK_IMPORTED_MODULE_4__.isProcessingAtom, false);
        throw error;
    }
});
/**
 * Abort the current running query
 */ const abortQueryAction = (0,jotai__WEBPACK_IMPORTED_MODULE_7__.atom)(null, async (get, set)=>{
    const activeSessionId = get(_atoms_session__WEBPACK_IMPORTED_MODULE_1__.activeSessionIdAtom);
    if (!activeSessionId) {
        return false;
    }
    try {
        const success = await _services_apiService__WEBPACK_IMPORTED_MODULE_0__.apiService.abortQuery(activeSessionId);
        if (success) {
            set(_atoms_ui__WEBPACK_IMPORTED_MODULE_4__.isProcessingAtom, false);
            // Add system message about abort
            const abortMessage = {
                id: (0,uuid__WEBPACK_IMPORTED_MODULE_8__["default"])(),
                role: 'system',
                content: 'The operation was aborted.',
                timestamp: Date.now()
            };
            set(_atoms_message__WEBPACK_IMPORTED_MODULE_2__.messagesAtom, (prev)=>{
                const sessionMessages = prev[activeSessionId] || [];
                return {
                    ...prev,
                    [activeSessionId]: [
                        ...sessionMessages,
                        abortMessage
                    ]
                };
            });
        }
        return success;
    } catch (error) {
        console.error('Error aborting query:', error);
        return false;
    }
});
/**
 * Check the current status of a session
 */ const checkSessionStatusAction = (0,jotai__WEBPACK_IMPORTED_MODULE_7__.atom)(null, async (get, set, sessionId)=>{
    if (!sessionId) return;
    try {
        const status = await _services_apiService__WEBPACK_IMPORTED_MODULE_0__.apiService.getSessionStatus(sessionId);
        set(_atoms_ui__WEBPACK_IMPORTED_MODULE_4__.isProcessingAtom, status.isProcessing);
        return status;
    } catch (error) {
        console.error('Failed to check session status:', error);
    // 错误时不更新处理状态，避免误报
    }
});
/**
 * Handle the end of a conversation
 * 仍然保留此函数，但减少其重要性，避免更新失败带来的影响
 */ async function handleConversationEnd(get, set, sessionId) {
    // 我们不再依赖这个函数来设置会话名称，但仍然保留它作为备份机制
    const allMessages = get(_atoms_message__WEBPACK_IMPORTED_MODULE_2__.messagesAtom)[sessionId] || [];
    // 只在有足够的消息并且会话没有名称时才尝试生成摘要
    const sessions = get(_atoms_session__WEBPACK_IMPORTED_MODULE_1__.sessionsAtom);
    const currentSession = sessions.find((s)=>s.id === sessionId);
    // 如果会话已经有名称，则不需要再生成
    if (currentSession && currentSession.name) {
        return;
    }
    // 只在有实际对话时才尝试生成摘要
    if (allMessages.length > 1) {
        try {
            // 转换消息为 API 期望的格式
            const apiMessages = allMessages.map((msg)=>({
                    role: msg.role,
                    content: typeof msg.content === 'string' ? msg.content : 'multimodal content'
                }));
            // 生成摘要
            const summary = await _services_apiService__WEBPACK_IMPORTED_MODULE_0__.apiService.generateSummary(sessionId, apiMessages);
            if (summary) {
                // 更新会话名称
                await _services_apiService__WEBPACK_IMPORTED_MODULE_0__.apiService.updateSessionMetadata(sessionId, {
                    name: summary
                });
                // 更新 sessions atom
                set(_atoms_session__WEBPACK_IMPORTED_MODULE_1__.sessionsAtom, (prev)=>prev.map((session)=>session.id === sessionId ? {
                            ...session,
                            name: summary
                        } : session));
            }
        } catch (error) {
            console.error('Failed to generate or update summary, continuing anyway:', error);
        // 错误不影响主流程
        }
    }
}

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/common/state/atoms/message.ts": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  groupedMessagesAtom: () => (groupedMessagesAtom),
  messagesAtom: () => (messagesAtom)
});
/* ESM import */var jotai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/jotai@2.12.5_@types+react@18.3.23_react@18.3.1/node_modules/jotai/esm/vanilla.mjs");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

/**
 * Atom for storing messages for each session
 * Key is the session ID, value is an array of messages for that session
 */ const messagesAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_0__.atom)({});
/**
 * Atom for storing grouped messages for each session
 * Key is the session ID, value is an array of message groups for that session
 * This is derived from messagesAtom but with messages properly grouped
 */ const groupedMessagesAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_0__.atom)((get)=>{
    const allMessages = get(messagesAtom);
    const result = {};
    // Process each session's messages into groups
    Object.entries(allMessages).forEach((param)=>{
        let [sessionId, messages] = param;
        result[sessionId] = createMessageGroups(messages);
    });
    return result;
});
/**
 * Group messages into logical conversation groups
 *
 * The grouping logic creates groups based on:
 * 1. User messages always start a new group
 * 2. System messages are standalone groups
 * 3. Assistant/environment messages that belong together are grouped
 * 4. Thinking/processing sequences are properly maintained
 */ function createMessageGroups(messages) {
    if (!messages.length) return [];
    const groups = [];
    let currentGroup = [];
    let currentThinkingSequence = null;
    // Process messages in order
    for(let i = 0; i < messages.length; i++){
        const message = messages[i];
        // User messages always start a new group
        if (message.role === 'user') {
            if (currentGroup.length > 0) {
                groups.push({
                    messages: [
                        ...currentGroup
                    ]
                });
            }
            currentGroup = [
                message
            ];
            currentThinkingSequence = null;
            continue;
        }
        // System messages are standalone
        if (message.role === 'system') {
            if (currentGroup.length > 0) {
                groups.push({
                    messages: [
                        ...currentGroup
                    ]
                });
            }
            groups.push({
                messages: [
                    message
                ]
            });
            currentGroup = [];
            currentThinkingSequence = null;
            continue;
        }
        // Process assistant and environment messages
        if (message.role === 'assistant' || message.role === 'environment') {
            // Check if this is the start of a thinking sequence
            if (message.role === 'assistant' && currentGroup.length > 0 && currentGroup[currentGroup.length - 1].role === 'user' && (!message.finishReason || message.finishReason !== 'stop')) {
                // Create new thinking sequence
                currentThinkingSequence = {
                    startIndex: currentGroup.length,
                    messages: [
                        message
                    ]
                };
                currentGroup.push(message);
                continue;
            }
            // Continue existing thinking sequence
            if (currentThinkingSequence && (!message.finishReason || message.finishReason !== 'stop')) {
                currentThinkingSequence.messages.push(message);
                currentGroup.push(message);
                continue;
            }
            // Handle final answer in a thinking sequence
            if (message.role === 'assistant' && message.finishReason === 'stop') {
                if (currentThinkingSequence) {
                    currentThinkingSequence.messages.push(message);
                    currentGroup.push(message);
                    currentThinkingSequence = null;
                    continue;
                } else {
                    // Standalone final answer
                    currentGroup.push(message);
                    continue;
                }
            }
            // Default: add to current group
            currentGroup.push(message);
        }
    }
    // Add the last group if not empty
    if (currentGroup.length > 0) {
        groups.push({
            messages: [
                ...currentGroup
            ]
        });
    }
    return groups;
}

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/common/state/atoms/plan.ts": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  planUIStateAtom: () => (planUIStateAtom),
  plansAtom: () => (plansAtom)
});
/* ESM import */var jotai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/jotai@2.12.5_@types+react@18.3.23_react@18.3.1/node_modules/jotai/esm/vanilla.mjs");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

/**
 * Default empty plan state
 */ const DEFAULT_PLAN_STATE = {
    steps: [],
    isComplete: false,
    summary: null,
    hasGeneratedPlan: false,
    keyframes: []
};
/**
 * Atom for storing plans for each session
 */ const plansAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_0__.atom)({});
/**
 * Atom for UI state related to plan display
 */ const planUIStateAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_0__.atom)({
    isVisible: false
});

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/common/state/atoms/replay.ts": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  replayStateAtom: () => (replayStateAtom)
});
/* ESM import */var jotai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/jotai@2.12.5_@types+react@18.3.23_react@18.3.1/node_modules/jotai/esm/vanilla.mjs");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

/**
 * Default replay state
 */ const DEFAULT_REPLAY_STATE = {
    isActive: false,
    isPaused: true,
    events: [],
    currentEventIndex: -1,
    startTimestamp: null,
    endTimestamp: null,
    playbackSpeed: 1,
    autoPlayCountdown: null,
    visibleTimeWindow: null,
    processedEvents: {}
};
/**
 * Atom for storing replay state
 * This manages the entire replay experience including timeline position and events
 */ const replayStateAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_0__.atom)(DEFAULT_REPLAY_STATE);

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/common/state/atoms/session.ts": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  activeSessionIdAtom: () => (activeSessionIdAtom),
  sessionsAtom: () => (sessionsAtom)
});
/* ESM import */var jotai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/jotai@2.12.5_@types+react@18.3.23_react@18.3.1/node_modules/jotai/esm/vanilla.mjs");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

/**
 * Atom for storing all sessions
 */ const sessionsAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_0__.atom)([]);
/**
 * Atom for the currently active session ID
 */ const activeSessionIdAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_0__.atom)(null);

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/common/state/atoms/tool.ts": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  toolCallResultMap: () => (toolCallResultMap),
  toolResultsAtom: () => (toolResultsAtom)
});
/* ESM import */var jotai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/jotai@2.12.5_@types+react@18.3.23_react@18.3.1/node_modules/jotai/esm/vanilla.mjs");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

/**
 * Atom for storing tool results for each session
 * Key is the session ID, value is an array of tool results for that session
 */ const toolResultsAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_0__.atom)({});
/**
 * Map to track tool calls to their results (not an atom, just a cache)
 */ const toolCallResultMap = new Map();

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/common/state/atoms/ui.ts": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  activePanelContentAtom: () => (activePanelContentAtom),
  connectionStatusAtom: () => (connectionStatusAtom),
  isProcessingAtom: () => (isProcessingAtom),
  modelInfoAtom: () => (modelInfoAtom),
  offlineModeAtom: () => (offlineModeAtom),
  sidebarCollapsedAtom: () => (sidebarCollapsedAtom),
  workspacePanelCollapsedAtom: () => (workspacePanelCollapsedAtom)
});
/* ESM import */var jotai__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/jotai@2.12.5_@types+react@18.3.23_react@18.3.1/node_modules/jotai/esm/vanilla.mjs");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

/**
 * Atom for the content currently displayed in the panel
 */ const activePanelContentAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_0__.atom)(null);
/**
 * Atom for server connection status
 */ const connectionStatusAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_0__.atom)({
    connected: false,
    lastConnected: null,
    lastError: null,
    reconnecting: false
});
/**
 * Atom for model info (provider and model name)
 */ const modelInfoAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_0__.atom)({
    provider: '',
    model: ''
});
/**
 * Atom for sidebar collapsed state
 */ const sidebarCollapsedAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_0__.atom)(true);
/**
 * Atom for workspace panel collapsed state
 */ const workspacePanelCollapsedAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_0__.atom)(false);
/**
 * Atom for tracking processing status (when agent is running)
 */ const isProcessingAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_0__.atom)(false);
/**
 * Atom for offline mode state (view-only when disconnected)
 */ const offlineModeAtom = (0,jotai__WEBPACK_IMPORTED_MODULE_0__.atom)(false);

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/standalone/app/App.tsx": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  App: () => (App)
});
/* ESM import */var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* ESM import */var react_router_dom__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("../node_modules/.pnpm/react-router@7.6.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-router/dist/development/chunk-DQRVZFIR.mjs");
/* ESM import */var _Layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/standalone/app/Layout/index.tsx");
/* ESM import */var _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/common/hooks/useSession.ts");
/* ESM import */var _standalone_home_HomePage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/standalone/home/HomePage.tsx");
/* ESM import */var _common_hooks_useReplayMode__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/common/hooks/useReplayMode.tsx");
/* ESM import */var _Router_SessionRouter__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/standalone/app/Router/SessionRouter.tsx");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

var _s = $RefreshSig$();







/**
 * App Component - Main application container with routing
 */ const App = ()=>{
    _s();
    const { initConnectionMonitoring, loadSessions, connectionStatus, activeSessionId } = (0,_common_hooks_useSession__WEBPACK_IMPORTED_MODULE_3__.useSession)();
    const isReplayMode = (0,_common_hooks_useReplayMode__WEBPACK_IMPORTED_MODULE_5__.useReplayMode)();
    // Initialize connection monitoring and load sessions on mount - but not in replay mode
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        // In replay mode, skip connection monitoring and session loading
        if (isReplayMode) {
            console.log('[ReplayMode] Skipping connection initialization in replay mode');
            return;
        }
        const initialize = async ()=>{
            // Initialize connection monitoring
            const cleanup = initConnectionMonitoring();
            // Load sessions if connected
            if (connectionStatus.connected) {
                await loadSessions();
            }
            return cleanup;
        };
        const cleanupPromise = initialize();
        // Cleanup on unmount
        return ()=>{
            cleanupPromise.then((cleanup)=>{
                if (typeof cleanup === 'function') {
                    cleanup();
                }
            });
        };
    }, [
        initConnectionMonitoring,
        loadSessions,
        connectionStatus.connected,
        isReplayMode
    ]);
    // Special handling for replay mode - bypass normal routing
    if (isReplayMode) {
        console.log('[ReplayMode] Rendering replay layout directly');
        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_Layout__WEBPACK_IMPORTED_MODULE_2__.Layout, {
            isReplayMode: true
        }, void 0, false, {
            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/App.tsx",
            lineNumber: 52,
            columnNumber: 12
        }, undefined);
    }
    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_router_dom__WEBPACK_IMPORTED_MODULE_7__.Routes, {
        children: [
            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_router_dom__WEBPACK_IMPORTED_MODULE_7__.Route, {
                path: "/",
                element: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_standalone_home_HomePage__WEBPACK_IMPORTED_MODULE_4__["default"], {}, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/App.tsx",
                    lineNumber: 57,
                    columnNumber: 32
                }, void 0)
            }, void 0, false, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/App.tsx",
                lineNumber: 57,
                columnNumber: 7
            }, undefined),
            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_router_dom__WEBPACK_IMPORTED_MODULE_7__.Route, {
                path: "/:sessionId",
                element: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_Router_SessionRouter__WEBPACK_IMPORTED_MODULE_6__.SessionRouter, {
                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_Layout__WEBPACK_IMPORTED_MODULE_2__.Layout, {}, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/App.tsx",
                        lineNumber: 62,
                        columnNumber: 13
                    }, void 0)
                }, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/App.tsx",
                    lineNumber: 61,
                    columnNumber: 11
                }, void 0)
            }, void 0, false, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/App.tsx",
                lineNumber: 58,
                columnNumber: 7
            }, undefined)
        ]
    }, void 0, true, {
        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/App.tsx",
        lineNumber: 56,
        columnNumber: 5
    }, undefined);
};
_s(App, "31h/ddMRZEJX+gIIul6q5PJgtuc=", false, function() {
    return [
        _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_3__.useSession,
        _common_hooks_useReplayMode__WEBPACK_IMPORTED_MODULE_5__.useReplayMode
    ];
});
_c = App;
var _c;
$RefreshReg$(_c, "App");

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/standalone/app/Layout/index.tsx": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Layout: () => (Layout)
});
/* ESM import */var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* ESM import */var _standalone_sidebar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/standalone/sidebar/index.tsx");
/* ESM import */var _standalone_navbar__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/standalone/navbar/index.ts");
/* ESM import */var _standalone_chat_ChatPanel__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/standalone/chat/ChatPanel.tsx");
/* ESM import */var _standalone_workspace_WorkspacePanel__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/standalone/workspace/WorkspacePanel.tsx");
/* ESM import */var _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/common/hooks/useSession.ts");
/* ESM import */var _common_hooks_useReplayMode__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./src/common/hooks/useReplayMode.tsx");
/* ESM import */var framer_motion__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("../node_modules/.pnpm/framer-motion@10.18.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/framer-motion/dist/es/render/dom/motion.mjs");
/* ESM import */var _Shell__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./src/standalone/app/Layout/Shell.tsx");
/* ESM import */var _Layout_css__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./src/standalone/app/Layout/Layout.css");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

var _s = $RefreshSig$();










/**
 * Layout Component - Main application layout
 *
 * Design principles:
 * - Clean, minimalist aesthetic with refined borders and subtle shadows
 * - Neutral color palette with elegant accent colors
 * - Consistent spacing and typography for optimal readability
 * - Seamless visual flow between different interface elements
 * - Adapts layout based on replay mode status
 */ const Layout = (param)=>{
    let { isReplayMode: propIsReplayMode } = param;
    _s();
    const { connectionStatus } = (0,_common_hooks_useSession__WEBPACK_IMPORTED_MODULE_6__.useSession)();
    // Use the context hook to get global replay mode status
    const contextIsReplayMode = (0,_common_hooks_useReplayMode__WEBPACK_IMPORTED_MODULE_7__.useReplayMode)();
    // Prioritize props for backward compatibility, but fall back to context
    const isReplayMode = propIsReplayMode !== undefined ? propIsReplayMode : contextIsReplayMode;
    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
        className: "flex flex-col h-screen bg-[#F2F3F5] dark:bg-white/5 text-gray-900 dark:text-gray-100 overflow-hidden",
        children: [
            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_standalone_navbar__WEBPACK_IMPORTED_MODULE_3__.Navbar, {}, void 0, false, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/Layout/index.tsx",
                lineNumber: 38,
                columnNumber: 7
            }, undefined),
            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                className: "flex flex-1 overflow-hidden",
                children: [
                    !isReplayMode && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_standalone_sidebar__WEBPACK_IMPORTED_MODULE_2__.Sidebar, {}, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/Layout/index.tsx",
                        lineNumber: 43,
                        columnNumber: 27
                    }, undefined),
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                        className: "flex-1 flex flex-col overflow-hidden p-2 lg:p-3",
                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                            className: "flex gap-3 flex-1 min-h-0",
                            children: [
                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_10__.motion.div, {
                                    layout: true,
                                    className: isReplayMode ? 'w-[50%] flex flex-col' : 'w-[50%] flex flex-col',
                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_Shell__WEBPACK_IMPORTED_MODULE_8__.Shell, {
                                        className: "h-full rounded-xl bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm border border-[#E5E6EC] dark:border-none bg-[#FFFFFFE5] dark:shadow-gray-950/5",
                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_standalone_chat_ChatPanel__WEBPACK_IMPORTED_MODULE_4__.ChatPanel, {}, void 0, false, {
                                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/Layout/index.tsx",
                                            lineNumber: 55,
                                            columnNumber: 17
                                        }, undefined)
                                    }, void 0, false, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/Layout/index.tsx",
                                        lineNumber: 54,
                                        columnNumber: 15
                                    }, undefined)
                                }, void 0, false, {
                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/Layout/index.tsx",
                                    lineNumber: 50,
                                    columnNumber: 13
                                }, undefined),
                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_10__.motion.div, {
                                    layout: true,
                                    className: "w-[50%] flex flex-col",
                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_Shell__WEBPACK_IMPORTED_MODULE_8__.Shell, {
                                        className: "h-full rounded-xl bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm border border-[#E5E6EC] dark:border-none bg-[#FFFFFFE5] dark:shadow-gray-950/5",
                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_standalone_workspace_WorkspacePanel__WEBPACK_IMPORTED_MODULE_5__.WorkspacePanel, {}, void 0, false, {
                                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/Layout/index.tsx",
                                            lineNumber: 62,
                                            columnNumber: 17
                                        }, undefined)
                                    }, void 0, false, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/Layout/index.tsx",
                                        lineNumber: 61,
                                        columnNumber: 15
                                    }, undefined)
                                }, void 0, false, {
                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/Layout/index.tsx",
                                    lineNumber: 60,
                                    columnNumber: 13
                                }, undefined)
                            ]
                        }, void 0, true, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/Layout/index.tsx",
                            lineNumber: 48,
                            columnNumber: 11
                        }, undefined)
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/Layout/index.tsx",
                        lineNumber: 46,
                        columnNumber: 9
                    }, undefined)
                ]
            }, void 0, true, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/Layout/index.tsx",
                lineNumber: 41,
                columnNumber: 7
            }, undefined)
        ]
    }, void 0, true, {
        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/Layout/index.tsx",
        lineNumber: 36,
        columnNumber: 5
    }, undefined);
};
_s(Layout, "hkEabS0Ud9tWV4KRmEeXA7jL0K4=", false, function() {
    return [
        _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_6__.useSession,
        _common_hooks_useReplayMode__WEBPACK_IMPORTED_MODULE_7__.useReplayMode
    ];
});
_c = Layout;
var _c;
$RefreshReg$(_c, "Layout");

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/standalone/app/Router/SessionRouter.tsx": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  SessionRouter: () => (SessionRouter)
});
/* ESM import */var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* ESM import */var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("../node_modules/.pnpm/react-router@7.6.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-router/dist/development/chunk-DQRVZFIR.mjs");
/* ESM import */var _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/common/hooks/useSession.ts");
/* ESM import */var _common_hooks_useReplayMode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/common/hooks/useReplayMode.tsx");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

var _s = $RefreshSig$();




/**
 * SessionRouter Component - Handles session routing logic
 */ const SessionRouter = (param)=>{
    let { children } = param;
    _s();
    const { sessionId } = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useParams)();
    const { setActiveSession, sessions, connectionStatus, activeSessionId, sendMessage } = (0,_common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__.useSession)();
    const isReplayMode = (0,_common_hooks_useReplayMode__WEBPACK_IMPORTED_MODULE_3__.useReplayMode)();
    const location = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useLocation)();
    // Check if session exists in our loaded sessions
    const sessionExists = sessions.some((session)=>session.id === sessionId);
    // Handle query parameter if present
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        const searchParams = new URLSearchParams(location.search);
        const query = searchParams.get('q');
        if (query && sessionId && activeSessionId === sessionId && !location.pathname.includes('/welcome')) {
            // Process the query
            sendMessage(query).catch((error)=>{
                console.error(`Failed to send query: ${error}`);
            });
        }
    }, [
        location.search,
        sessionId,
        activeSessionId,
        sendMessage,
        location.pathname
    ]);
    // Setup session - but skip in replay mode as it's handled by ReplayModeProvider
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        // Skip this logic in replay mode since session is already set
        if (isReplayMode) {
            console.log('[ReplayMode] SessionRouter: Skipping session setup in replay mode');
            return;
        }
        // Only set active session if:
        // 1. We have a session ID from URL
        // 2. It exists in our sessions list
        // 3. We're connected
        if (sessionId && sessionExists && connectionStatus.connected) {
            console.log(`SessionRouter: Loading session ${sessionId} from URL`);
            setActiveSession(sessionId).catch((error)=>{
                console.error(`Failed to load session ${sessionId}:`, error);
            });
        }
    }, [
        sessionId,
        sessionExists,
        connectionStatus.connected,
        setActiveSession,
        isReplayMode
    ]);
    // In replay mode, always show content regardless of session existence
    if (isReplayMode) {
        console.log('[ReplayMode] SessionRouter: Rendering children in replay mode');
        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
            children: children
        }, void 0, false);
    }
    // For normal mode, redirect if session doesn't exist
    if (!sessionExists && sessions.length > 0 && sessionId) {
        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_router_dom__WEBPACK_IMPORTED_MODULE_4__.Navigate, {
            to: "/",
            replace: true
        }, void 0, false, {
            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/Router/SessionRouter.tsx",
            lineNumber: 70,
            columnNumber: 12
        }, undefined);
    }
    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: children
    }, void 0, false);
};
_s(SessionRouter, "soEBy60eaR6mPo6MOMaGy2mbpfo=", false, function() {
    return [
        react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useParams,
        _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__.useSession,
        _common_hooks_useReplayMode__WEBPACK_IMPORTED_MODULE_3__.useReplayMode,
        react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useLocation
    ];
});
_c = SessionRouter;
var _c;
$RefreshReg$(_c, "SessionRouter");

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/standalone/app/index.tsx": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  AgentTARSWebUI: () => (AgentTARSWebUI)
});
/* ESM import */var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* ESM import */var jotai__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("../node_modules/.pnpm/jotai@2.12.5_@types+react@18.3.23_react@18.3.1/node_modules/jotai/esm/react.mjs");
/* ESM import */var _App__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/standalone/app/App.tsx");
/* ESM import */var _common_hooks_useReplayMode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/common/hooks/useReplayMode.tsx");
/* ESM import */var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("../node_modules/.pnpm/react-router@7.6.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-router/dist/development/chunk-DQRVZFIR.mjs");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

var _s = $RefreshSig$();





/**
 * Agent TARS Web UI v2 - Entry Component
 *
 * Provides the Jotai atom provider and initializes theme based on user preference.
 * Uses the enhanced ReplayModeProvider that now handles both context provision and initialization.
 */ const AgentTARSWebUI = ()=>{
    _s();
    // Initialize theme based on user preference
    react__WEBPACK_IMPORTED_MODULE_1___default().useEffect(()=>{
        // Check if user prefers dark mode
        const prefersDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches;
        // Check if theme is stored in localStorage
        const storedTheme = localStorage.getItem('agent-tars-theme');
        // Apply dark mode if preferred or stored
        if (storedTheme === 'dark' || storedTheme === null && prefersDarkMode) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
        // Listen for theme preference changes
        const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)');
        const handleChange = (e)=>{
            if (storedTheme === null) {
                if (e.matches) {
                    document.documentElement.classList.add('dark');
                } else {
                    document.documentElement.classList.remove('dark');
                }
            }
        };
        mediaQuery.addEventListener('change', handleChange);
        return ()=>{
            mediaQuery.removeEventListener('change', handleChange);
        };
    }, []);
    // Use HashRouter for shared HTML files (replay mode) to prevent routing issues
    const isReplayMode = window.AGENT_TARS_REPLAY_MODE === true;
    console.log('isReplayMode', isReplayMode);
    const Router = isReplayMode ? react_router_dom__WEBPACK_IMPORTED_MODULE_4__.HashRouter : react_router_dom__WEBPACK_IMPORTED_MODULE_4__.BrowserRouter;
    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(jotai__WEBPACK_IMPORTED_MODULE_5__.Provider, {
        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_common_hooks_useReplayMode__WEBPACK_IMPORTED_MODULE_3__.ReplayModeProvider, {
            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(Router, {
                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_App__WEBPACK_IMPORTED_MODULE_2__.App, {}, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/index.tsx",
                    lineNumber: 57,
                    columnNumber: 11
                }, undefined)
            }, void 0, false, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/index.tsx",
                lineNumber: 56,
                columnNumber: 9
            }, undefined)
        }, void 0, false, {
            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/index.tsx",
            lineNumber: 55,
            columnNumber: 7
        }, undefined)
    }, void 0, false, {
        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/app/index.tsx",
        lineNumber: 54,
        columnNumber: 5
    }, undefined);
};
_s(AgentTARSWebUI, "OD7bBpZva5O2jO+Puf00hKivP7c=");
_c = AgentTARSWebUI;
var _c;
$RefreshReg$(_c, "AgentTARSWebUI");

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/standalone/chat/Message/index.tsx": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  Message: () => (Message)
});
/* ESM import */var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* ESM import */var framer_motion__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__("../node_modules/.pnpm/framer-motion@10.18.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/framer-motion/dist/es/render/dom/motion.mjs");
/* ESM import */var _common_utils_typeGuards__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/common/utils/typeGuards.ts");
/* ESM import */var _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/common/hooks/useSession.ts");
/* ESM import */var _common_hooks_useTool__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/common/hooks/useTool.tsx");
/* ESM import */var _sdk_markdown_renderer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/sdk/markdown-renderer/index.tsx");
/* ESM import */var _Message_css__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/standalone/chat/Message/Message.css");
/* ESM import */var _components_SystemMessage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("./src/standalone/chat/Message/components/SystemMessage.tsx");
/* ESM import */var _components_MultimodalContent__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("./src/standalone/chat/Message/components/MultimodalContent.tsx");
/* ESM import */var _components_AssistantExpandableContent__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("./src/standalone/chat/Message/components/AssistantExpandableContent.tsx");
/* ESM import */var _components_ToolCalls__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__("./src/standalone/chat/Message/components/ToolCalls.tsx");
/* ESM import */var _components_ThinkingToggle__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__("./src/standalone/chat/Message/components/ThinkingToggle.tsx");
/* ESM import */var _components_MessageTimestamp__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__("./src/standalone/chat/Message/components/MessageTimestamp.tsx");
/* ESM import */var jotai__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__("../node_modules/.pnpm/jotai@2.12.5_@types+react@18.3.23_react@18.3.1/node_modules/jotai/esm/react.mjs");
/* ESM import */var _common_state_atoms_replay__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__("./src/common/state/atoms/replay.ts");
/* ESM import */var _components_ReportFileEntry__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__("./src/standalone/chat/Message/components/ReportFileEntry.tsx");
/* ESM import */var _common_state_atoms_message__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__("./src/common/state/atoms/message.ts");
/* ESM import */var react_icons_fi__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__("../node_modules/.pnpm/react-icons@4.12.0_react@18.3.1/node_modules/react-icons/fi/index.esm.js");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

var _s = $RefreshSig$();







// Import sub-components











/**
 * Message Component - Displays a single message in the chat
 *
 * Design principles:
 * - Minimalist black & white design with no avatars
 * - Clean, full-width message bubbles with subtle differentiation
 * - Focus on content with minimal visual distractions
 * - Elegant spacing and typography
 * - Progressive disclosure for detailed content
 */ const Message = (param)=>{
    let { message, isIntermediate = false, isInGroup = false, shouldDisplayTimestamp = true } = param;
    _s();
    const [showThinking, setShowThinking] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);
    const [showSteps, setShowSteps] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);
    const { setActivePanelContent, activeSessionId } = (0,_common_hooks_useSession__WEBPACK_IMPORTED_MODULE_3__.useSession)();
    const { getToolIcon } = (0,_common_hooks_useTool__WEBPACK_IMPORTED_MODULE_4__.useTool)();
    const replayState = (0,jotai__WEBPACK_IMPORTED_MODULE_16__.useAtomValue)(_common_state_atoms_replay__WEBPACK_IMPORTED_MODULE_13__.replayStateAtom);
    const allMessages = (0,jotai__WEBPACK_IMPORTED_MODULE_16__.useAtomValue)(_common_state_atoms_message__WEBPACK_IMPORTED_MODULE_15__.messagesAtom);
    const isMultimodal = (0,_common_utils_typeGuards__WEBPACK_IMPORTED_MODULE_2__.isMultimodalContent)(message.content);
    const isEnvironment = message.role === 'environment';
    const isUserMessage = message.role === 'user';
    const isFinalAnswer = message.role === 'final_answer' || message.isDeepResearch;
    // Check if this is a final assistant response
    const isFinalAssistantResponse = message.role === 'assistant' && message.finishReason === 'stop';
    // Handle tool call click - show in panel
    const handleToolCallClick = (toolCall)=>{
        if (message.toolResults && message.toolResults.length > 0) {
            const result = message.toolResults.find((r)=>r.toolCallId === toolCall.id);
            if (result) {
                setActivePanelContent({
                    type: result.type,
                    source: result.content,
                    title: result.name,
                    timestamp: result.timestamp,
                    toolCallId: result.toolCallId,
                    error: result.error,
                    arguments: result.arguments
                });
            }
        }
    };
    // Handle click on final assistant response to show latest environment state
    const handleFinalResponseClick = ()=>{
        if (!activeSessionId || !isFinalAssistantResponse) return;
        const sessionMessages = allMessages[activeSessionId] || [];
        // Find the most recent environment input
        for(let i = sessionMessages.length - 1; i >= 0; i--){
            const msg = sessionMessages[i];
            if (msg.role === 'environment' && Array.isArray(msg.content)) {
                const imageContent = msg.content.find((item)=>item.type === 'image_url' && item.image_url && item.image_url.url);
                if (imageContent) {
                    setActivePanelContent({
                        type: 'image',
                        source: msg.content,
                        title: msg.description || 'Final Environment State',
                        timestamp: msg.timestamp,
                        environmentId: msg.id
                    });
                    break;
                }
            }
        }
    };
    // Render content based on type
    const renderContent = ()=>{
        if (isMultimodal) {
            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_MultimodalContent__WEBPACK_IMPORTED_MODULE_8__.MultimodalContent, {
                content: message.content,
                timestamp: message.timestamp,
                setActivePanelContent: setActivePanelContent
            }, void 0, false, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/chat/Message/index.tsx",
                lineNumber: 113,
                columnNumber: 9
            }, undefined);
        }
        // For assistant messages with tool calls, first show summary
        if (message.role === 'assistant' && message.toolCalls && message.toolCalls.length > 0) {
            return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_AssistantExpandableContent__WEBPACK_IMPORTED_MODULE_9__.AssistantExpandableContent, {
                content: message.content,
                showSteps: showSteps,
                setShowSteps: setShowSteps
            }, void 0, false, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/chat/Message/index.tsx",
                lineNumber: 124,
                columnNumber: 9
            }, undefined);
        }
        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_sdk_markdown_renderer__WEBPACK_IMPORTED_MODULE_5__.MarkdownRenderer, {
            content: message.content,
            forceDarkTheme: isUserMessage
        }, void 0, false, {
            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/chat/Message/index.tsx",
            lineNumber: 132,
            columnNumber: 12
        }, undefined);
    };
    // Message animation variants
    const messageVariants = {
        initial: {
            opacity: 0,
            y: 10
        },
        animate: {
            opacity: 1,
            y: 0
        },
        transition: {
            duration: 0.3
        }
    };
    // Determine message bubble style based on role and state
    const getMessageBubbleClasses = ()=>{
        let baseClasses = '';
        if (message.role === 'user') {
            if (isImageOnlyMessage) {
                baseClasses = 'message-user message-user-image';
            } else {
                baseClasses = 'message-user';
            }
        } else if (message.role === 'system') {
            baseClasses = 'message-system';
        } else if (message.role === 'environment') {
            baseClasses = 'environment-message-minimal';
        } else {
            baseClasses = 'message-assistant';
        }
        // 添加更平滑的点击样式
        if (isFinalAssistantResponse) {
            baseClasses += ' cursor-pointer transition-all duration-300';
        }
        return baseClasses;
    };
    // 检查消息是否只包含图片（用于样式优化）
    const isImageOnlyMessage = react__WEBPACK_IMPORTED_MODULE_1___default().useMemo(()=>{
        if (!(0,_common_utils_typeGuards__WEBPACK_IMPORTED_MODULE_2__.isMultimodalContent)(message.content)) return false;
        const imageContents = message.content.filter((part)=>part.type === 'image_url');
        const textContents = message.content.filter((part)=>part.type === 'text');
        return imageContents.length > 0 && textContents.length === 0;
    }, [
        message.content
    ]);
    // 检查消息是否只包含文本（用于样式优化）
    const isTextOnlyMessage = react__WEBPACK_IMPORTED_MODULE_1___default().useMemo(()=>{
        if (!(0,_common_utils_typeGuards__WEBPACK_IMPORTED_MODULE_2__.isMultimodalContent)(message.content)) return true;
        const imageContents = message.content.filter((part)=>part.type === 'image_url');
        const textContents = message.content.filter((part)=>part.type === 'text');
        return textContents.length > 0 && imageContents.length === 0;
    }, [
        message.content
    ]);
    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_17__.motion.div, {
        initial: "initial",
        animate: "animate",
        variants: messageVariants,
        className: `message-container ${message.role === 'user' ? 'message-container-user' : 'message-container-assistant'} ${isIntermediate ? 'message-container-intermediate' : ''}`,
        children: [
            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                className: `message-bubble ${getMessageBubbleClasses()} ${isIntermediate ? 'message-bubble-intermediate' : ''} ${isFinalAssistantResponse ? 'group' : ''}`,
                onClick: isFinalAssistantResponse ? handleFinalResponseClick : undefined,
                title: isFinalAssistantResponse ? 'Click to view final environment state' : undefined,
                children: message.role === 'system' ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_SystemMessage__WEBPACK_IMPORTED_MODULE_7__.SystemMessage, {
                    content: message.content
                }, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/chat/Message/index.tsx",
                    lineNumber: 202,
                    columnNumber: 11
                }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
                    children: [
                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                            className: `prose ${message.role === 'user' ? 'prose-invert' : 'dark:prose-invert'} prose-sm max-w-none text-sm`,
                            children: renderContent()
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/chat/Message/index.tsx",
                            lineNumber: 205,
                            columnNumber: 13
                        }, undefined),
                        isFinalAssistantResponse && !isIntermediate && !isInGroup && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                            className: "mt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 text-xs text-gray-500 dark:text-gray-400 flex items-center",
                            children: [
                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_18__.FiExternalLink, {
                                    size: 14,
                                    className: "mr-1"
                                }, void 0, false, {
                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/chat/Message/index.tsx",
                                    lineNumber: 214,
                                    columnNumber: 17
                                }, undefined),
                                "Click to view final environment state"
                            ]
                        }, void 0, true, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/chat/Message/index.tsx",
                            lineNumber: 213,
                            columnNumber: 15
                        }, undefined),
                        isFinalAnswer && message.title && typeof message.content === 'string' && !isIntermediate && !isInGroup && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ReportFileEntry__WEBPACK_IMPORTED_MODULE_14__.ReportFileEntry, {
                            title: message.title || 'Research Report',
                            timestamp: message.timestamp,
                            content: message.content
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/chat/Message/index.tsx",
                            lineNumber: 225,
                            columnNumber: 17
                        }, undefined),
                        message.toolCalls && message.toolCalls.length > 0 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ToolCalls__WEBPACK_IMPORTED_MODULE_10__.ToolCalls, {
                            toolCalls: message.toolCalls,
                            onToolCallClick: handleToolCallClick,
                            getToolIcon: getToolIcon,
                            isIntermediate: isIntermediate,
                            toolResults: message.toolResults || []
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/chat/Message/index.tsx",
                            lineNumber: 234,
                            columnNumber: 15
                        }, undefined),
                        message.thinking && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_ThinkingToggle__WEBPACK_IMPORTED_MODULE_11__.ThinkingToggle, {
                            thinking: message.thinking,
                            showThinking: showThinking,
                            setShowThinking: setShowThinking
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/chat/Message/index.tsx",
                            lineNumber: 245,
                            columnNumber: 15
                        }, undefined)
                    ]
                }, void 0, true)
            }, void 0, false, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/chat/Message/index.tsx",
                lineNumber: 195,
                columnNumber: 7
            }, undefined),
            message.role !== 'system' && !isIntermediate && !isInGroup && shouldDisplayTimestamp && !replayState.isActive && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_components_MessageTimestamp__WEBPACK_IMPORTED_MODULE_12__.MessageTimestamp, {
                timestamp: message.timestamp,
                content: message.content,
                role: message.role
            }, void 0, false, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/chat/Message/index.tsx",
                lineNumber: 261,
                columnNumber: 11
            }, undefined)
        ]
    }, void 0, true, {
        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/chat/Message/index.tsx",
        lineNumber: 189,
        columnNumber: 5
    }, undefined);
};
_s(Message, "Y+uoWWKnJOzqnhedfoPTfr5eBxk=", false, function() {
    return [
        _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_3__.useSession,
        _common_hooks_useTool__WEBPACK_IMPORTED_MODULE_4__.useTool,
        jotai__WEBPACK_IMPORTED_MODULE_16__.useAtomValue,
        jotai__WEBPACK_IMPORTED_MODULE_16__.useAtomValue
    ];
});
_c = Message;
var _c;
$RefreshReg$(_c, "Message");

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/standalone/home/HomePage.tsx": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* ESM import */var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("../node_modules/.pnpm/react-router@7.6.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-router/dist/development/chunk-DQRVZFIR.mjs");
/* ESM import */var _WelcomePage__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/standalone/home/WelcomePage.tsx");
/* ESM import */var _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/common/hooks/useSession.ts");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

var _s = $RefreshSig$();




/**
 * HomePage Component - Handles the welcome page and query parameter processing
 */ const HomePage = ()=>{
    _s();
    const { activeSessionId, sendMessage, createSession } = (0,_common_hooks_useSession__WEBPACK_IMPORTED_MODULE_3__.useSession)();
    const location = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useLocation)();
    const navigate = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useNavigate)();
    // Process query parameters if any (for direct query submissions)
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        const processQueryParam = async ()=>{
            const searchParams = new URLSearchParams(location.search);
            const query = searchParams.get('q');
            // If there's a query parameter but no active session, create one and send the query
            if (query && !activeSessionId) {
                try {
                    const sessionId = await createSession();
                    // Navigate to the session without the query parameter
                    navigate(`/${sessionId}`);
                    // Send the query after a short delay to ensure session is ready
                    setTimeout(()=>{
                        sendMessage(query);
                    }, 500);
                } catch (error) {
                    console.error('Failed to process query:', error);
                }
            }
        };
        processQueryParam();
    }, [
        location,
        activeSessionId,
        createSession,
        navigate,
        sendMessage
    ]);
    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_WelcomePage__WEBPACK_IMPORTED_MODULE_2__["default"], {}, void 0, false, {
        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/HomePage.tsx",
        lineNumber: 41,
        columnNumber: 10
    }, undefined);
};
_s(HomePage, "poC5Fr+h8LDioF4TJ+tpsnKFoaE=", false, function() {
    return [
        _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_3__.useSession,
        react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useLocation,
        react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useNavigate
    ];
});
_c = HomePage;
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (HomePage);
var _c;
$RefreshReg$(_c, "HomePage");

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/standalone/home/WelcomePage.tsx": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* ESM import */var framer_motion__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("../node_modules/.pnpm/framer-motion@10.18.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/framer-motion/dist/es/render/dom/motion.mjs");
/* ESM import */var react_router_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("../node_modules/.pnpm/react-router@7.6.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-router/dist/development/chunk-DQRVZFIR.mjs");
/* ESM import */var react_icons_fi__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("../node_modules/.pnpm/react-icons@4.12.0_react@18.3.1/node_modules/react-icons/fi/index.esm.js");
/* ESM import */var _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/common/hooks/useSession.ts");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

var _s = $RefreshSig$();





const WelcomePage = ()=>{
    _s();
    const navigate = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_3__.useNavigate)();
    const { createSession, sendMessage, sessions } = (0,_common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__.useSession)();
    const [query, setQuery] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)('');
    const [isLoading, setIsLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);
    const [isDirectChatLoading, setIsDirectChatLoading] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);
    const inputRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        // Focus the input field when component mounts
        if (inputRef.current) {
            inputRef.current.focus();
        }
    }, []);
    const handleSubmit = async (e)=>{
        e.preventDefault();
        if (!query.trim() || isLoading) return;
        setIsLoading(true);
        try {
            // Create a new session
            const sessionId = await createNewSession();
            navigate(`/${sessionId}`);
            // Store the query for later use but navigate without query parameter
            const userQuery = query;
            // Navigate to the session route without query parameters
            navigate(`/${sessionId}`);
            // After navigation, the SessionRouter component will handle setting the active session
            // We can send the message after a short delay to ensure the session is properly initialized
            setTimeout(()=>{
                sendMessage(userQuery).catch((error)=>{
                    console.error('Failed to send initial message:', error);
                });
            }, 500);
        } catch (error) {
            console.error('Failed to create session:', error);
            setIsLoading(false);
        }
    };
    // Function to handle direct chat without entering a query
    const handleDirectChat = async ()=>{
        if (isDirectChatLoading) return;
        setIsDirectChatLoading(true);
        try {
            // Check if there are existing sessions
            if (sessions && sessions.length > 0) {
                // Find the latest session and navigate
                const latestSession = sessions[0]; // Assuming sessions are sorted by time in descending order
                navigate(`/${latestSession.id}`);
            } else {
                // If no existing sessions, create a new session
                const sessionId = await createSession();
                navigate(`/${sessionId}`);
            }
        } catch (error) {
            console.error('Failed to navigate to chat:', error);
        } finally{
            setIsDirectChatLoading(false);
        }
    };
    const createNewSession = async ()=>{
        const sessionId = await createSession();
        return sessionId;
    };
    const examplePrompts = [
        'Search for the latest GUI Agent papers',
        'Find information about UI TARS',
        'Tell me the top 5 most popular projects on ProductHunt today',
        'Please book me the earliest flight from Hangzhou to Shenzhen on 10.1'
    ];
    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
        className: "min-h-screen flex flex-col bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800",
        children: [
            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                className: "fixed inset-0 bg-gradient-to-b from-transparent to-gray-100/50 dark:to-gray-800/50 pointer-events-none"
            }, void 0, false, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                lineNumber: 91,
                columnNumber: 7
            }, undefined),
            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("header", {
                className: "relative z-10 pt-8 px-8",
                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                    className: "max-w-7xl mx-auto flex justify-between items-center",
                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                        className: "flex items-center",
                        children: [
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_4__.motion.img, {
                                whileHover: {
                                    scale: 1.05
                                },
                                whileTap: {
                                    scale: 0.95
                                },
                                src: "https://lf3-static.bytednsdoc.com/obj/eden-cn/psvhouloj/agent-tars/icon.png",
                                className: "w-12 h-12 rounded-xl flex items-center justify-center mx-auto text-white dark:text-gray-900 cursor-pointer mr-3",
                                alt: "Agent TARS"
                            }, void 0, false, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                lineNumber: 97,
                                columnNumber: 13
                            }, undefined),
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("span", {
                                className: "text-xl font-display font-bold text-gray-900 dark:text-gray-100",
                                children: "Agent TARS"
                            }, void 0, false, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                lineNumber: 104,
                                columnNumber: 13
                            }, undefined)
                        ]
                    }, void 0, true, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                        lineNumber: 96,
                        columnNumber: 11
                    }, undefined)
                }, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                    lineNumber: 95,
                    columnNumber: 9
                }, undefined)
            }, void 0, false, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                lineNumber: 94,
                columnNumber: 7
            }, undefined),
            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("main", {
                className: "flex-1 relative z-10 flex flex-col items-center justify-center px-4 py-12",
                children: [
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_4__.motion.div, {
                        initial: {
                            opacity: 0,
                            y: 20
                        },
                        animate: {
                            opacity: 1,
                            y: 0
                        },
                        transition: {
                            duration: 0.5
                        },
                        className: "text-center mb-12",
                        children: [
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("h1", {
                                className: "text-4xl md:text-5xl lg:text-6xl font-display font-bold bg-gradient-to-r from-gray-900 via-gray-800 to-gray-700 dark:from-gray-100 dark:via-gray-200 dark:to-gray-300 text-transparent bg-clip-text mb-4",
                                children: "An multimodal AI agent"
                            }, void 0, false, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                lineNumber: 119,
                                columnNumber: 11
                            }, undefined),
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("p", {
                                className: "text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto",
                                children: "An open-source multimodal AI agent Offering seamless integration with a wide range of real-world tools."
                            }, void 0, false, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                lineNumber: 122,
                                columnNumber: 11
                            }, undefined)
                        ]
                    }, void 0, true, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                        lineNumber: 113,
                        columnNumber: 9
                    }, undefined),
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_4__.motion.div, {
                        initial: {
                            opacity: 0,
                            scale: 0.95
                        },
                        animate: {
                            opacity: 1,
                            scale: 1
                        },
                        transition: {
                            duration: 0.5,
                            delay: 0.2
                        },
                        className: "w-full max-w-3xl mx-auto mb-8",
                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("form", {
                            onSubmit: handleSubmit,
                            className: "relative",
                            children: [
                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                    className: "relative overflow-hidden rounded-2xl transition-all duration-300 group",
                                    children: [
                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                            className: "absolute inset-0 bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 dark:from-indigo-400 dark:via-purple-400 dark:to-pink-400 animate-border-flow opacity-70 group-hover:opacity-100 transition-opacity"
                                        }, void 0, false, {
                                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                            lineNumber: 138,
                                            columnNumber: 15
                                        }, undefined),
                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                            className: "relative m-[2px] rounded-[calc(1rem-2px)] bg-white dark:bg-gray-800 p-2",
                                            children: [
                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("input", {
                                                    ref: inputRef,
                                                    type: "text",
                                                    value: query,
                                                    onChange: (e)=>setQuery(e.target.value),
                                                    placeholder: "Ask Agent TARS anything...",
                                                    className: "w-full px-6 py-6 text-xl bg-transparent outline-none text-gray-800 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500",
                                                    disabled: isLoading || isDirectChatLoading
                                                }, void 0, false, {
                                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                                    lineNumber: 142,
                                                    columnNumber: 17
                                                }, undefined),
                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                    className: "absolute right-4 inset-y-0 flex items-center",
                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_4__.motion.button, {
                                                        whileTap: {
                                                            scale: 0.95
                                                        },
                                                        type: "submit",
                                                        disabled: !query.trim() || isLoading || isDirectChatLoading,
                                                        className: `p-4 rounded-xl transition-all duration-200 ${!query.trim() || isLoading || isDirectChatLoading ? 'bg-gray-100 dark:bg-gray-700 text-gray-400 cursor-not-allowed' : 'bg-gradient-to-r from-indigo-500 to-purple-600 text-white shadow-md'}`,
                                                        children: isLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_4__.motion.div, {
                                                            animate: {
                                                                rotate: 360
                                                            },
                                                            transition: {
                                                                duration: 1,
                                                                repeat: Infinity,
                                                                ease: 'linear'
                                                            },
                                                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("svg", {
                                                                className: "w-6 h-6",
                                                                viewBox: "0 0 24 24",
                                                                fill: "none",
                                                                xmlns: "http://www.w3.org/2000/svg",
                                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("path", {
                                                                    d: "M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12",
                                                                    stroke: "currentColor",
                                                                    strokeWidth: "2",
                                                                    strokeLinecap: "round",
                                                                    strokeLinejoin: "round"
                                                                }, void 0, false, {
                                                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                                                    lineNumber: 175,
                                                                    columnNumber: 27
                                                                }, undefined)
                                                            }, void 0, false, {
                                                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                                                lineNumber: 169,
                                                                columnNumber: 25
                                                            }, undefined)
                                                        }, void 0, false, {
                                                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                                            lineNumber: 165,
                                                            columnNumber: 23
                                                        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_5__.FiArrowRight, {
                                                            size: 22
                                                        }, void 0, false, {
                                                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                                            lineNumber: 185,
                                                            columnNumber: 23
                                                        }, undefined)
                                                    }, void 0, false, {
                                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                                        lineNumber: 154,
                                                        columnNumber: 19
                                                    }, undefined)
                                                }, void 0, false, {
                                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                                    lineNumber: 153,
                                                    columnNumber: 17
                                                }, undefined)
                                            ]
                                        }, void 0, true, {
                                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                            lineNumber: 141,
                                            columnNumber: 15
                                        }, undefined)
                                    ]
                                }, void 0, true, {
                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                    lineNumber: 136,
                                    columnNumber: 13
                                }, undefined),
                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_4__.motion.div, {
                                    initial: {
                                        opacity: 0,
                                        y: 10
                                    },
                                    animate: {
                                        opacity: 1,
                                        y: 0
                                    },
                                    transition: {
                                        duration: 0.3,
                                        delay: 0.4
                                    },
                                    className: "flex justify-end mt-3 mr-1",
                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_4__.motion.button, {
                                        whileHover: {
                                            scale: 1.01
                                        },
                                        whileTap: {
                                            scale: 0.98
                                        },
                                        onClick: handleDirectChat,
                                        disabled: isLoading || isDirectChatLoading,
                                        className: `flex items-center gap-1.5 py-1.5 px-2 text-sm text-gray-500 dark:text-gray-400 relative group transition-colors duration-300 ${isLoading || isDirectChatLoading ? 'opacity-60 cursor-not-allowed' : 'cursor-pointer group-hover:text-gray-900 dark:group-hover:text-gray-100'}`,
                                        type: "button",
                                        children: [
                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("span", {
                                                className: "group-hover:text-gray-900 dark:group-hover:text-gray-100 transition-colors duration-300",
                                                children: "Go to task history"
                                            }, void 0, false, {
                                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                                lineNumber: 211,
                                                columnNumber: 17
                                            }, undefined),
                                            isDirectChatLoading ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_4__.motion.div, {
                                                animate: {
                                                    rotate: 360
                                                },
                                                transition: {
                                                    duration: 1,
                                                    repeat: Infinity,
                                                    ease: 'linear'
                                                },
                                                className: "w-4 h-4",
                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("svg", {
                                                    className: "w-4 h-4 text-gray-500 dark:text-gray-400",
                                                    viewBox: "0 0 24 24",
                                                    fill: "none",
                                                    xmlns: "http://www.w3.org/2000/svg",
                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("path", {
                                                        d: "M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12",
                                                        stroke: "currentColor",
                                                        strokeWidth: "2",
                                                        strokeLinecap: "round",
                                                        strokeLinejoin: "round"
                                                    }, void 0, false, {
                                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                                        lineNumber: 226,
                                                        columnNumber: 23
                                                    }, undefined)
                                                }, void 0, false, {
                                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                                    lineNumber: 220,
                                                    columnNumber: 21
                                                }, undefined)
                                            }, void 0, false, {
                                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                                lineNumber: 215,
                                                columnNumber: 19
                                            }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_5__.FiArrowUpRight, {
                                                className: "text-gray-500 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-gray-100 transition-colors duration-300",
                                                size: 14
                                            }, void 0, false, {
                                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                                lineNumber: 236,
                                                columnNumber: 19
                                            }, undefined),
                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("span", {
                                                className: "absolute bottom-0 left-0 w-0 h-[1px] bg-gray-500 dark:bg-gray-400 group-hover:w-full group-hover:bg-gray-900 dark:group-hover:bg-gray-100 transition-all duration-300"
                                            }, void 0, false, {
                                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                                lineNumber: 241,
                                                columnNumber: 17
                                            }, undefined)
                                        ]
                                    }, void 0, true, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                        lineNumber: 199,
                                        columnNumber: 15
                                    }, undefined)
                                }, void 0, false, {
                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                    lineNumber: 193,
                                    columnNumber: 13
                                }, undefined),
                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                    className: "mt-6 flex flex-wrap justify-center gap-2",
                                    children: examplePrompts.map((prompt, index)=>/*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_4__.motion.button, {
                                            initial: {
                                                opacity: 0,
                                                y: 10
                                            },
                                            animate: {
                                                opacity: 1,
                                                y: 0
                                            },
                                            transition: {
                                                duration: 0.3,
                                                delay: 0.4 + index * 0.1
                                            },
                                            type: "button",
                                            onClick: ()=>setQuery(prompt),
                                            className: "text-sm px-4 py-2 rounded-full bg-white dark:bg-gray-800 border border-gray-200/50 dark:border-gray-700/30 hover:bg-gray-50 dark:hover:bg-gray-700/50 text-gray-600 dark:text-gray-300 transition-colors",
                                            children: prompt
                                        }, index, false, {
                                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                            lineNumber: 248,
                                            columnNumber: 17
                                        }, undefined))
                                }, void 0, false, {
                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                    lineNumber: 246,
                                    columnNumber: 13
                                }, undefined)
                            ]
                        }, void 0, true, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                            lineNumber: 135,
                            columnNumber: 11
                        }, undefined)
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                        lineNumber: 129,
                        columnNumber: 9
                    }, undefined),
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_4__.motion.div, {
                        initial: {
                            opacity: 0
                        },
                        animate: {
                            opacity: 1
                        },
                        transition: {
                            duration: 0.5,
                            delay: 0.7
                        },
                        className: "mt-12 text-center",
                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                            className: "inline-flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",
                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("span", {
                                children: "Powered by UI-TARS Vision-Language Model"
                            }, void 0, false, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                                lineNumber: 272,
                                columnNumber: 13
                            }, undefined)
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                            lineNumber: 271,
                            columnNumber: 11
                        }, undefined)
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                        lineNumber: 265,
                        columnNumber: 9
                    }, undefined)
                ]
            }, void 0, true, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
                lineNumber: 112,
                columnNumber: 7
            }, undefined)
        ]
    }, void 0, true, {
        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/home/WelcomePage.tsx",
        lineNumber: 89,
        columnNumber: 5
    }, undefined);
};
_s(WelcomePage, "X+aKVMZIjO6Yz99o8bo+V7lpsrw=", false, function() {
    return [
        react_router_dom__WEBPACK_IMPORTED_MODULE_3__.useNavigate,
        _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__.useSession
    ];
});
_c = WelcomePage;
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (WelcomePage);
var _c;
$RefreshReg$(_c, "WelcomePage");

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/standalone/replay/TimelineSlider.tsx": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  TimelineSlider: () => (TimelineSlider)
});
/* ESM import */var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* ESM import */var framer_motion__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("../node_modules/.pnpm/framer-motion@10.18.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/framer-motion/dist/es/render/dom/motion.mjs");
/* ESM import */var react_icons_fi__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("../node_modules/.pnpm/react-icons@4.12.0_react@18.3.1/node_modules/react-icons/fi/index.esm.js");
/* ESM import */var _common_utils_formatters__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/common/utils/formatters.ts");
/* ESM import */var _common_hooks_useReplay__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/common/hooks/useReplay.ts");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

var _s = $RefreshSig$();





/**
 * TimelineSlider - Interactive timeline for replay navigation
 *
 * Enhanced with:
 * - Monochromatic design matching the app's black/gray aesthetic
 * - Subtle markers with minimal visual noise
 * - No box shadows or gradients
 */ const TimelineSlider = ()=>{
    _s();
    const { replayState, jumpToPosition, getCurrentPosition, getCurrentEvent } = (0,_common_hooks_useReplay__WEBPACK_IMPORTED_MODULE_3__.useReplay)();
    const sliderRef = (0,react__WEBPACK_IMPORTED_MODULE_1__.useRef)(null);
    const [isDragging, setIsDragging] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);
    const [hoverPosition, setHoverPosition] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);
    const [hoverEvent, setHoverEvent] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);
    const { events } = replayState;
    const currentPosition = getCurrentPosition();
    const currentEvent = getCurrentEvent();
    // Handle mouse down on slider
    const handleMouseDown = (e)=>{
        if (!sliderRef.current) return;
        setIsDragging(true);
        updatePositionFromMouse(e);
    };
    // Handle mouse move for dragging and hover feedback
    const handleMouseMove = (e)=>{
        if (!sliderRef.current) return;
        // Update hover position and event
        const rect = sliderRef.current.getBoundingClientRect();
        const position = (e.clientX - rect.left) / rect.width;
        setHoverPosition(position);
        // Find event closest to hover position
        if (events.length > 0) {
            const index = Math.floor(position * events.length);
            const boundedIndex = Math.max(0, Math.min(index, events.length - 1));
            setHoverEvent(events[boundedIndex]);
        }
        // Update position if dragging
        if (isDragging) {
            updatePositionFromMouse(e);
        }
    };
    // Handle mouse up to end dragging
    const handleMouseUp = ()=>{
        setIsDragging(false);
    };
    // Calculate position from mouse event
    const updatePositionFromMouse = (e)=>{
        if (!sliderRef.current) return;
        const rect = sliderRef.current.getBoundingClientRect();
        const position = (e.clientX - rect.left) / rect.width;
        jumpToPosition(position);
    };
    // Handle mouse leave
    const handleMouseLeave = ()=>{
        setHoverPosition(null);
        setHoverEvent(null);
        setIsDragging(false);
    };
    // Add global mouse up handler when dragging
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        if (isDragging) {
            const handleGlobalMouseUp = ()=>setIsDragging(false);
            window.addEventListener('mouseup', handleGlobalMouseUp);
            return ()=>window.removeEventListener('mouseup', handleGlobalMouseUp);
        }
    }, [
        isDragging
    ]);
    // Get color for event marker
    const getEventColor = (event)=>{
        switch(event.type){
            case 'user_message':
                return 'bg-gray-400 dark:bg-gray-500';
            case 'assistant_message':
                return 'bg-gray-600 dark:bg-gray-400';
            case 'tool_call':
            case 'tool_result':
                return 'bg-gray-500 dark:bg-gray-400';
            case 'environment_input':
                return 'bg-gray-500 dark:bg-gray-400';
            case 'plan_update':
            case 'plan_finish':
                return 'bg-gray-500 dark:bg-gray-400';
            case 'final_answer':
                return 'bg-gray-700 dark:bg-gray-300';
            default:
                return 'bg-gray-400 dark:bg-gray-500';
        }
    };
    // Get icon for event type (for tooltip)
    const getEventIcon = (event)=>{
        switch(event.type){
            case 'user_message':
                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_4__.FiMessageSquare, {
                    size: 14,
                    className: "text-gray-700 dark:text-gray-300"
                }, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                    lineNumber: 114,
                    columnNumber: 16
                }, undefined);
            case 'assistant_message':
                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_4__.FiMessageSquare, {
                    size: 14,
                    className: "text-gray-700 dark:text-gray-300"
                }, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                    lineNumber: 116,
                    columnNumber: 16
                }, undefined);
            case 'tool_call':
            case 'tool_result':
                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_4__.FiTool, {
                    size: 14,
                    className: "text-gray-700 dark:text-gray-300"
                }, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                    lineNumber: 119,
                    columnNumber: 16
                }, undefined);
            case 'environment_input':
                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_4__.FiImage, {
                    size: 14,
                    className: "text-gray-700 dark:text-gray-300"
                }, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                    lineNumber: 121,
                    columnNumber: 16
                }, undefined);
            case 'plan_update':
            case 'plan_finish':
                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_4__.FiCpu, {
                    size: 14,
                    className: "text-gray-700 dark:text-gray-300"
                }, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                    lineNumber: 124,
                    columnNumber: 16
                }, undefined);
            case 'final_answer':
                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_4__.FiBookOpen, {
                    size: 14,
                    className: "text-gray-700 dark:text-gray-300"
                }, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                    lineNumber: 126,
                    columnNumber: 16
                }, undefined);
            default:
                return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_4__.FiMessageSquare, {
                    size: 14,
                    className: "text-gray-700 dark:text-gray-300"
                }, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                    lineNumber: 128,
                    columnNumber: 16
                }, undefined);
        }
    };
    // Get event description for hover tooltip
    const getEventDescription = (event)=>{
        switch(event.type){
            case 'user_message':
                return 'User Message';
            case 'assistant_message':
                return 'Assistant Response';
            case 'tool_call':
                return `Tool Call: ${event.name || ''}`;
            case 'tool_result':
                return `Tool Result: ${event.name || ''}`;
            case 'environment_input':
                return 'Browser Screenshot';
            case 'plan_update':
                return 'Plan Update';
            case 'plan_finish':
                return 'Plan Completed';
            case 'final_answer':
                return 'Research Report';
            default:
                return event.type;
        }
    };
    // Get event content preview for the tooltip
    const getEventContentPreview = (event)=>{
        if (event.type === 'user_message' || event.type === 'assistant_message') {
            const content = typeof event.content === 'string' ? event.content : Array.isArray(event.content) && event.content.length > 0 && event.content[0].type === 'text' ? event.content[0].text : '';
            return content.length > 50 ? content.substring(0, 47) + '...' : content;
        }
        return '';
    };
    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
        className: "relative px-3 py-2 rounded-xl bg-gray-100 dark:bg-gray-800 border border-gray-200/50 dark:border-gray-700/30",
        children: [
            currentEvent && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                className: "absolute left-3 top-0 text-xs text-gray-500 dark:text-gray-400 py-1",
                children: (0,_common_utils_formatters__WEBPACK_IMPORTED_MODULE_2__.formatTimestamp)(currentEvent.timestamp)
            }, void 0, false, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                lineNumber: 177,
                columnNumber: 9
            }, undefined),
            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                ref: sliderRef,
                className: "relative h-6 mt-4 cursor-pointer",
                onMouseDown: handleMouseDown,
                onMouseMove: handleMouseMove,
                onMouseUp: handleMouseLeave,
                onMouseLeave: handleMouseLeave,
                children: [
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                        className: "absolute inset-0 top-1/2 -translate-y-1/2 h-1.5 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden"
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                        lineNumber: 192,
                        columnNumber: 9
                    }, undefined),
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                        className: "absolute top-1/2 -translate-y-1/2 left-0 h-1.5 bg-gray-800 dark:bg-gray-300 rounded-full",
                        style: {
                            width: `${currentPosition}%`
                        }
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                        lineNumber: 197,
                        columnNumber: 9
                    }, undefined),
                    events.map((event, index)=>{
                        const position = index / (events.length - 1) * 100;
                        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
                            className: `absolute top-1/2 -translate-y-1/2 w-1.5 h-3 ${getEventColor(event)} rounded-sm`,
                            style: {
                                left: `${position}%`,
                                marginLeft: '-1px'
                            },
                            initial: {
                                opacity: 0.6,
                                height: 3
                            },
                            animate: {
                                opacity: 0.8,
                                height: (currentEvent === null || currentEvent === void 0 ? void 0 : currentEvent.id) === event.id ? 5 : 3
                            },
                            whileHover: {
                                opacity: 1,
                                height: 5
                            },
                            transition: {
                                duration: 0.2
                            }
                        }, `${event.id}-${index}`, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                            lineNumber: 207,
                            columnNumber: 13
                        }, undefined);
                    }),
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
                        className: "absolute top-[5px] -translate-y-1/2 w-4 h-4 rounded-full bg-white dark:bg-gray-200 border-2 border-gray-800 dark:border-gray-600 z-30",
                        style: {
                            left: `calc(${currentPosition}% - 8px)`
                        },
                        animate: {
                            scale: isDragging ? 1.2 : 1
                        },
                        transition: {
                            duration: 0.2
                        }
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                        lineNumber: 223,
                        columnNumber: 9
                    }, undefined),
                    hoverPosition !== null && !isDragging && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
                        className: "absolute top-1/2 -translate-y-1/2 w-1 h-8 bg-gray-400/40 dark:bg-gray-500/40 rounded-full z-10",
                        style: {
                            left: `${hoverPosition * 100}%`
                        },
                        initial: {
                            opacity: 0
                        },
                        animate: {
                            opacity: 1
                        },
                        transition: {
                            duration: 0.2
                        }
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                        lineNumber: 234,
                        columnNumber: 11
                    }, undefined)
                ]
            }, void 0, true, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                lineNumber: 183,
                columnNumber: 7
            }, undefined),
            hoverEvent && hoverPosition !== null && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
                className: "absolute bottom-full mb-2 p-2 bg-gray-100 dark:bg-gray-800 rounded-lg border border-gray-200/50 dark:border-gray-700/30 text-xs max-w-xs z-50",
                style: {
                    left: `${hoverPosition * 100}%`,
                    transform: 'translateX(-50%)'
                },
                initial: {
                    opacity: 0,
                    y: 5,
                    scale: 0.95
                },
                animate: {
                    opacity: 1,
                    y: 0,
                    scale: 1
                },
                transition: {
                    duration: 0.2
                },
                children: [
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                        className: "flex items-start gap-2",
                        children: [
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                className: "mt-0.5 flex-shrink-0",
                                children: getEventIcon(hoverEvent)
                            }, void 0, false, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                                lineNumber: 257,
                                columnNumber: 13
                            }, undefined),
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                children: [
                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                        className: "font-medium text-gray-800 dark:text-gray-200",
                                        children: getEventDescription(hoverEvent)
                                    }, void 0, false, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                                        lineNumber: 259,
                                        columnNumber: 15
                                    }, undefined),
                                    getEventContentPreview(hoverEvent) && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                        className: "mt-1 text-gray-600 dark:text-gray-400 italic line-clamp-2 text-[10px]",
                                        children: [
                                            '"',
                                            getEventContentPreview(hoverEvent),
                                            '"'
                                        ]
                                    }, void 0, true, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                                        lineNumber: 264,
                                        columnNumber: 17
                                    }, undefined),
                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                        className: "mt-1 text-[10px] text-gray-500 dark:text-gray-400",
                                        children: (0,_common_utils_formatters__WEBPACK_IMPORTED_MODULE_2__.formatTimestamp)(hoverEvent.timestamp)
                                    }, void 0, false, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                                        lineNumber: 269,
                                        columnNumber: 15
                                    }, undefined)
                                ]
                            }, void 0, true, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                                lineNumber: 258,
                                columnNumber: 13
                            }, undefined)
                        ]
                    }, void 0, true, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                        lineNumber: 256,
                        columnNumber: 11
                    }, undefined),
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                        className: "absolute left-1/2 bottom-0 w-2 h-2 bg-gray-100 dark:bg-gray-800 border-r border-b border-gray-200/50 dark:border-gray-700/30 transform rotate-45 translate-y-1 -translate-x-1"
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                        lineNumber: 276,
                        columnNumber: 11
                    }, undefined)
                ]
            }, void 0, true, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
                lineNumber: 246,
                columnNumber: 9
            }, undefined)
        ]
    }, void 0, true, {
        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/replay/TimelineSlider.tsx",
        lineNumber: 174,
        columnNumber: 5
    }, undefined);
};
_s(TimelineSlider, "HmuWsn5nZtHTESVs057N71yXgWc=", false, function() {
    return [
        _common_hooks_useReplay__WEBPACK_IMPORTED_MODULE_3__.useReplay
    ];
});
_c = TimelineSlider;
var _c;
$RefreshReg$(_c, "TimelineSlider");

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/standalone/share/ShareButton.tsx": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ShareButton: () => (ShareButton)
});
/* ESM import */var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* ESM import */var framer_motion__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("../node_modules/.pnpm/framer-motion@10.18.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/framer-motion/dist/es/render/dom/motion.mjs");
/* ESM import */var react_icons_fi__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("../node_modules/.pnpm/react-icons@4.12.0_react@18.3.1/node_modules/react-icons/fi/index.esm.js");
/* ESM import */var _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/common/hooks/useSession.ts");
/* ESM import */var _ShareModal__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/standalone/share/ShareModal.tsx");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

var _s = $RefreshSig$();





/**
 * 分享按钮组件 - 显示在聊天面板底部或导航栏
 *
 * 设计原则:
 * - 简洁的单色图标，与整体黑白灰风格保持一致
 * - 圆形按钮设计，保持优雅的视觉效果
 * - 精细的悬停和点击动画，提升交互体验
 * - 支持不同的展示变体以适应不同位置
 */ const ShareButton = (param)=>{
    let { variant = 'default' } = param;
    _s();
    const [isModalOpen, setIsModalOpen] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(false);
    const { activeSessionId } = (0,_common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__.useSession)();
    const handleOpenModal = ()=>{
        setIsModalOpen(true);
    };
    const handleCloseModal = ()=>{
        setIsModalOpen(false);
    };
    if (!activeSessionId) {
        return null;
    }
    // Navbar variant has different styling
    if (variant === 'navbar') {
        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
            children: [
                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_4__.motion.button, {
                    whileHover: {
                        scale: 1.05
                    },
                    whileTap: {
                        scale: 0.95
                    },
                    onClick: handleOpenModal,
                    className: "p-2 text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200 hover:bg-gray-100/40 dark:hover:bg-gray-700/40 rounded-full transition-all duration-200",
                    title: "Share this conversation",
                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_5__.FiShare2, {
                        size: 16
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/share/ShareButton.tsx",
                        lineNumber: 47,
                        columnNumber: 11
                    }, undefined)
                }, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/share/ShareButton.tsx",
                    lineNumber: 40,
                    columnNumber: 9
                }, undefined),
                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ShareModal__WEBPACK_IMPORTED_MODULE_3__.ShareModal, {
                    isOpen: isModalOpen,
                    onClose: handleCloseModal,
                    sessionId: activeSessionId
                }, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/share/ShareButton.tsx",
                    lineNumber: 50,
                    columnNumber: 9
                }, undefined)
            ]
        }, void 0, true);
    }
    // Default variant (original styling)
    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
        children: [
            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_4__.motion.button, {
                whileHover: {
                    scale: 1.05
                },
                whileTap: {
                    scale: 0.95
                },
                onClick: handleOpenModal,
                className: "flex items-center gap-1.5 px-3 py-1.5 rounded-3xl text-xs text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 border border-gray-200/70 dark:border-gray-700/30 shadow-sm hover:bg-gray-50 dark:hover:bg-gray-700/70 transition-all duration-200",
                title: "Share this conversation",
                children: [
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_5__.FiShare2, {
                        className: "text-gray-500 dark:text-gray-400",
                        size: 14
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/share/ShareButton.tsx",
                        lineNumber: 65,
                        columnNumber: 9
                    }, undefined),
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("span", {
                        children: "Share"
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/share/ShareButton.tsx",
                        lineNumber: 66,
                        columnNumber: 9
                    }, undefined)
                ]
            }, void 0, true, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/share/ShareButton.tsx",
                lineNumber: 58,
                columnNumber: 7
            }, undefined),
            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ShareModal__WEBPACK_IMPORTED_MODULE_3__.ShareModal, {
                isOpen: isModalOpen,
                onClose: handleCloseModal,
                sessionId: activeSessionId
            }, void 0, false, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/share/ShareButton.tsx",
                lineNumber: 69,
                columnNumber: 7
            }, undefined)
        ]
    }, void 0, true);
};
_s(ShareButton, "DEy3S4O1hbKiWAaxGBv+Dv5HRSo=", false, function() {
    return [
        _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__.useSession
    ];
});
_c = ShareButton;
var _c;
$RefreshReg$(_c, "ShareButton");

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/standalone/sidebar/SidebarContainer.tsx": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  SidebarContainer: () => (SidebarContainer),
  "default": () => (__WEBPACK_DEFAULT_EXPORT__)
});
/* ESM import */var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* ESM import */var _ToolBar__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/standalone/sidebar/ToolBar.tsx");
/* ESM import */var _ChatSession__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/standalone/sidebar/ChatSession.tsx");
/* ESM import */var _common_hooks_useLayout__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/common/hooks/useLayout.ts");
/* ESM import */var _common_hooks_useReplayMode__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/common/hooks/useReplayMode.tsx");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

var _s = $RefreshSig$();





/**
 * SidebarContainer - Container component that orchestrates the sidebar layout
 *
 * Design principles:
 * - Manages the layout of ToolBar and ChatSession components
 * - Handles conditional rendering based on replay mode
 * - Maintains proper spacing and alignment between components
 * - Provides a clean interface for the main layout
 */ const SidebarContainer = ()=>{
    _s();
    const { isSidebarCollapsed } = (0,_common_hooks_useLayout__WEBPACK_IMPORTED_MODULE_4__.useLayout)();
    const isReplayMode = (0,_common_hooks_useReplayMode__WEBPACK_IMPORTED_MODULE_5__.useReplayMode)();
    // In replay mode, only show the ToolBar
    if (isReplayMode) {
        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
            className: "flex h-full",
            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ToolBar__WEBPACK_IMPORTED_MODULE_2__.ToolBar, {}, void 0, false, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/sidebar/SidebarContainer.tsx",
                lineNumber: 24,
                columnNumber: 9
            }, undefined)
        }, void 0, false, {
            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/sidebar/SidebarContainer.tsx",
            lineNumber: 23,
            columnNumber: 7
        }, undefined);
    }
    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
        className: "flex h-full",
        children: [
            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ToolBar__WEBPACK_IMPORTED_MODULE_2__.ToolBar, {}, void 0, false, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/sidebar/SidebarContainer.tsx",
                lineNumber: 31,
                columnNumber: 7
            }, undefined),
            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_ChatSession__WEBPACK_IMPORTED_MODULE_3__.ChatSession, {
                isCollapsed: isSidebarCollapsed
            }, void 0, false, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/sidebar/SidebarContainer.tsx",
                lineNumber: 32,
                columnNumber: 7
            }, undefined)
        ]
    }, void 0, true, {
        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/sidebar/SidebarContainer.tsx",
        lineNumber: 30,
        columnNumber: 5
    }, undefined);
};
_s(SidebarContainer, "U5elFNc/pUvuafJyBejoVJlsAzQ=", false, function() {
    return [
        _common_hooks_useLayout__WEBPACK_IMPORTED_MODULE_4__.useLayout,
        _common_hooks_useReplayMode__WEBPACK_IMPORTED_MODULE_5__.useReplayMode
    ];
});
_c = SidebarContainer;
/* ESM default export */ const __WEBPACK_DEFAULT_EXPORT__ = (SidebarContainer);
var _c;
$RefreshReg$(_c, "SidebarContainer");

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/standalone/sidebar/ToolBar.tsx": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  ToolBar: () => (ToolBar)
});
/* ESM import */var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* ESM import */var framer_motion__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("../node_modules/.pnpm/framer-motion@10.18.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/framer-motion/dist/es/render/dom/motion.mjs");
/* ESM import */var react_icons_fi__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("../node_modules/.pnpm/react-icons@4.12.0_react@18.3.1/node_modules/react-icons/fi/index.esm.js");
/* ESM import */var react_router_dom__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("../node_modules/.pnpm/react-router@7.6.1_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/react-router/dist/development/chunk-DQRVZFIR.mjs");
/* ESM import */var _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/common/hooks/useSession.ts");
/* ESM import */var _common_hooks_useReplayMode__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/common/hooks/useReplayMode.tsx");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

var _s = $RefreshSig$();






/**
 * ToolBar Component - Vertical toolbar inspired by modern IDE designs
 *
 * Design principles:
 * - Minimalist vertical bar with icon-only actions
 * - Consistent visual language with subtle animations
 * - Quick access to essential functionality
 * - Always visible regardless of sidebar collapse state
 */ const ToolBar = ()=>{
    _s();
    const navigate = (0,react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useNavigate)();
    const isReplayMode = (0,_common_hooks_useReplayMode__WEBPACK_IMPORTED_MODULE_3__.useReplayMode)();
    const { createSession, connectionStatus } = (0,_common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__.useSession)();
    // Create new session
    const handleNewSession = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(async ()=>{
        try {
            const sessionId = await createSession();
            navigate(`/${sessionId}`);
        } catch (error) {
            console.error('Failed to create new session:', error);
        }
    }, [
        createSession,
        navigate
    ]);
    // Navigate to home
    const handleNavigateHome = (0,react__WEBPACK_IMPORTED_MODULE_1__.useCallback)(()=>{
        navigate('/');
    }, [
        navigate
    ]);
    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
        className: "w-14 h-full flex flex-col backdrop-blur-sm border-r border-gray-300/40 dark:border-gray-600/20",
        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
            className: "flex-1 flex flex-col items-center gap-4 py-4",
            children: [
                !isReplayMode && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.button, {
                    whileHover: {
                        scale: 1.08,
                        backgroundColor: connectionStatus.connected ? '#000000' : undefined,
                        boxShadow: connectionStatus.connected ? '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)' : undefined
                    },
                    whileTap: {
                        scale: 0.97
                    },
                    transition: {
                        type: 'spring',
                        stiffness: 400,
                        damping: 17
                    },
                    onClick: handleNewSession,
                    disabled: !connectionStatus.connected,
                    className: `w-8 h-8 rounded-lg flex items-center justify-center transition-all duration-200 ${connectionStatus.connected ? 'bg-gradient-to-r from-[#141414] to-[#1e1e1e] dark:from-gray-900 dark:to-gray-800 text-white hover:shadow-md' : 'bg-gray-400 text-white cursor-not-allowed opacity-60'}`,
                    title: connectionStatus.connected ? 'New Task' : 'Server disconnected',
                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_6__.FiPlus, {
                        size: 16
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/sidebar/ToolBar.tsx",
                        lineNumber: 63,
                        columnNumber: 13
                    }, undefined)
                }, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/sidebar/ToolBar.tsx",
                    lineNumber: 44,
                    columnNumber: 11
                }, undefined),
                !isReplayMode && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.button, {
                    whileHover: {
                        scale: 1.08,
                        backgroundColor: 'rgba(0, 0, 0, 0.06)',
                        boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03)'
                    },
                    whileTap: {
                        scale: 0.97
                    },
                    transition: {
                        type: 'spring',
                        stiffness: 400,
                        damping: 17
                    },
                    onClick: handleNavigateHome,
                    className: "w-8 h-8 rounded-lg flex items-center justify-center text-gray-700 dark:text-gray-300 hover:bg-gray-100/80 dark:hover:bg-gray-700/80 transition-all duration-200",
                    title: "Home",
                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_6__.FiHome, {
                        size: 16
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/sidebar/ToolBar.tsx",
                        lineNumber: 81,
                        columnNumber: 13
                    }, undefined)
                }, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/sidebar/ToolBar.tsx",
                    lineNumber: 69,
                    columnNumber: 11
                }, undefined)
            ]
        }, void 0, true, {
            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/sidebar/ToolBar.tsx",
            lineNumber: 41,
            columnNumber: 7
        }, undefined)
    }, void 0, false, {
        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/sidebar/ToolBar.tsx",
        lineNumber: 39,
        columnNumber: 5
    }, undefined);
};
_s(ToolBar, "Hdi/NM9JvBe10Ej9kYzsjL5Qbw4=", false, function() {
    return [
        react_router_dom__WEBPACK_IMPORTED_MODULE_4__.useNavigate,
        _common_hooks_useReplayMode__WEBPACK_IMPORTED_MODULE_3__.useReplayMode,
        _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__.useSession
    ];
});
_c = ToolBar;
var _c;
$RefreshReg$(_c, "ToolBar");

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/standalone/workspace/PlanView.tsx": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  PlanView: () => (PlanView)
});
/* ESM import */var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* ESM import */var framer_motion__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("../node_modules/.pnpm/framer-motion@10.18.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/framer-motion/dist/es/render/dom/motion.mjs");
/* ESM import */var react_icons_fi__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("../node_modules/.pnpm/react-icons@4.12.0_react@18.3.1/node_modules/react-icons/fi/index.esm.js");
/* ESM import */var _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/common/hooks/useSession.ts");
/* ESM import */var _common_hooks_usePlan__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/common/hooks/usePlan.ts");
/* ESM import */var _renderers_PlanViewerRenderer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/standalone/workspace/renderers/PlanViewerRenderer.tsx");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

var _s = $RefreshSig$();






/**
 * PlanView Component - Displays plan details in the workspace
 *
 * Features:
 * - Shows current plan status and steps
 * - Supports timeline navigation through plan keyframes
 * - Will support replay functionality in future
 */ const PlanView = (param)=>{
    let { onBack } = param;
    _s();
    const { activeSessionId } = (0,_common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__.useSession)();
    const { currentPlan } = (0,_common_hooks_usePlan__WEBPACK_IMPORTED_MODULE_3__.usePlan)(activeSessionId);
    const [currentKeyframeIndex, setCurrentKeyframeIndex] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(undefined);
    const [displayedPlan, setDisplayedPlan] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(currentPlan);
    // Set the initial keyframe to the latest when plan changes
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        var _currentPlan_keyframes;
        if (currentPlan === null || currentPlan === void 0 ? void 0 : (_currentPlan_keyframes = currentPlan.keyframes) === null || _currentPlan_keyframes === void 0 ? void 0 : _currentPlan_keyframes.length) {
            setCurrentKeyframeIndex(currentPlan.keyframes.length - 1);
        }
        setDisplayedPlan(currentPlan);
    }, [
        currentPlan
    ]);
    // Update displayed plan when keyframe changes
    (0,react__WEBPACK_IMPORTED_MODULE_1__.useEffect)(()=>{
        if ((currentPlan === null || currentPlan === void 0 ? void 0 : currentPlan.keyframes) && currentKeyframeIndex !== undefined) {
            const keyframe = currentPlan.keyframes[currentKeyframeIndex];
            if (keyframe) {
                setDisplayedPlan({
                    ...currentPlan,
                    steps: keyframe.steps,
                    isComplete: keyframe.isComplete,
                    summary: keyframe.summary,
                    currentKeyframeIndex
                });
            }
        }
    }, [
        currentPlan,
        currentKeyframeIndex
    ]);
    // Handle keyframe change
    const handleKeyframeChange = (index)=>{
        setCurrentKeyframeIndex(index);
    };
    if (!activeSessionId || !currentPlan || !displayedPlan) {
        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
            className: "flex items-center justify-center h-full",
            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
                initial: {
                    opacity: 0,
                    y: 10
                },
                animate: {
                    opacity: 1,
                    y: 0
                },
                transition: {
                    duration: 0.5
                },
                className: "text-center max-w-md p-8",
                children: [
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                        className: "w-20 h-20 mx-auto mb-6 rounded-3xl bg-gradient-to-br from-gray-100 to-gray-50 dark:from-gray-800 dark:to-gray-700 flex items-center justify-center border border-gray-200/50 dark:border-gray-700/30 shadow-sm",
                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_6__.FiMap, {
                            className: "text-gray-500 dark:text-gray-400",
                            size: 32
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                            lineNumber: 65,
                            columnNumber: 13
                        }, undefined)
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                        lineNumber: 64,
                        columnNumber: 11
                    }, undefined),
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("h3", {
                        className: "text-xl font-medium mb-3 text-gray-800 dark:text-gray-200",
                        children: "No Plan Available"
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                        lineNumber: 67,
                        columnNumber: 11
                    }, undefined),
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("p", {
                        className: "text-gray-600 dark:text-gray-400",
                        children: "The agent hasn't created a plan for this task yet, or the task was simple enough to not require planning."
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                        lineNumber: 70,
                        columnNumber: 11
                    }, undefined)
                ]
            }, void 0, true, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                lineNumber: 58,
                columnNumber: 9
            }, undefined)
        }, void 0, false, {
            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
            lineNumber: 57,
            columnNumber: 7
        }, undefined);
    }
    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
        initial: {
            opacity: 0
        },
        animate: {
            opacity: 1
        },
        exit: {
            opacity: 0
        },
        className: "h-full flex flex-col bg-gray-50/80 dark:bg-gray-900/20",
        children: [
            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                className: "flex items-center justify-between p-5 border-b border-gray-100/60 dark:border-gray-700/30 bg-white dark:bg-gray-800/90",
                children: [
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                        className: "flex items-center",
                        children: [
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.button, {
                                whileHover: {
                                    scale: 1.05,
                                    x: -2
                                },
                                whileTap: {
                                    scale: 0.95
                                },
                                onClick: onBack,
                                className: "mr-4 p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100/70 dark:hover:bg-gray-700/50 rounded-lg border border-transparent hover:border-gray-100/70 dark:hover:border-gray-700/50 bg-gray-50/80 dark:bg-gray-800/50",
                                title: "Back to workspace",
                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_6__.FiArrowLeft, {
                                    size: 18
                                }, void 0, false, {
                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                                    lineNumber: 96,
                                    columnNumber: 13
                                }, undefined)
                            }, void 0, false, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                                lineNumber: 89,
                                columnNumber: 11
                            }, undefined),
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                className: "w-10 h-10 mr-4 rounded-xl bg-gradient-to-br from-accent-50 to-accent-100 dark:from-accent-900/20 dark:to-accent-800/20 border border-accent-100/50 dark:border-accent-800/30 flex items-center justify-center text-accent-600 dark:text-accent-400",
                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_6__.FiCpu, {
                                    size: 18
                                }, void 0, false, {
                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                                    lineNumber: 100,
                                    columnNumber: 13
                                }, undefined)
                            }, void 0, false, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                                lineNumber: 99,
                                columnNumber: 11
                            }, undefined),
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                children: [
                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("h2", {
                                        className: "font-medium text-gray-800 dark:text-gray-200 text-lg leading-tight",
                                        children: "Task Plan"
                                    }, void 0, false, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                                        lineNumber: 104,
                                        columnNumber: 13
                                    }, undefined),
                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                        className: "text-xs flex items-center text-gray-500 dark:text-gray-400",
                                        children: displayedPlan.isComplete ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("span", {
                                            className: "flex items-center",
                                            children: [
                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_6__.FiCheckCircle, {
                                                    className: "mr-1 text-green-500 dark:text-green-400",
                                                    size: 12
                                                }, void 0, false, {
                                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                                                    lineNumber: 110,
                                                    columnNumber: 19
                                                }, undefined),
                                                "Completed"
                                            ]
                                        }, void 0, true, {
                                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                                            lineNumber: 109,
                                            columnNumber: 17
                                        }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("span", {
                                            className: "flex items-center",
                                            children: [
                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_6__.FiClock, {
                                                    className: "mr-1 text-accent-500 dark:text-accent-400",
                                                    size: 12
                                                }, void 0, false, {
                                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                                                    lineNumber: 115,
                                                    columnNumber: 19
                                                }, undefined),
                                                "In progress"
                                            ]
                                        }, void 0, true, {
                                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                                            lineNumber: 114,
                                            columnNumber: 17
                                        }, undefined)
                                    }, void 0, false, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                                        lineNumber: 107,
                                        columnNumber: 13
                                    }, undefined)
                                ]
                            }, void 0, true, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                                lineNumber: 103,
                                columnNumber: 11
                            }, undefined)
                        ]
                    }, void 0, true, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                        lineNumber: 88,
                        columnNumber: 9
                    }, undefined),
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                        className: "flex items-center space-x-2",
                        children: currentPlan.keyframes && currentPlan.keyframes.length > 1 && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                            className: "text-xs bg-gray-100/70 dark:bg-gray-800/70 px-3 py-1.5 rounded-full text-gray-600 dark:text-gray-400 border border-gray-200/50 dark:border-gray-700/30",
                            children: currentKeyframeIndex !== undefined && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("span", {
                                children: [
                                    "Keyframe ",
                                    currentKeyframeIndex + 1,
                                    " of ",
                                    currentPlan.keyframes.length
                                ]
                            }, void 0, true, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                                lineNumber: 128,
                                columnNumber: 17
                            }, undefined)
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                            lineNumber: 126,
                            columnNumber: 13
                        }, undefined)
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                        lineNumber: 124,
                        columnNumber: 9
                    }, undefined)
                ]
            }, void 0, true, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                lineNumber: 87,
                columnNumber: 7
            }, undefined),
            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                className: "flex-1 overflow-auto bg-gradient-to-b from-gray-50/80 to-gray-100/50 dark:from-gray-900/20 dark:to-gray-900/30",
                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_renderers_PlanViewerRenderer__WEBPACK_IMPORTED_MODULE_4__.PlanViewerRenderer, {
                    plan: {
                        ...displayedPlan,
                        keyframes: currentPlan.keyframes,
                        currentKeyframeIndex
                    },
                    onKeyframeChange: handleKeyframeChange
                }, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                    lineNumber: 139,
                    columnNumber: 9
                }, undefined)
            }, void 0, false, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
                lineNumber: 138,
                columnNumber: 7
            }, undefined)
        ]
    }, void 0, true, {
        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/PlanView.tsx",
        lineNumber: 80,
        columnNumber: 5
    }, undefined);
};
_s(PlanView, "xBww6x5eXeLrvkDiero806Fn8z4=", false, function() {
    return [
        _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__.useSession,
        _common_hooks_usePlan__WEBPACK_IMPORTED_MODULE_3__.usePlan
    ];
});
_c = PlanView;
var _c;
$RefreshReg$(_c, "PlanView");

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/standalone/workspace/WorkspaceContent.tsx": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  WorkspaceContent: () => (WorkspaceContent)
});
/* ESM import */var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* ESM import */var framer_motion__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("../node_modules/.pnpm/framer-motion@10.18.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/framer-motion/dist/es/render/dom/motion.mjs");
/* ESM import */var _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/common/hooks/useSession.ts");
/* ESM import */var _common_hooks_usePlan__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/common/hooks/usePlan.ts");
/* ESM import */var react_icons_fi__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("../node_modules/.pnpm/react-icons@4.12.0_react@18.3.1/node_modules/react-icons/fi/index.esm.js");
/* ESM import */var _Workspace_css__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/standalone/workspace/Workspace.css");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

var _s = $RefreshSig$();






/**
 * WorkspaceContent Component - Enhanced workspace with beautiful empty state
 *
 * Design principles:
 * - Focus on plan display for Pro users
 * - Beautiful empty state when no content is available
 * - Clean visual hierarchy and elegant animations
 */ const WorkspaceContent = ()=>{
    _s();
    const { activeSessionId, setActivePanelContent } = (0,_common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__.useSession)();
    const { currentPlan } = (0,_common_hooks_usePlan__WEBPACK_IMPORTED_MODULE_3__.usePlan)(activeSessionId);
    // Animation variants
    const containerVariants = {
        initial: {
            opacity: 0
        },
        animate: {
            opacity: 1,
            transition: {
                staggerChildren: 0.1,
                delayChildren: 0.1
            }
        }
    };
    const itemVariants = {
        initial: {
            opacity: 0,
            y: 20
        },
        animate: {
            opacity: 1,
            y: 0,
            transition: {
                duration: 0.6,
                ease: [
                    0.19,
                    1,
                    0.22,
                    1
                ]
            }
        }
    };
    // Plan view button for Pro users
    const renderPlanButton = ()=>{
        if (!currentPlan || !currentPlan.hasGeneratedPlan || currentPlan.steps.length === 0) return null;
        const completedSteps = currentPlan.steps.filter((step)=>step.done).length;
        const totalSteps = currentPlan.steps.length;
        const isComplete = currentPlan.isComplete;
        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
            variants: itemVariants,
            className: "mb-6",
            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
                whileHover: {
                    y: -4,
                    boxShadow: '0 10px 25px -5px rgba(0, 0, 0, 0.05), 0 8px 10px -6px rgba(0, 0, 0, 0.02)'
                },
                whileTap: {
                    scale: 0.98
                },
                onClick: ()=>setActivePanelContent({
                        type: 'plan',
                        source: null,
                        title: 'Task Plan',
                        timestamp: Date.now()
                    }),
                className: "bg-white dark:bg-gray-800/90 rounded-2xl border border-[#E5E6EC]/70 dark:border-gray-700/40 overflow-hidden cursor-pointer transition-all duration-300 shadow-sm hover:shadow-md",
                children: [
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                        className: "p-5",
                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                            className: "flex items-start",
                            children: [
                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                    className: `w-14 h-14 rounded-2xl flex items-center justify-center mr-4 flex-shrink-0 ${isComplete ? 'bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/20 dark:to-green-800/20 text-green-600 dark:text-green-400 border border-green-100/80 dark:border-green-800/40' : 'bg-gradient-to-br from-accent-50 to-accent-100 dark:from-accent-900/20 dark:to-accent-800/20 text-accent-500 dark:text-accent-400 border border-accent-100/50 dark:border-accent-800/30'}`,
                                    children: isComplete ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_6__.FiCpu, {
                                        size: 24
                                    }, void 0, false, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                        lineNumber: 86,
                                        columnNumber: 19
                                    }, undefined) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
                                        animate: {
                                            scale: [
                                                1,
                                                1.08,
                                                1
                                            ]
                                        },
                                        transition: {
                                            duration: 2.5,
                                            repeat: Infinity,
                                            ease: 'easeInOut'
                                        },
                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_6__.FiCpu, {
                                            size: 24
                                        }, void 0, false, {
                                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                            lineNumber: 92,
                                            columnNumber: 21
                                        }, undefined)
                                    }, void 0, false, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                        lineNumber: 88,
                                        columnNumber: 19
                                    }, undefined)
                                }, void 0, false, {
                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                    lineNumber: 78,
                                    columnNumber: 15
                                }, undefined),
                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                    className: "flex-1 min-w-0",
                                    children: [
                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                            className: "flex items-start justify-between",
                                            children: [
                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("h4", {
                                                    className: "font-medium text-gray-900 dark:text-gray-100 text-lg mb-1 truncate pr-2",
                                                    children: "Task Plan"
                                                }, void 0, false, {
                                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                    lineNumber: 98,
                                                    columnNumber: 19
                                                }, undefined),
                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                    className: "flex items-center text-xs",
                                                    children: [
                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("span", {
                                                            className: `w-2 h-2 rounded-full mr-1.5 ${isComplete ? 'bg-green-500 dark:bg-green-400' : 'bg-accent-500 dark:bg-accent-400'}`
                                                        }, void 0, false, {
                                                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                            lineNumber: 102,
                                                            columnNumber: 21
                                                        }, undefined),
                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("span", {
                                                            className: "text-gray-500 dark:text-gray-400",
                                                            children: isComplete ? 'Completed' : 'In progress'
                                                        }, void 0, false, {
                                                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                            lineNumber: 109,
                                                            columnNumber: 21
                                                        }, undefined)
                                                    ]
                                                }, void 0, true, {
                                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                    lineNumber: 101,
                                                    columnNumber: 19
                                                }, undefined)
                                            ]
                                        }, void 0, true, {
                                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                            lineNumber: 97,
                                            columnNumber: 17
                                        }, undefined),
                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                            className: "text-sm text-gray-600 dark:text-gray-400 mb-4",
                                            children: isComplete ? 'All planned steps have been completed successfully.' : 'The agent is executing a plan to accomplish your task.'
                                        }, void 0, false, {
                                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                            lineNumber: 115,
                                            columnNumber: 17
                                        }, undefined),
                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                            className: "mt-1 mb-2",
                                            children: [
                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                    className: "flex justify-between items-center mb-1.5 text-xs",
                                                    children: [
                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("span", {
                                                            className: "text-gray-600 dark:text-gray-400",
                                                            children: "Progress"
                                                        }, void 0, false, {
                                                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                            lineNumber: 124,
                                                            columnNumber: 21
                                                        }, undefined),
                                                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("span", {
                                                            className: "text-gray-700 dark:text-gray-300 font-medium",
                                                            children: [
                                                                completedSteps,
                                                                "/",
                                                                totalSteps
                                                            ]
                                                        }, void 0, true, {
                                                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                            lineNumber: 125,
                                                            columnNumber: 21
                                                        }, undefined)
                                                    ]
                                                }, void 0, true, {
                                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                    lineNumber: 123,
                                                    columnNumber: 19
                                                }, undefined),
                                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                    className: "h-2 bg-gray-100 dark:bg-gray-700/70 rounded-full overflow-hidden",
                                                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                        className: `h-full ${isComplete ? 'bg-gradient-to-r from-green-400 to-green-500 dark:from-green-500 dark:to-green-400' : 'bg-gradient-to-r from-accent-400 to-accent-500 dark:from-accent-500 dark:to-accent-400'}`,
                                                        style: {
                                                            width: `${totalSteps ? completedSteps / totalSteps * 100 : 0}%`
                                                        }
                                                    }, void 0, false, {
                                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                        lineNumber: 130,
                                                        columnNumber: 21
                                                    }, undefined)
                                                }, void 0, false, {
                                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                    lineNumber: 129,
                                                    columnNumber: 19
                                                }, undefined)
                                            ]
                                        }, void 0, true, {
                                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                            lineNumber: 122,
                                            columnNumber: 17
                                        }, undefined)
                                    ]
                                }, void 0, true, {
                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                    lineNumber: 96,
                                    columnNumber: 15
                                }, undefined)
                            ]
                        }, void 0, true, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                            lineNumber: 77,
                            columnNumber: 13
                        }, undefined)
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                        lineNumber: 76,
                        columnNumber: 11
                    }, undefined),
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                        className: "bg-gradient-to-b from-gray-50/70 to-gray-50 dark:from-gray-800/50 dark:to-gray-800/80 px-5 py-3 border-t border-[#E5E6EC]/50 dark:border-gray-700/30 flex justify-between items-center",
                        children: [
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                className: "flex items-center text-sm text-gray-500 dark:text-gray-400",
                                children: "View plan details"
                            }, void 0, false, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                lineNumber: 145,
                                columnNumber: 13
                            }, undefined),
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                className: "flex items-center text-sm",
                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_6__.FiArrowRight, {
                                    className: "text-accent-500 dark:text-accent-400",
                                    size: 16
                                }, void 0, false, {
                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                    lineNumber: 149,
                                    columnNumber: 15
                                }, undefined)
                            }, void 0, false, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                lineNumber: 148,
                                columnNumber: 13
                            }, undefined)
                        ]
                    }, void 0, true, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                        lineNumber: 144,
                        columnNumber: 11
                    }, undefined)
                ]
            }, void 0, true, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                lineNumber: 60,
                columnNumber: 9
            }, undefined)
        }, void 0, false, {
            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
            lineNumber: 59,
            columnNumber: 7
        }, undefined);
    };
    // Enhanced empty state when no session
    if (!activeSessionId) {
        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
            variants: containerVariants,
            initial: "initial",
            animate: "animate",
            className: "flex items-center justify-center h-full text-center py-12",
            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                className: "max-w-md mx-auto px-6",
                children: [
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
                        variants: itemVariants,
                        className: "relative mx-auto mb-8",
                        children: [
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                className: "absolute inset-0 w-24 h-24 mx-auto rounded-full bg-gradient-to-br from-gray-200/50 to-gray-100/30 dark:from-gray-700/30 dark:to-gray-800/20 blur-xl"
                            }, void 0, false, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                lineNumber: 169,
                                columnNumber: 13
                            }, undefined),
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                className: "relative w-24 h-24 mx-auto rounded-3xl bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-700 flex items-center justify-center border border-gray-200/60 dark:border-gray-700/40 shadow-lg",
                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_6__.FiLayout, {
                                    size: 40,
                                    className: "text-gray-500 dark:text-gray-400"
                                }, void 0, false, {
                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                    lineNumber: 173,
                                    columnNumber: 15
                                }, undefined)
                            }, void 0, false, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                lineNumber: 172,
                                columnNumber: 13
                            }, undefined)
                        ]
                    }, void 0, true, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                        lineNumber: 167,
                        columnNumber: 11
                    }, undefined),
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.h3, {
                        variants: itemVariants,
                        className: "text-2xl font-medium mb-3 text-gray-800 dark:text-gray-200",
                        children: "No Active Session"
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                        lineNumber: 177,
                        columnNumber: 11
                    }, undefined),
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.p, {
                        variants: itemVariants,
                        className: "text-gray-600 dark:text-gray-400 leading-relaxed",
                        children: "Create or select a session to start working. Tool results and detailed information will be displayed here automatically."
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                        lineNumber: 184,
                        columnNumber: 11
                    }, undefined)
                ]
            }, void 0, true, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                lineNumber: 166,
                columnNumber: 9
            }, undefined)
        }, void 0, false, {
            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
            lineNumber: 160,
            columnNumber: 7
        }, undefined);
    }
    // Enhanced empty state when session exists but no content
    const hasContent = currentPlan && currentPlan.hasGeneratedPlan && currentPlan.steps.length > 0;
    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
        className: "h-full flex flex-col",
        children: [
            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                className: "flex items-center px-6 py-5 border-b border-gray-100/60 dark:border-gray-700/30 bg-white dark:bg-gray-800/90",
                children: [
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                        className: "w-10 h-10 mr-4 rounded-xl bg-gradient-to-br from-gray-100 to-gray-50 dark:from-gray-700 dark:to-gray-800 flex items-center justify-center text-gray-600 dark:text-gray-400 border border-gray-200/60 dark:border-gray-700/40 shadow-sm",
                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_6__.FiLayers, {
                            size: 18
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                            lineNumber: 204,
                            columnNumber: 11
                        }, undefined)
                    }, void 0, false, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                        lineNumber: 203,
                        columnNumber: 9
                    }, undefined),
                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                        children: [
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("h2", {
                                className: "font-medium text-gray-900 dark:text-gray-100 text-lg",
                                children: "Workspace"
                            }, void 0, false, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                lineNumber: 207,
                                columnNumber: 11
                            }, undefined),
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                className: "text-xs text-gray-500 dark:text-gray-400",
                                children: "View tool outputs and plan details"
                            }, void 0, false, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                lineNumber: 208,
                                columnNumber: 11
                            }, undefined)
                        ]
                    }, void 0, true, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                        lineNumber: 206,
                        columnNumber: 9
                    }, undefined)
                ]
            }, void 0, true, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                lineNumber: 202,
                columnNumber: 7
            }, undefined),
            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                className: "flex-1 overflow-y-auto p-6",
                children: hasContent ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
                    variants: containerVariants,
                    initial: "initial",
                    animate: "animate",
                    className: "space-y-8",
                    children: renderPlanButton()
                }, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                    lineNumber: 217,
                    columnNumber: 11
                }, undefined) : /* Beautiful empty state for active session with no content */ /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
                    variants: containerVariants,
                    initial: "initial",
                    animate: "animate",
                    className: "flex items-center justify-center h-full text-center",
                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                        className: "max-w-lg mx-auto px-6",
                        children: [
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
                                variants: itemVariants,
                                className: "relative mb-10",
                                children: [
                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
                                        animate: {
                                            scale: [
                                                1,
                                                1.1,
                                                1
                                            ],
                                            opacity: [
                                                0.3,
                                                0.5,
                                                0.3
                                            ],
                                            rotate: [
                                                0,
                                                5,
                                                0,
                                                -5,
                                                0
                                            ]
                                        },
                                        transition: {
                                            duration: 6,
                                            repeat: Infinity,
                                            ease: 'easeInOut'
                                        },
                                        className: "absolute inset-0 w-28 h-28 rounded-full bg-gradient-to-br from-accent-200/30 to-accent-300/20 dark:from-accent-800/20 dark:to-accent-700/10 mx-auto blur-xl"
                                    }, void 0, false, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                        lineNumber: 237,
                                        columnNumber: 17
                                    }, undefined),
                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
                                        animate: {
                                            scale: [
                                                1.1,
                                                1,
                                                1.1
                                            ],
                                            opacity: [
                                                0.2,
                                                0.4,
                                                0.2
                                            ],
                                            rotate: [
                                                0,
                                                -5,
                                                0,
                                                5,
                                                0
                                            ]
                                        },
                                        transition: {
                                            duration: 5,
                                            repeat: Infinity,
                                            ease: 'easeInOut',
                                            delay: 1
                                        },
                                        className: "absolute inset-0 w-32 h-32 rounded-full bg-gradient-to-br from-purple-200/20 to-purple-300/10 dark:from-purple-800/10 dark:to-purple-700/5 mx-auto mt-2 ml-2 blur-xl"
                                    }, void 0, false, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                        lineNumber: 246,
                                        columnNumber: 17
                                    }, undefined),
                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                        className: "relative mx-auto w-28 h-28 rounded-3xl bg-gradient-to-br from-white to-gray-50 dark:from-gray-800 dark:to-gray-700 flex items-center justify-center border border-gray-200/60 dark:border-gray-700/40 shadow-lg",
                                        children: [
                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
                                                animate: {
                                                    scale: [
                                                        1,
                                                        1.05,
                                                        1
                                                    ]
                                                },
                                                transition: {
                                                    duration: 3,
                                                    repeat: Infinity,
                                                    ease: 'easeInOut'
                                                },
                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_6__.FiActivity, {
                                                    size: 44,
                                                    className: "text-accent-500 dark:text-accent-400"
                                                }, void 0, false, {
                                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                    lineNumber: 264,
                                                    columnNumber: 21
                                                }, undefined)
                                            }, void 0, false, {
                                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                lineNumber: 258,
                                                columnNumber: 19
                                            }, undefined),
                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
                                                animate: {
                                                    scale: [
                                                        0.8,
                                                        1.2,
                                                        0.8
                                                    ],
                                                    opacity: [
                                                        0.3,
                                                        0.1,
                                                        0.3
                                                    ]
                                                },
                                                transition: {
                                                    duration: 3,
                                                    repeat: Infinity,
                                                    ease: 'easeInOut'
                                                },
                                                className: "absolute inset-0 rounded-3xl border-2 border-accent-400/20 dark:border-accent-400/10"
                                            }, void 0, false, {
                                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                lineNumber: 268,
                                                columnNumber: 19
                                            }, undefined)
                                        ]
                                    }, void 0, true, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                        lineNumber: 257,
                                        columnNumber: 17
                                    }, undefined)
                                ]
                            }, void 0, true, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                lineNumber: 235,
                                columnNumber: 15
                            }, undefined),
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.h3, {
                                variants: itemVariants,
                                className: "text-2xl font-semibold mb-4 text-gray-800 dark:text-gray-200 bg-gradient-to-r from-gray-800 to-gray-600 dark:from-gray-200 dark:to-gray-300 bg-clip-text text-transparent",
                                children: "Ready for Action"
                            }, void 0, false, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                lineNumber: 279,
                                columnNumber: 15
                            }, undefined),
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.p, {
                                variants: itemVariants,
                                className: "text-gray-600 dark:text-gray-400 leading-relaxed mb-8 max-w-md mx-auto",
                                children: "Your workspace is active. Start a conversation with Agent TARS and watch as tool results, plans, and detailed information appear here in real-time."
                            }, void 0, false, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                lineNumber: 286,
                                columnNumber: 15
                            }, undefined),
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
                                variants: containerVariants,
                                className: "grid grid-cols-1 sm:grid-cols-3 gap-4 max-w-2xl mx-auto",
                                children: [
                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
                                        variants: itemVariants,
                                        whileHover: {
                                            y: -4,
                                            boxShadow: '0 12px 20px -8px rgba(0, 0, 0, 0.1)'
                                        },
                                        className: "flex flex-col items-center p-5 bg-gradient-to-b from-white to-gray-50 dark:from-gray-800 dark:to-gray-800/80 rounded-xl border border-gray-200/70 dark:border-gray-700/40 shadow-sm",
                                        children: [
                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                className: "w-12 h-12 rounded-xl bg-blue-50 dark:bg-blue-900/20 flex items-center justify-center mb-3 text-blue-500 dark:text-blue-400 border border-blue-100/80 dark:border-blue-800/30",
                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_6__.FiLayout, {
                                                    size: 22
                                                }, void 0, false, {
                                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                    lineNumber: 304,
                                                    columnNumber: 21
                                                }, undefined)
                                            }, void 0, false, {
                                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                lineNumber: 303,
                                                columnNumber: 19
                                            }, undefined),
                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                className: "text-center",
                                                children: [
                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                        className: "text-sm font-medium text-gray-800 dark:text-gray-200 mb-1",
                                                        children: "Tool Results"
                                                    }, void 0, false, {
                                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                        lineNumber: 307,
                                                        columnNumber: 21
                                                    }, undefined),
                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                        className: "text-xs text-gray-500 dark:text-gray-400",
                                                        children: "Comprehensive outputs"
                                                    }, void 0, false, {
                                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                        lineNumber: 310,
                                                        columnNumber: 21
                                                    }, undefined)
                                                ]
                                            }, void 0, true, {
                                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                lineNumber: 306,
                                                columnNumber: 19
                                            }, undefined)
                                        ]
                                    }, void 0, true, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                        lineNumber: 298,
                                        columnNumber: 17
                                    }, undefined),
                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
                                        variants: itemVariants,
                                        whileHover: {
                                            y: -4,
                                            boxShadow: '0 12px 20px -8px rgba(0, 0, 0, 0.1)'
                                        },
                                        className: "flex flex-col items-center p-5 bg-gradient-to-b from-white to-gray-50 dark:from-gray-800 dark:to-gray-800/80 rounded-xl border border-gray-200/70 dark:border-gray-700/40 shadow-sm",
                                        children: [
                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                className: "w-12 h-12 rounded-xl bg-purple-50 dark:bg-purple-900/20 flex items-center justify-center mb-3 text-purple-500 dark:text-purple-400 border border-purple-100/80 dark:border-purple-800/30",
                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_6__.FiCpu, {
                                                    size: 22
                                                }, void 0, false, {
                                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                    lineNumber: 322,
                                                    columnNumber: 21
                                                }, undefined)
                                            }, void 0, false, {
                                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                lineNumber: 321,
                                                columnNumber: 19
                                            }, undefined),
                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                className: "text-center",
                                                children: [
                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                        className: "text-sm font-medium text-gray-800 dark:text-gray-200 mb-1",
                                                        children: "Task Plans"
                                                    }, void 0, false, {
                                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                        lineNumber: 325,
                                                        columnNumber: 21
                                                    }, undefined),
                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                        className: "text-xs text-gray-500 dark:text-gray-400",
                                                        children: "Execution progress"
                                                    }, void 0, false, {
                                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                        lineNumber: 328,
                                                        columnNumber: 21
                                                    }, undefined)
                                                ]
                                            }, void 0, true, {
                                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                lineNumber: 324,
                                                columnNumber: 19
                                            }, undefined)
                                        ]
                                    }, void 0, true, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                        lineNumber: 316,
                                        columnNumber: 17
                                    }, undefined),
                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
                                        variants: itemVariants,
                                        whileHover: {
                                            y: -4,
                                            boxShadow: '0 12px 20px -8px rgba(0, 0, 0, 0.1)'
                                        },
                                        className: "flex flex-col items-center p-5 bg-gradient-to-b from-white to-gray-50 dark:from-gray-800 dark:to-gray-800/80 rounded-xl border border-gray-200/70 dark:border-gray-700/40 shadow-sm",
                                        children: [
                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                className: "w-12 h-12 rounded-xl bg-green-50 dark:bg-green-900/20 flex items-center justify-center mb-3 text-green-500 dark:text-green-400 border border-green-100/80 dark:border-green-800/30",
                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_6__.FiZap, {
                                                    size: 22
                                                }, void 0, false, {
                                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                    lineNumber: 340,
                                                    columnNumber: 21
                                                }, undefined)
                                            }, void 0, false, {
                                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                lineNumber: 339,
                                                columnNumber: 19
                                            }, undefined),
                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                className: "text-center",
                                                children: [
                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                        className: "text-sm font-medium text-gray-800 dark:text-gray-200 mb-1",
                                                        children: "Live Updates"
                                                    }, void 0, false, {
                                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                        lineNumber: 343,
                                                        columnNumber: 21
                                                    }, undefined),
                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                        className: "text-xs text-gray-500 dark:text-gray-400",
                                                        children: "Real-time results"
                                                    }, void 0, false, {
                                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                        lineNumber: 346,
                                                        columnNumber: 21
                                                    }, undefined)
                                                ]
                                            }, void 0, true, {
                                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                lineNumber: 342,
                                                columnNumber: 19
                                            }, undefined)
                                        ]
                                    }, void 0, true, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                        lineNumber: 334,
                                        columnNumber: 17
                                    }, undefined),
                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_5__.motion.div, {
                                        variants: itemVariants,
                                        whileHover: {
                                            y: -4,
                                            boxShadow: '0 12px 20px -8px rgba(0, 0, 0, 0.1)'
                                        },
                                        className: "flex flex-col items-center p-5 bg-gradient-to-b from-white to-gray-50 dark:from-gray-800 dark:to-gray-800/80 rounded-xl border border-gray-200/70 dark:border-gray-700/40 shadow-sm",
                                        children: [
                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                className: "w-12 h-12 rounded-xl bg-amber-50 dark:bg-amber-900/20 flex items-center justify-center mb-3 text-amber-500 dark:text-amber-400 border border-amber-100/80 dark:border-amber-800/30",
                                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_6__.FiFileText, {
                                                    size: 22
                                                }, void 0, false, {
                                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                    lineNumber: 358,
                                                    columnNumber: 21
                                                }, undefined)
                                            }, void 0, false, {
                                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                lineNumber: 357,
                                                columnNumber: 19
                                            }, undefined),
                                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                className: "text-center",
                                                children: [
                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                        className: "text-sm font-medium text-gray-800 dark:text-gray-200 mb-1",
                                                        children: "Deliverables"
                                                    }, void 0, false, {
                                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                        lineNumber: 361,
                                                        columnNumber: 21
                                                    }, undefined),
                                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                                        className: "text-xs text-gray-500 dark:text-gray-400",
                                                        children: "Reports & Code"
                                                    }, void 0, false, {
                                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                        lineNumber: 364,
                                                        columnNumber: 21
                                                    }, undefined)
                                                ]
                                            }, void 0, true, {
                                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                                lineNumber: 360,
                                                columnNumber: 19
                                            }, undefined)
                                        ]
                                    }, void 0, true, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                        lineNumber: 352,
                                        columnNumber: 17
                                    }, undefined)
                                ]
                            }, void 0, true, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                                lineNumber: 294,
                                columnNumber: 15
                            }, undefined)
                        ]
                    }, void 0, true, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                        lineNumber: 234,
                        columnNumber: 13
                    }, undefined)
                }, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                    lineNumber: 228,
                    columnNumber: 11
                }, undefined)
            }, void 0, false, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
                lineNumber: 215,
                columnNumber: 7
            }, undefined)
        ]
    }, void 0, true, {
        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceContent.tsx",
        lineNumber: 200,
        columnNumber: 5
    }, undefined);
};
_s(WorkspaceContent, "ZbQexSovD7J6XfFknmNHhtHRdwg=", false, function() {
    return [
        _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__.useSession,
        _common_hooks_usePlan__WEBPACK_IMPORTED_MODULE_3__.usePlan
    ];
});
_c = WorkspaceContent;
var _c;
$RefreshReg$(_c, "WorkspaceContent");

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),
"./src/standalone/workspace/WorkspaceDetail.tsx": (function (module, __webpack_exports__, __webpack_require__) {
__webpack_require__.r(__webpack_exports__);
__webpack_require__.d(__webpack_exports__, {
  WorkspaceDetail: () => (WorkspaceDetail)
});
/* ESM import */var react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/jsx-dev-runtime.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__("../node_modules/.pnpm/react@18.3.1/node_modules/react/index.js");
/* ESM import */var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);
/* ESM import */var framer_motion__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__("../node_modules/.pnpm/framer-motion@10.18.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/framer-motion/dist/es/render/dom/motion.mjs");
/* ESM import */var framer_motion__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__("../node_modules/.pnpm/framer-motion@10.18.0_react-dom@18.3.1_react@18.3.1__react@18.3.1/node_modules/framer-motion/dist/es/components/AnimatePresence/index.mjs");
/* ESM import */var react_icons_fi__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__("../node_modules/.pnpm/react-icons@4.12.0_react@18.3.1/node_modules/react-icons/fi/index.esm.js");
/* ESM import */var _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__("./src/common/hooks/useSession.ts");
/* ESM import */var _common_hooks_useTool__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__("./src/common/hooks/useTool.tsx");
/* ESM import */var _common_utils_formatters__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__("./src/common/utils/formatters.ts");
/* ESM import */var _renderers_ToolResultRenderer__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__("./src/standalone/workspace/renderers/ToolResultRenderer.tsx");
/* ESM import */var _renderers_ResearchReportRenderer__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__("./src/standalone/workspace/renderers/ResearchReportRenderer.tsx");
/* provided dependency */ var $ReactRefreshRuntime$ = __webpack_require__("../node_modules/.pnpm/@rspack+plugin-react-refresh@1.0.3_react-refresh@0.16.0/node_modules/@rspack/plugin-react-refresh/client/reactRefresh.js");

var _s = $RefreshSig$();








/**
 * WorkspaceDetail Component - Displays details of a single tool result or report
 */ const WorkspaceDetail = ()=>{
    var _activePanelContent_toolCallId;
    _s();
    const { activePanelContent, setActivePanelContent } = (0,_common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__.useSession)();
    const { getToolIcon } = (0,_common_hooks_useTool__WEBPACK_IMPORTED_MODULE_3__.useTool)();
    const [zoomedImage, setZoomedImage] = (0,react__WEBPACK_IMPORTED_MODULE_1__.useState)(null);
    if (!activePanelContent) {
        return null;
    }
    // 特殊处理 final_answer 类型、研究报告内容或可交付产物
    if ((activePanelContent === null || activePanelContent === void 0 ? void 0 : activePanelContent.type) === 'research_report' || (activePanelContent === null || activePanelContent === void 0 ? void 0 : activePanelContent.type) === 'deliverable' || activePanelContent.toolCallId && activePanelContent.toolCallId.startsWith('final-answer')) {
        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_renderers_ResearchReportRenderer__WEBPACK_IMPORTED_MODULE_6__.ResearchReportRenderer, {
            content: typeof activePanelContent.source === 'string' ? activePanelContent.source : JSON.stringify(activePanelContent.source, null, 2),
            title: activePanelContent.title || 'Research Report',
            isStreaming: activePanelContent.isStreaming
        }, void 0, false, {
            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
            lineNumber: 29,
            columnNumber: 7
        }, undefined);
    }
    // 特殊处理研究报告内容
    if ((activePanelContent === null || activePanelContent === void 0 ? void 0 : activePanelContent.type) === 'research_report') {
        return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_renderers_ResearchReportRenderer__WEBPACK_IMPORTED_MODULE_6__.ResearchReportRenderer, {
            content: activePanelContent.source,
            title: activePanelContent.title,
            isStreaming: activePanelContent.isStreaming
        }, void 0, false, {
            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
            lineNumber: 44,
            columnNumber: 7
        }, undefined);
    }
    // Convert legacy format content to standardized tool result parts
    const getStandardizedContent = ()=>{
        const { type, source, title, error, arguments: toolArguments } = activePanelContent;
        // Show error if present
        if (error) {
            return [
                {
                    type: 'text',
                    name: 'ERROR',
                    text: error
                }
            ];
        }
        // Handle write_file tool specifically
        if (type === 'file' && toolArguments && typeof toolArguments === 'object') {
            if (toolArguments.path && (toolArguments.content || typeof source === 'string')) {
                return [
                    {
                        type: 'file_result',
                        name: 'FILE_RESULT',
                        path: toolArguments.path,
                        content: toolArguments.content || source
                    }
                ];
            }
        }
        // Handle browser_vision_control type specifically
        if (type === 'browser_vision_control') {
            // 如果这是环境增强，包含原始截图数据
            const environmentImage = Array.isArray(activePanelContent.originalContent) ? extractImageUrl(activePanelContent.originalContent) : null;
            // Create browser_control part for the specialized renderer
            return [
                {
                    type: 'browser_control',
                    name: 'BROWSER_CONTROL',
                    toolCallId: activePanelContent.toolCallId,
                    thought: (toolArguments === null || toolArguments === void 0 ? void 0 : toolArguments.thought) || '',
                    step: (toolArguments === null || toolArguments === void 0 ? void 0 : toolArguments.step) || '',
                    action: (toolArguments === null || toolArguments === void 0 ? void 0 : toolArguments.action) || '',
                    status: (source === null || source === void 0 ? void 0 : source.status) || 'unknown',
                    environmentImage: environmentImage
                }
            ];
        }
        // Handle array of content parts from environment_input
        if (Array.isArray(source) && source.some((part)=>part.type === 'image_url')) {
            const imagePart = source.find((part)=>part.type === 'image_url');
            if (imagePart && imagePart.image_url && imagePart.image_url.url) {
                const imgSrc = imagePart.image_url.url;
                if (imgSrc.startsWith('data:image/')) {
                    const [mimeTypePrefix, base64Data] = imgSrc.split(',');
                    const mimeType = mimeTypePrefix.split(':')[1].split(';')[0];
                    return [
                        {
                            type: 'image',
                            imageData: base64Data,
                            mimeType,
                            name: activePanelContent.title
                        }
                    ];
                }
            }
        }
        // Based on tool type, convert to standardized format
        switch(type){
            case 'image':
                // Image content
                if (typeof source === 'string' && source.startsWith('data:image/')) {
                    const [mimeTypePrefix, base64Data] = source.split(',');
                    const mimeType = mimeTypePrefix.split(':')[1].split(';')[0];
                    return [
                        {
                            type: 'image',
                            imageData: base64Data,
                            mimeType,
                            name: activePanelContent.title
                        }
                    ];
                }
                return [
                    {
                        type: 'text',
                        text: 'Image could not be displayed'
                    }
                ];
            case 'search':
                // Search results
                if (Array.isArray(source) && source.some((item)=>item.type === 'text')) {
                    // Handle new multimodal format
                    const resultsItem = source.find((item)=>item.name === 'RESULTS');
                    const queryItem = source.find((item)=>item.name === 'QUERY');
                    if (resultsItem && resultsItem.text) {
                        // Parse results text into separate result items
                        const resultBlocks = resultsItem.text.split('---').filter(Boolean);
                        const parsedResults = resultBlocks.map((block)=>{
                            const lines = block.trim().split('\n');
                            const titleLine = lines[0] || '';
                            const urlLine = lines[1] || '';
                            const snippet = lines.slice(2).join('\n');
                            const title = titleLine.replace(/^\[\d+\]\s*/, '').trim();
                            const url = urlLine.replace(/^URL:\s*/, '').trim();
                            return {
                                title,
                                url,
                                snippet
                            };
                        });
                        // Return only the search_result part, removing the redundant text query part
                        return [
                            {
                                type: 'search_result',
                                name: 'SEARCH_RESULTS',
                                results: parsedResults,
                                query: queryItem === null || queryItem === void 0 ? void 0 : queryItem.text
                            }
                        ];
                    }
                }
                // Handle old format
                if (source && typeof source === 'object' && source.results) {
                    return [
                        {
                            type: 'search_result',
                            name: 'SEARCH_RESULTS',
                            results: source.results,
                            query: source.query
                        }
                    ];
                }
                return [
                    {
                        type: 'text',
                        text: typeof source === 'string' ? source : JSON.stringify(source, null, 2)
                    }
                ];
            case 'command':
                // Command results
                if (Array.isArray(source) && source.some((item)=>item.type === 'text')) {
                    var _source_find;
                    // New multimodal format
                    const commandItem = source.find((item)=>item.name === 'COMMAND');
                    const stdoutItem = source.find((item)=>item.name === 'STDOUT');
                    const stderrItem = source.find((item)=>item.name === 'STDERR');
                    return [
                        {
                            type: 'command_result',
                            name: 'COMMAND_RESULT',
                            command: (commandItem === null || commandItem === void 0 ? void 0 : commandItem.text) || (toolArguments === null || toolArguments === void 0 ? void 0 : toolArguments.command),
                            stdout: (stdoutItem === null || stdoutItem === void 0 ? void 0 : stdoutItem.text) || '',
                            stderr: (stderrItem === null || stderrItem === void 0 ? void 0 : stderrItem.text) || '',
                            exitCode: (_source_find = source.find((item)=>item.name === 'EXIT_CODE')) === null || _source_find === void 0 ? void 0 : _source_find.value
                        }
                    ];
                }
                // Old format
                if (source && typeof source === 'object') {
                    return [
                        {
                            type: 'command_result',
                            name: 'COMMAND_RESULT',
                            command: source.command || (toolArguments === null || toolArguments === void 0 ? void 0 : toolArguments.command),
                            stdout: source.output || source.stdout || '',
                            stderr: source.stderr || '',
                            exitCode: source.exitCode
                        }
                    ];
                }
                return [
                    {
                        type: 'text',
                        text: typeof source === 'string' ? source : JSON.stringify(source, null, 2)
                    }
                ];
            case 'browser':
                return [
                    {
                        type: 'json',
                        name: title || 'BROWSER_DATA',
                        data: source
                    }
                ];
            case 'file':
                // File results
                if (source && typeof source === 'object') {
                    return [
                        {
                            type: 'text',
                            name: 'FILE_PATH',
                            text: `File: ${source.path || 'Unknown file'}`
                        },
                        {
                            type: 'text',
                            name: 'FILE_CONTENT',
                            text: source.content || 'No content available'
                        }
                    ];
                }
                return [
                    {
                        type: 'text',
                        text: typeof source === 'string' ? source : JSON.stringify(source, null, 2)
                    }
                ];
            default:
                // Default handling for unknown types
                if (typeof source === 'object') {
                    return [
                        {
                            type: 'json',
                            name: 'JSON_DATA',
                            data: source
                        }
                    ];
                }
                return [
                    {
                        type: 'text',
                        text: typeof source === 'string' ? source : JSON.stringify(source, null, 2)
                    }
                ];
        }
    };
    // 辅助函数：从文本内容中提取URL
    const extractUrlFromContent = (content)=>{
        if (typeof content === 'string' && content.includes('Navigated to ')) {
            const lines = content.split('\n');
            const firstLine = lines[0] || '';
            return firstLine.replace('Navigated to ', '').trim();
        }
        return '';
    };
    // 辅助函数：从环境内容中提取图片URL
    const extractImageUrl = (content)=>{
        const imgPart = content.find((part)=>part && part.type === 'image_url' && part.image_url && part.image_url.url);
        return imgPart ? imgPart.image_url.url : null;
    };
    // Handle tool result content action
    const handleContentAction = (action, data)=>{
        if (action === 'zoom' && data.src) {
            // Show zoomed image in modal
            setZoomedImage({
                src: data.src,
                alt: data.alt
            });
        }
    };
    // Handle back navigation
    const handleBack = ()=>{
        setActivePanelContent(null);
    };
    return /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_7__.motion.div, {
        initial: {
            opacity: 0
        },
        animate: {
            opacity: 1
        },
        exit: {
            opacity: 0
        },
        className: "h-full flex flex-col bg-gray-50/80 dark:bg-gray-900/20",
        children: [
            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                className: "flex items-center justify-between p-5 border-b border-gray-100/60 dark:border-gray-700/30 bg-white dark:bg-gray-800/90",
                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                    className: "flex items-center",
                    children: [
                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_7__.motion.button, {
                            whileHover: {
                                scale: 1.05,
                                x: -2
                            },
                            whileTap: {
                                scale: 0.95
                            },
                            onClick: handleBack,
                            className: "mr-4 p-2 text-gray-600 dark:text-gray-400 hover:bg-gray-100/70 dark:hover:bg-gray-700/50 rounded-lg border border-transparent hover:border-gray-100/70 dark:hover:border-gray-700/50 bg-gray-50/80 dark:bg-gray-800/50",
                            title: "Back to workspace",
                            children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.FiArrowLeft, {
                                size: 18
                            }, void 0, false, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                                lineNumber: 343,
                                columnNumber: 13
                            }, undefined)
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                            lineNumber: 336,
                            columnNumber: 11
                        }, undefined),
                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                            className: "w-10 h-10 mr-4 rounded-xl flex items-center justify-center overflow-hidden relative",
                            children: ((_activePanelContent_toolCallId = activePanelContent.toolCallId) === null || _activePanelContent_toolCallId === void 0 ? void 0 : _activePanelContent_toolCallId.startsWith('final-answer')) ? /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
                                children: [
                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                        className: "absolute inset-0 bg-gradient-to-br from-accent-400/20 to-accent-500/10 dark:from-accent-600/30 dark:to-accent-500/20"
                                    }, void 0, false, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                                        lineNumber: 350,
                                        columnNumber: 17
                                    }, undefined),
                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                        className: "relative z-10",
                                        children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.FiBookOpen, {
                                            className: "text-accent-600 dark:text-accent-400",
                                            size: 20
                                        }, void 0, false, {
                                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                                            lineNumber: 352,
                                            columnNumber: 19
                                        }, undefined)
                                    }, void 0, false, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                                        lineNumber: 351,
                                        columnNumber: 17
                                    }, undefined)
                                ]
                            }, void 0, true) : /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.Fragment, {
                                children: [
                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                        className: `absolute inset-0 ${(activePanelContent === null || activePanelContent === void 0 ? void 0 : activePanelContent.type) === 'search' ? 'bg-gradient-to-br from-blue-400/20 to-indigo-500/10 dark:from-blue-600/30 dark:to-indigo-500/20' : (activePanelContent === null || activePanelContent === void 0 ? void 0 : activePanelContent.type) === 'browser' ? 'bg-gradient-to-br from-purple-400/20 to-pink-500/10 dark:from-purple-600/30 dark:to-pink-500/20' : (activePanelContent === null || activePanelContent === void 0 ? void 0 : activePanelContent.type) === 'command' ? 'bg-gradient-to-br from-green-400/20 to-emerald-500/10 dark:from-green-600/30 dark:to-emerald-500/20' : (activePanelContent === null || activePanelContent === void 0 ? void 0 : activePanelContent.type) === 'file' ? 'bg-gradient-to-br from-yellow-400/20 to-amber-500/10 dark:from-yellow-600/30 dark:to-amber-500/20' : (activePanelContent === null || activePanelContent === void 0 ? void 0 : activePanelContent.type) === 'image' ? 'bg-gradient-to-br from-red-400/20 to-rose-500/10 dark:from-red-600/30 dark:to-rose-500/20' : (activePanelContent === null || activePanelContent === void 0 ? void 0 : activePanelContent.type) === 'browser_vision_control' ? 'bg-gradient-to-br from-cyan-400/20 to-teal-500/10 dark:from-cyan-600/30 dark:to-teal-500/20' : 'bg-gradient-to-br from-gray-400/20 to-gray-500/10 dark:from-gray-500/30 dark:to-gray-600/20'}`
                                    }, void 0, false, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                                        lineNumber: 357,
                                        columnNumber: 17
                                    }, undefined),
                                    /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                        className: "relative z-10",
                                        children: getToolIcon((activePanelContent === null || activePanelContent === void 0 ? void 0 : activePanelContent.type) || 'other')
                                    }, void 0, false, {
                                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                                        lineNumber: 374,
                                        columnNumber: 17
                                    }, undefined)
                                ]
                            }, void 0, true)
                        }, void 0, false, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                            lineNumber: 346,
                            columnNumber: 11
                        }, undefined),
                        /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                            children: [
                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("h2", {
                                    className: "font-medium text-gray-800 dark:text-gray-200 text-lg leading-tight",
                                    children: activePanelContent.title
                                }, void 0, false, {
                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                                    lineNumber: 382,
                                    columnNumber: 13
                                }, undefined),
                                /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                                    className: "text-xs text-gray-500 dark:text-gray-400",
                                    children: (0,_common_utils_formatters__WEBPACK_IMPORTED_MODULE_4__.formatTimestamp)(activePanelContent.timestamp)
                                }, void 0, false, {
                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                                    lineNumber: 385,
                                    columnNumber: 13
                                }, undefined)
                            ]
                        }, void 0, true, {
                            fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                            lineNumber: 381,
                            columnNumber: 11
                        }, undefined)
                    ]
                }, void 0, true, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                    lineNumber: 335,
                    columnNumber: 9
                }, undefined)
            }, void 0, false, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                lineNumber: 334,
                columnNumber: 7
            }, undefined),
            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("div", {
                className: "flex-1 overflow-auto p-6",
                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(_renderers_ToolResultRenderer__WEBPACK_IMPORTED_MODULE_5__.ToolResultRenderer, {
                    content: getStandardizedContent(),
                    onAction: handleContentAction
                }, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                    lineNumber: 394,
                    columnNumber: 9
                }, undefined)
            }, void 0, false, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                lineNumber: 393,
                columnNumber: 7
            }, undefined),
            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_9__.AnimatePresence, {
                children: zoomedImage && /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_7__.motion.div, {
                    initial: {
                        opacity: 0
                    },
                    animate: {
                        opacity: 1
                    },
                    exit: {
                        opacity: 0
                    },
                    className: "fixed inset-0 z-50 flex items-center justify-center bg-black/80 p-4 backdrop-blur-sm",
                    onClick: ()=>setZoomedImage(null),
                    children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(framer_motion__WEBPACK_IMPORTED_MODULE_7__.motion.div, {
                        initial: {
                            scale: 0.9,
                            opacity: 0
                        },
                        animate: {
                            scale: 1,
                            opacity: 1
                        },
                        exit: {
                            scale: 0.9,
                            opacity: 0
                        },
                        transition: {
                            duration: 0.3,
                            ease: [
                                0.19,
                                1,
                                0.22,
                                1
                            ]
                        },
                        className: "relative max-w-[95vw] max-h-[95vh]",
                        children: [
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("button", {
                                onClick: (e)=>{
                                    e.stopPropagation();
                                    setZoomedImage(null);
                                },
                                className: "absolute -top-2 -right-2 p-2 rounded-full bg-gray-900/90 text-white hover:bg-gray-800 shadow-lg",
                                "aria-label": "Close",
                                children: /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)(react_icons_fi__WEBPACK_IMPORTED_MODULE_8__.FiX, {
                                    size: 24
                                }, void 0, false, {
                                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                                    lineNumber: 422,
                                    columnNumber: 17
                                }, undefined)
                            }, void 0, false, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                                lineNumber: 414,
                                columnNumber: 15
                            }, undefined),
                            /*#__PURE__*/ (0,react_jsx_dev_runtime__WEBPACK_IMPORTED_MODULE_0__.jsxDEV)("img", {
                                src: zoomedImage.src,
                                alt: zoomedImage.alt || 'Zoomed image',
                                className: "max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl"
                            }, void 0, false, {
                                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                                lineNumber: 424,
                                columnNumber: 15
                            }, undefined)
                        ]
                    }, void 0, true, {
                        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                        lineNumber: 407,
                        columnNumber: 13
                    }, undefined)
                }, void 0, false, {
                    fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                    lineNumber: 400,
                    columnNumber: 11
                }, undefined)
            }, void 0, false, {
                fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
                lineNumber: 398,
                columnNumber: 7
            }, undefined)
        ]
    }, void 0, true, {
        fileName: "/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/WorkspaceDetail.tsx",
        lineNumber: 327,
        columnNumber: 5
    }, undefined);
};
_s(WorkspaceDetail, "gpg4zjVyxOdyaQV8bhqr5oyL5r8=", false, function() {
    return [
        _common_hooks_useSession__WEBPACK_IMPORTED_MODULE_2__.useSession,
        _common_hooks_useTool__WEBPACK_IMPORTED_MODULE_3__.useTool
    ];
});
_c = WorkspaceDetail;
var _c;
$RefreshReg$(_c, "WorkspaceDetail");

function $RefreshSig$() {
  return $ReactRefreshRuntime$.createSignatureFunctionForTransform();
}
function $RefreshReg$(type, id) {
  $ReactRefreshRuntime$.register(type, module.id + "_" + id);
}
Promise.resolve().then(function() {
  $ReactRefreshRuntime$.refresh(module.id, module.hot);
});


}),

},function(__webpack_require__) {
// webpack/runtime/get_full_hash
(() => {
__webpack_require__.h = () => ("310c09f8135639de")
})();

}
);
//# sourceMappingURL=index.44b3c0171917e10a.hot-update.js.map