{"version":3,"file":"index.483d4ebeb23bcbbf.hot-update.js","sources":["/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/entry.css","/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/v2/hooks/usePlan.ts"],"sourcesContent":["// extracted by css-extract-rspack-plugin\nexport {};\n    if(module.hot) {\n      (function() {\n        var localsJsonString = undefined;\n        // 1749334952468\n        var cssReload = require(\"../../node_modules/.pnpm/@rspack+core@1.3.9_@swc+helpers@0.5.17/node_modules/@rspack/core/dist/cssExtractHmr.js\").cssReload(module.id, {});\n        // only invalidate when locals change\n        if (\n          module.hot.data &&\n          module.hot.data.value &&\n          module.hot.data.value !== localsJsonString\n        ) {\n          module.hot.invalidate();\n        } else {\n          module.hot.accept();\n        }\n        module.hot.dispose(function(data) {\n          data.value = localsJsonString;\n          cssReload();\n        });\n      })();\n    }\n  ","import { useAtom } from 'jotai';\nimport { plansAtom, planUIStateAtom } from '../state/atoms/plan';\nimport { useEffect } from 'react';\nimport { usePro } from './usePro';\n\n/**\n * Hook for plan management functionality\n *\n * Provides:\n * - Access to plan data for the active session\n * - UI state for plan display\n * - Toggle functions for plan visibility\n */\nexport function usePlan(sessionId: string | null) {\n  const [plans, setPlans] = useAtom(plansAtom);\n  const [planUIState, setPlanUIState] = useAtom(planUIStateAtom);\n  const isProMode = usePro();\n\n  // Get plan for current session\n  const currentPlan = sessionId ? plans[sessionId] : undefined;\n\n  // Add debug logging to trace plan state\n  useEffect(() => {\n    if (sessionId) {\n      console.log(`[usePlan] Plan state for session ${sessionId}:`, currentPlan);\n    }\n  }, [sessionId, currentPlan]);\n\n  // Toggle plan visibility\n  const togglePlanVisibility = () => {\n    // 只有在 Pro 模式下才允许切换计划可见性\n    if (isProMode) {\n      setPlanUIState((prev) => ({\n        ...prev,\n        isVisible: !prev.isVisible,\n      }));\n    }\n  };\n\n  // Show plan automatically when first created\n  const showPlanAutomatically = () => {\n    // 只有在 Pro 模式下才自动显示计划\n    if (isProMode) {\n      setPlanUIState((prev) => ({\n        ...prev,\n        isVisible: true,\n      }));\n    }\n  };\n\n  return {\n    currentPlan,\n    isPlanVisible: planUIState.isVisible && isProMode, // 确保只在 Pro 模式下才返回 true\n    togglePlanVisibility,\n    showPlanAutomatically,\n  };\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACvBA;AACA;AACA;AACA;AAEA;;;;;;;AAOA;AAEA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA"}