{"version":3,"file":"index.dcb7f7fecb82ac77.hot-update.js","sources":["/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/entry.css","/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/workspace/renderers/FileResultRenderer.tsx"],"sourcesContent":["// extracted by css-extract-rspack-plugin\nexport {};\n    if(module.hot) {\n      (function() {\n        var localsJsonString = undefined;\n        // 1749956427515\n        var cssReload = require(\"../../node_modules/.pnpm/@rspack+core@1.3.9_@swc+helpers@0.5.17/node_modules/@rspack/core/dist/cssExtractHmr.js\").cssReload(module.id, {});\n        // only invalidate when locals change\n        if (\n          module.hot.data &&\n          module.hot.data.value &&\n          module.hot.data.value !== localsJsonString\n        ) {\n          module.hot.invalidate();\n        } else {\n          module.hot.accept();\n        }\n        module.hot.dispose(function(data) {\n          data.value = localsJsonString;\n          cssReload();\n        });\n      })();\n    }\n  ","import React, { useState } from 'react';\nimport { ToolResultContentPart } from '../types';\nimport { motion } from 'framer-motion';\nimport { FiFileText, FiCode, FiEye, FiDownload, FiCopy, FiCheck } from 'react-icons/fi';\nimport { MarkdownRenderer } from '@/sdk/markdown-renderer';\n\ninterface FileResultRendererProps {\n  part: ToolResultContentPart;\n  onAction?: (action: string, data: any) => void;\n}\n\n/**\n * Renders file operation results with preview capabilities\n *\n * Features:\n * - Content preview with syntax highlighting\n * - Special handling for HTML files with preview mode\n * - File download functionality\n * - Clean interface with visual file type indicators\n * - Support for code copy functionality\n */\nexport const FileResultRenderer: React.FC<FileResultRendererProps> = ({ part, onAction }) => {\n  const { path, content } = part;\n  const [previewMode, setPreviewMode] = useState<'code' | 'preview'>('code');\n  const [copied, setCopied] = useState(false);\n\n  if (!path) {\n    return <div className=\"text-gray-500 italic\">File path missing</div>;\n  }\n\n  if (!content && content !== '') {\n    return <div className=\"text-gray-500 italic\">No file content available</div>;\n  }\n\n  // Determine file extension\n  const extension = path.split('.').pop()?.toLowerCase() || '';\n  const isHtml = extension === 'html' || extension === 'htm';\n  const isImage = ['jpg', 'jpeg', 'png', 'gif', 'svg', 'webp'].includes(extension);\n  const isText = [\n    'txt',\n    'md',\n    'js',\n    'jsx',\n    'ts',\n    'tsx',\n    'css',\n    'json',\n    'yaml',\n    'yml',\n    'html',\n    'htm',\n    'xml',\n  ].includes(extension);\n  const isCode = [\n    'js',\n    'jsx',\n    'ts',\n    'tsx',\n    'py',\n    'java',\n    'c',\n    'cpp',\n    'go',\n    'rs',\n    'php',\n    'rb',\n  ].includes(extension);\n  const isConfig = ['json', 'yaml', 'yml', 'toml', 'ini', 'env', 'conf'].includes(extension);\n\n  // Get file basename (without directory path)\n  const fileName = path.split('/').pop() || path;\n\n  // Determine icon and color based on file type\n  const getFileIcon = () => {\n    if (isHtml) return <FiCode size={18} className=\"text-orange-500 dark:text-orange-400\" />;\n    if (isImage) return <FiEye size={18} className=\"text-blue-500 dark:text-blue-400\" />;\n    if (isCode) return <FiCode size={18} className=\"text-purple-500 dark:text-purple-400\" />;\n    if (isConfig) return <FiFileText size={18} className=\"text-amber-500 dark:text-amber-400\" />;\n    return <FiFileText size={18} className=\"text-gray-600 dark:text-gray-400\" />;\n  };\n\n  // Create downloadable content\n  const handleDownload = () => {\n    const blob = new Blob([content], { type: isHtml ? 'text/html' : 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = fileName;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  // Copy content to clipboard\n  const handleCopy = () => {\n    navigator.clipboard.writeText(content);\n    setCopied(true);\n    setTimeout(() => setCopied(false), 2000);\n  };\n\n  // Format file size\n  const formatBytes = (bytes: number): string => {\n    if (bytes === 0) return '0 Bytes';\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];\n  };\n\n  const approximateSize = content ? formatBytes(content.length) : 'Unknown size';\n\n  // Detect language for code highlighting\n  const getLanguage = (): string => {\n    const langMap: Record<string, string> = {\n      js: 'javascript',\n      jsx: 'jsx',\n      ts: 'typescript',\n      tsx: 'tsx',\n      py: 'python',\n      rb: 'ruby',\n      java: 'java',\n      html: 'html',\n      css: 'css',\n      json: 'json',\n      yaml: 'yaml',\n      yml: 'yaml',\n      md: 'markdown',\n      xml: 'xml',\n      sh: 'bash',\n      bash: 'bash',\n      go: 'go',\n      c: 'c',\n      cpp: 'cpp',\n      rs: 'rust',\n      php: 'php',\n    };\n\n    return langMap[extension] || extension || 'text';\n  };\n\n  return (\n    <div className=\"space-y-4\">\n      {/* File info header */}\n      <div className=\"flex items-center justify-between bg-white dark:bg-gray-800 rounded-xl p-4 border border-gray-200/50 dark:border-gray-700/30\">\n        <div className=\"flex items-center\">\n          <div className=\"w-10 h-10 rounded-xl bg-gray-100/80 dark:bg-gray-700/80 flex items-center justify-center mr-3 border border-gray-200/50 dark:border-gray-700/30\">\n            {getFileIcon()}\n          </div>\n          <div>\n            <h3 className=\"font-medium text-gray-800 dark:text-gray-200 mb-1\">{fileName}</h3>\n            <div className=\"flex items-center text-xs text-gray-500 dark:text-gray-400\">\n              <span className=\"mr-3\">{path}</span>\n              <span className=\"px-2 py-0.5 bg-gray-100 dark:bg-gray-700 rounded-full\">\n                {approximateSize}\n              </span>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex gap-2\">\n          <motion.button\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            onClick={handleCopy}\n            className=\"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors\"\n            title=\"Copy content\"\n          >\n            {copied ? <FiCheck size={18} className=\"text-green-500\" /> : <FiCopy size={18} />}\n          </motion.button>\n\n          <motion.button\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n            onClick={handleDownload}\n            className=\"p-2 rounded-lg bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors\"\n            title=\"Download file\"\n          >\n            <FiDownload size={18} />\n          </motion.button>\n        </div>\n      </div>\n\n      {/* Content preview section */}\n      <div className=\"bg-white dark:bg-gray-800 rounded-xl border border-gray-200/50 dark:border-gray-700/30 overflow-hidden\">\n        {/* Toggle buttons for HTML files */}\n        {isHtml && (\n          <div className=\"flex border-b border-gray-100/60 dark:border-gray-700/30\">\n            <button\n              className={`flex-1 px-4 py-3 text-sm font-medium ${\n                previewMode === 'code'\n                  ? 'bg-gray-100/80 dark:bg-gray-700/80 text-gray-800 dark:text-gray-200'\n                  : 'text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/30'\n              }`}\n              onClick={() => setPreviewMode('code')}\n            >\n              <div className=\"flex items-center justify-center\">\n                <FiCode className=\"mr-2\" size={16} />\n                Source Code\n              </div>\n            </button>\n            <button\n              className={`flex-1 px-4 py-3 text-sm font-medium ${\n                previewMode === 'preview'\n                  ? 'bg-gray-100/80 dark:bg-gray-700/80 text-gray-800 dark:text-gray-200'\n                  : 'text-gray-500 dark:text-gray-400 hover:bg-gray-50 dark:hover:bg-gray-700/30'\n              }`}\n              onClick={() => setPreviewMode('preview')}\n            >\n              <div className=\"flex items-center justify-center\">\n                <FiEye className=\"mr-2\" size={16} />\n                Preview\n              </div>\n            </button>\n          </div>\n        )}\n\n        {/* Content display */}\n        <div className=\"p-4\">\n          {isHtml && previewMode === 'preview' ? (\n            <div className=\"border border-gray-200/50 dark:border-gray-700/30 rounded-lg overflow-hidden bg-white dark:bg-gray-900/30\">\n              <div className=\"px-3 py-2 bg-gray-100/80 dark:bg-gray-700/80 border-b border-gray-200/50 dark:border-gray-700/30 text-xs font-medium text-gray-700 dark:text-gray-300\">\n                Preview\n              </div>\n              <div className=\"p-4 max-h-[70vh] overflow-auto\">\n                <iframe\n                  srcDoc={content}\n                  className=\"w-full border-0 min-h-[400px]\"\n                  title=\"HTML Preview\"\n                  sandbox=\"allow-scripts allow-same-origin\"\n                />\n              </div>\n            </div>\n          ) : isImage ? (\n            <div className=\"text-center\">\n              <img\n                src={`data:image/${extension};base64,${content}`}\n                alt={path}\n                className=\"max-h-[70vh] max-w-full mx-auto border border-gray-200/50 dark:border-gray-700/30 rounded-lg\"\n              />\n            </div>\n          ) : (\n            <div className=\"max-h-[70vh] overflow-auto\">\n              <div className=\"prose dark:prose-invert prose-sm max-w-none\">\n                <MarkdownRenderer content={`\\`\\`\\`${getLanguage()}\\n${content}\\n\\`\\`\\``} />\n              </div>\n            </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;ACvBA;AAEA;AACA;AACA;AAOA;;;;;;;;;AASA;AACA;AAcA;;AAbA;AACA;AACA;AAEA;AACA;AAAA;AAAA;;;;;;AACA;AAEA;AACA;AAAA;AAAA;;;;;;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAEA;AACA;AACA;AAAA;AAAA;;;;;;AACA;AAAA;AAAA;;;;;;AACA;AAAA;AAAA;;;;;;AACA;AAAA;AAAA;;;;;;AACA;AAAA;AAAA;;;;;;AACA;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;;AAEA;AAAA;;AACA;AAAA;;AACA;AAAA;AACA;;;;;;AAEA;;AACA;AAAA;AAAA;;;;;;AACA;AAAA;;AACA;AAAA;AAAA;;;;;;AACA;AAAA;AACA;;;;;;;;;;;;;;;;;;;;;;;;AAMA;AAAA;;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AAAA;AAAA;;;;;AAAA;AAAA;;;;;;;;;;;AAGA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AAEA;AAAA;;;;;;;;;;;;;;;;;;;;;;;AAMA;AAAA;;AAEA;AACA;;AACA;AACA;AAKA;AAEA;AAAA;;AACA;AAAA;AAAA;;;;;;AAAA;;;;;;;;;;;;AAIA;AACA;AAKA;AAEA;AAAA;;AACA;AAAA;AAAA;;;;;;AAAA;;;;;;;;;;;;;;;;;;AAQA;AAAA;AACA;AACA;;AACA;AAAA;AAAA;;;;;;AAGA;AAAA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;AAIA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;AAIA;AAAA;AACA;AAAA;AACA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA;AAvOA;AAAA"}