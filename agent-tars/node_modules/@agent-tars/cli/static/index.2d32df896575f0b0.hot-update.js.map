{"version":3,"file":"index.2d32df896575f0b0.hot-update.js","sources":["/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/v2/components/Chat/ImagePreview.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { FiX, FiMaximize2, FiImage } from 'react-icons/fi';\nimport { ChatCompletionContentPart } from '@multimodal/agent-interface';\nimport { Dialog } from '@headlessui/react';\n\ninterface ImagePreviewProps {\n  image: ChatCompletionContentPart;\n  onRemove: () => void;\n}\n\n/**\n * ImagePreview Component - Displays an uploaded image with enhanced styling and zoom functionality\n *\n * Design principles:\n * - Elegant thumbnail with improved visual hierarchy\n * - Click to zoom functionality for better image viewing\n * - Smooth animations and hover effects\n * - Clear remove action with visual feedback\n */\nexport const ImagePreview: React.FC<ImagePreviewProps> = ({ image, onRemove }) => {\n  const [isZoomed, setIsZoomed] = useState(false);\n  const [imageLoaded, setImageLoaded] = useState(false);\n\n  if (image.type !== 'image_url' || !image.image_url) {\n    return null;\n  }\n\n  const handleImageClick = () => {\n    setIsZoomed(true);\n  };\n\n  const handleCloseZoom = () => {\n    setIsZoomed(false);\n  };\n\n  return (\n    <>\n      <motion.div\n        initial={{ opacity: 0, scale: 0.8 }}\n        animate={{ opacity: 1, scale: 1 }}\n        exit={{ opacity: 0, scale: 0.8 }}\n        className=\"relative group cursor-pointer\"\n      >\n        {/* Enhanced thumbnail container */}\n        <div className=\"relative w-24 h-24 rounded-xl overflow-hidden bg-gray-100 dark:bg-gray-800 border-2 border-gray-200/60 dark:border-gray-700/40 hover:border-accent-300 dark:hover:border-accent-600 transition-all duration-200 shadow-sm hover:shadow-md\">\n          <img\n            src={image.image_url.url}\n            alt=\"Image preview\"\n            className=\"w-full h-full object-cover transition-transform duration-200 group-hover:scale-105\"\n            onClick={handleImageClick}\n            onLoad={() => setImageLoaded(true)}\n          />\n\n          {/* Loading state */}\n          {!imageLoaded && (\n            <div className=\"absolute inset-0 flex items-center justify-center bg-gray-100 dark:bg-gray-800\">\n              <FiImage className=\"text-gray-400 dark:text-gray-500\" size={20} />\n            </div>\n          )}\n\n          {/* Hover overlay with zoom hint */}\n          <div className=\"absolute inset-0 bg-black/20 opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center justify-center\">\n            <motion.div\n              initial={{ scale: 0.8, opacity: 0 }}\n              whileHover={{ scale: 1, opacity: 1 }}\n              className=\"bg-white/90 dark:bg-gray-800/90 rounded-full p-2 backdrop-blur-sm\"\n            >\n              <FiMaximize2 className=\"text-gray-700 dark:text-gray-300\" size={16} />\n            </motion.div>\n          </div>\n\n          {/* Enhanced remove button */}\n          <motion.button\n            whileHover={{ scale: 1.1 }}\n            whileTap={{ scale: 0.9 }}\n            onClick={(e) => {\n              e.stopPropagation();\n              onRemove();\n            }}\n            className=\"absolute -top-2 -right-2 bg-red-500 hover:bg-red-600 text-white rounded-full p-1.5 opacity-0 group-hover:opacity-100 transition-all duration-200 shadow-md border-2 border-white dark:border-gray-800 z-10\"\n            title=\"Remove image\"\n          >\n            <FiX size={14} />\n          </motion.button>\n        </div>\n\n        {/* Image info tooltip */}\n        <div className=\"absolute -bottom-8 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none\">\n          <div className=\"bg-gray-800 dark:bg-gray-900 text-white text-xs px-2 py-1 rounded-md whitespace-nowrap\">\n            Click to zoom\n          </div>\n        </div>\n      </motion.div>\n\n      {/* Zoom modal */}\n      <Dialog open={isZoomed} onClose={handleCloseZoom} className=\"relative z-[9999]\">\n        {/* Background overlay */}\n        <div className=\"fixed inset-0 bg-black/80 backdrop-blur-sm\" aria-hidden=\"true\" />\n\n        {/* Modal content */}\n        <div className=\"fixed inset-0 flex items-center justify-center p-4\">\n          <Dialog.Panel className=\"relative max-w-[90vw] max-h-[90vh] outline-none\">\n            {/* Close button */}\n            <motion.button\n              whileHover={{ scale: 1.1 }}\n              whileTap={{ scale: 0.9 }}\n              onClick={handleCloseZoom}\n              className=\"absolute -top-10 -right-10 bg-white/10 hover:bg-white/20 text-white rounded-full p-2 transition-colors z-10\"\n            >\n              <FiX size={24} />\n            </motion.button>\n\n            {/* Zoomed image */}\n            <motion.img\n              src={image.image_url.url}\n              alt=\"Zoomed preview\"\n              className=\"max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl\"\n              initial={{ opacity: 0, scale: 0.9 }}\n              animate={{ opacity: 1, scale: 1 }}\n              exit={{ opacity: 0, scale: 0.9 }}\n              transition={{ type: 'spring', duration: 0.3 }}\n            />\n          </Dialog.Panel>\n        </div>\n      </Dialog>\n    </>\n  );\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAA;AACA;AACA;AAEA;AAOA;;;;;;;;AAQA;AACA;;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;;AAEA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;;AAGA;AAAA;;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;AAIA;AACA;AACA;AAAA;AAAA;;;;;;;;;;;AAKA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;;;;;;;;;;;;;;;;AAKA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;;;;;;;;;;;;;;;;;AAKA;AAAA;AACA;AAAA;AAAA;;;;;;;;;;;;;;;;;AAOA;AAAA;AAAA;AAAA;;AAEA;AAAA;AAAA;;;;;;AAGA;AAAA;AACA;AAAA;;AAEA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AACA;AACA;AAEA;AAAA;;;;;;;;;;;AAIA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;AAOA;AA5GA;AAAA"}