{"version":3,"file":"index.579cad764a004cd8.hot-update.js","sources":["/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/entry.css","/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/common/constants/index.ts","/Users/chenhaoli/workspace/code/UI-TARS-desktop-5/multimodal/agent-tars-web-ui/src/standalone/share/shareService.ts"],"sourcesContent":["// extracted by css-extract-rspack-plugin\nexport {};\n    if(module.hot) {\n      (function() {\n        var localsJsonString = undefined;\n        // 1749663205817\n        var cssReload = require(\"../../node_modules/.pnpm/@rspack+core@1.3.9_@swc+helpers@0.5.17/node_modules/@rspack/core/dist/cssExtractHmr.js\").cssReload(module.id, {});\n        // only invalidate when locals change\n        if (\n          module.hot.data &&\n          module.hot.data.value &&\n          module.hot.data.value !== localsJsonString\n        ) {\n          module.hot.invalidate();\n        } else {\n          module.hot.accept();\n        }\n        module.hot.dispose(function(data) {\n          data.value = localsJsonString;\n          cssReload();\n        });\n      })();\n    }\n  ","/**\n * Base API URL for server communication\n */\n\nexport const API_BASE_URL = window.AGENT_TARS_BASE_URL ?? 'http://localhost:3000';\n\n/**\n * Default API endpoints\n */\nexport const API_ENDPOINTS = {\n  SESSIONS: '/api/sessions',\n  CREATE_SESSION: '/api/sessions/create',\n  SESSION_DETAILS: '/api/sessions/details',\n  SESSION_EVENTS: '/api/sessions/events',\n  SESSION_STATUS: '/api/sessions/status',\n  UPDATE_SESSION: '/api/sessions/update',\n  DELETE_SESSION: '/api/sessions/delete',\n  QUERY: '/api/sessions/query',\n  QUERY_STREAM: '/api/sessions/query/stream',\n  ABORT: '/api/sessions/abort',\n  GENERATE_SUMMARY: '/api/sessions/generate-summary',\n  HEALTH: '/api/health',\n  BROWSER_CONTROL_INFO: '/api/sessions/browser-control',\n  MODEL_INFO: '/api/model-info',\n};\n\n/**\n * WebSocket events\n */\nexport const SOCKET_EVENTS = {\n  CONNECT: 'connect',\n  DISCONNECT: 'disconnect',\n  ERROR: 'error',\n  RECONNECT_ATTEMPT: 'reconnect_attempt',\n  RECONNECT_FAILED: 'reconnect_failed',\n  JOIN_SESSION: 'join-session',\n  AGENT_EVENT: 'agent-event',\n  AGENT_STATUS: 'agent-status',\n  PING: 'ping',\n  SEND_QUERY: 'send-query',\n  ABORT_QUERY: 'abort-query',\n};\n\n/**\n * Local storage keys\n */\nexport const STORAGE_KEYS = {\n  ACTIVE_SESSION: 'agent-tars-active-session',\n  THEME: 'agent-tars-theme',\n};\n\n/**\n * Tool types\n */\nexport const TOOL_TYPES = {\n  SEARCH: 'search',\n  BROWSER: 'browser',\n  COMMAND: 'command',\n  IMAGE: 'image',\n  FILE: 'file',\n  BROWSER_CONTROL: 'browser_vision_control',\n  OTHER: 'other',\n} as const;\n\n/**\n * Message roles\n */\nexport const MESSAGE_ROLES = {\n  USER: 'user',\n  ASSISTANT: 'assistant',\n  SYSTEM: 'system',\n  TOOL: 'tool',\n} as const;\n\n/**\n * Connection settings\n */\nexport const CONNECTION_SETTINGS = {\n  HEARTBEAT_INTERVAL: 15000,\n  MAX_MISSED_HEARTBEATS: 2,\n  MAX_RECONNECT_ATTEMPTS: 5,\n  RECONNECTION_DELAY: 1000,\n  RECONNECTION_DELAY_MAX: 5000,\n};\n","import { API_BASE_URL } from '@/common/constants';\n\n/**\n * 分享配置接口\n */\nexport interface ShareConfig {\n  hasShareProvider: boolean;\n  shareProvider: string | null;\n}\n\n/**\n * 分享结果接口\n */\nexport interface ShareResult {\n  success: boolean;\n  url?: string;\n  html?: string;\n  sessionId?: string;\n  error?: string;\n}\n\n/**\n * 分享服务类 - 处理分享相关功能\n */\nclass ShareService {\n  private shareConfig: ShareConfig | null = null;\n\n  /**\n   * 获取分享配置\n   */\n  async getShareConfig(): Promise<ShareConfig> {\n    if (this.shareConfig) {\n      return this.shareConfig;\n    }\n\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/share/config`, {\n        method: 'GET',\n        headers: { 'Content-Type': 'application/json' },\n      });\n\n      if (!response.ok) {\n        throw new Error(`Failed to get share config: ${response.statusText}`);\n      }\n\n      this.shareConfig = await response.json();\n      return this.shareConfig as ShareConfig;\n    } catch (error) {\n      console.error('Failed to get share config:', error);\n      // 默认配置\n      return { hasShareProvider: false, shareProvider: null };\n    }\n  }\n\n  /**\n   * 分享会话\n   * @param sessionId 会话ID\n   * @param upload 是否上传到分享提供者（如果存在）\n   */\n  async shareSession(sessionId: string, upload = false): Promise<ShareResult> {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/sessions/share`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ sessionId, upload }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json();\n        throw new Error(errorData.error || `Failed to share session: ${response.statusText}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      console.error('Failed to share session:', error);\n      return {\n        success: false,\n        error: error instanceof Error ? error.message : String(error),\n      };\n    }\n  }\n\n  /**\n   * 下载 HTML 分享文件\n   * @param html HTML 内容\n   * @param sessionId 会话ID\n   */\n  downloadShareHtml(html: string, sessionId: string): void {\n    const blob = new Blob([html], { type: 'text/html' });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement('a');\n    a.href = url;\n    a.download = `agent-tars-${sessionId}-${Date.now()}.html`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  }\n}\n\nexport const shareService = new ShareService();\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;ACvBA;;AAEA;AAIA;;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA;AAEA;AACA;AACA;AAEA;;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;ACnFA;AAqBA;;AAEA;AAIA;;AAEA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAEA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;;;AAIA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAxEA;;AAyEA;AAEA"}